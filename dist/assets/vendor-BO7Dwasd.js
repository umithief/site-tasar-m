import{r as q,j as ht,a as Qm,g as jm}from"./react-vendor-CNCYMnxn.js";var Ho={exports:{}},qo={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _a;function eg(){return _a||(_a=1,(function(e){function t(w,M){var L=w.length;w.push(M);e:for(;0<L;){var O=L-1>>>1,U=w[O];if(0<o(U,M))w[O]=M,w[L]=U,L=O;else break e}}function n(w){return w.length===0?null:w[0]}function i(w){if(w.length===0)return null;var M=w[0],L=w.pop();if(L!==M){w[0]=L;e:for(var O=0,U=w.length,B=U>>>1;O<B;){var $=2*(O+1)-1,X=w[$],Y=$+1,te=w[Y];if(0>o(X,L))Y<U&&0>o(te,X)?(w[O]=te,w[Y]=L,O=Y):(w[O]=X,w[$]=L,O=$);else if(Y<U&&0>o(te,L))w[O]=te,w[Y]=L,O=Y;else break e}}return M}function o(w,M){var L=w.sortIndex-M.sortIndex;return L!==0?L:w.id-M.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var r=Date,a=r.now();e.unstable_now=function(){return r.now()-a}}var c=[],l=[],d=1,h=null,p=3,m=!1,g=!1,y=!1,E=!1,v=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function S(w){for(var M=n(l);M!==null;){if(M.callback===null)i(l);else if(M.startTime<=w)i(l),M.sortIndex=M.expirationTime,t(c,M);else break;M=n(l)}}function A(w){if(y=!1,S(w),!g)if(n(c)!==null)g=!0,P||(P=!0,N());else{var M=n(l);M!==null&&k(A,M.startTime-w)}}var P=!1,D=-1,R=5,C=-1;function _(){return E?!0:!(e.unstable_now()-C<R)}function b(){if(E=!1,P){var w=e.unstable_now();C=w;var M=!0;try{e:{g=!1,y&&(y=!1,T(D),D=-1),m=!0;var L=p;try{t:{for(S(w),h=n(c);h!==null&&!(h.expirationTime>w&&_());){var O=h.callback;if(typeof O=="function"){h.callback=null,p=h.priorityLevel;var U=O(h.expirationTime<=w);if(w=e.unstable_now(),typeof U=="function"){h.callback=U,S(w),M=!0;break t}h===n(c)&&i(c),S(w)}else i(c);h=n(c)}if(h!==null)M=!0;else{var B=n(l);B!==null&&k(A,B.startTime-w),M=!1}}break e}finally{h=null,p=L,m=!1}M=void 0}}finally{M?N():P=!1}}}var N;if(typeof I=="function")N=function(){I(b)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,x=F.port2;F.port1.onmessage=b,N=function(){x.postMessage(null)}}else N=function(){v(b,0)};function k(w,M){D=v(function(){w(e.unstable_now())},M)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(w){w.callback=null},e.unstable_forceFrameRate=function(w){0>w||125<w?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<w?Math.floor(1e3/w):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(w){switch(p){case 1:case 2:case 3:var M=3;break;default:M=p}var L=p;p=M;try{return w()}finally{p=L}},e.unstable_requestPaint=function(){E=!0},e.unstable_runWithPriority=function(w,M){switch(w){case 1:case 2:case 3:case 4:case 5:break;default:w=3}var L=p;p=w;try{return M()}finally{p=L}},e.unstable_scheduleCallback=function(w,M,L){var O=e.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?O+L:O):L=O,w){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=L+U,w={id:d++,callback:M,priorityLevel:w,startTime:L,expirationTime:U,sortIndex:-1},L>O?(w.sortIndex=L,t(l,w),n(c)===null&&w===n(l)&&(y?(T(D),D=-1):y=!0,k(A,L-O))):(w.sortIndex=U,t(c,w),g||m||(g=!0,P||(P=!0,N()))),w},e.unstable_shouldYield=_,e.unstable_wrapCallback=function(w){var M=p;return function(){var L=p;p=M;try{return w.apply(this,arguments)}finally{p=L}}}})(qo)),qo}var Ca;function rO(){return Ca||(Ca=1,Ho.exports=eg()),Ho.exports}const pr=q.createContext({});function Cn(e){const t=q.useRef(null);return t.current===null&&(t.current=e()),t.current}const mr=typeof window<"u",yo=mr?q.useLayoutEffect:q.useEffect,Eo=q.createContext(null);function gr(e,t){e.indexOf(t)===-1&&e.push(t)}function To(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const ft=(e,t,n)=>n>t?t:n<e?e:n;let jn=()=>{};const pt={},zd=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function Jd(e){return typeof e=="object"&&e!==null}const Kd=e=>/^0[^.\s]+$/u.test(e);function yr(e){let t;return()=>(t===void 0&&(t=e()),t)}const Ue=e=>e,tg=(e,t)=>n=>t(e(n)),ui=(...e)=>e.reduce(tg),Wt=(e,t,n)=>{const i=t-e;return i===0?1:(n-e)/i};class Er{constructor(){this.subscriptions=[]}add(t){return gr(this.subscriptions,t),()=>To(this.subscriptions,t)}notify(t,n,i){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](t,n,i);else for(let s=0;s<o;s++){const r=this.subscriptions[s];r&&r(t,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const it=e=>e*1e3,Ye=e=>e/1e3;function Tr(e,t){return t?e*(1e3/t):0}const ng=(e,t,n)=>{const i=t-e;return((n-e)%i+i)%i+e},Xd=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,ig=1e-7,og=12;function sg(e,t,n,i,o){let s,r,a=0;do r=t+(n-t)/2,s=Xd(r,i,o)-e,s>0?n=r:t=r;while(Math.abs(s)>ig&&++a<og);return r}function di(e,t,n,i){if(e===t&&n===i)return Ue;const o=s=>sg(s,0,1,e,n);return s=>s===0||s===1?s:Xd(o(s),t,i)}const Zd=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Qd=e=>t=>1-e(1-t),jd=di(.33,1.53,.69,.99),Ir=Qd(jd),ef=Zd(Ir),tf=e=>(e*=2)<1?.5*Ir(e):.5*(2-Math.pow(2,-10*(e-1))),vr=e=>1-Math.sin(Math.acos(e)),nf=Qd(vr),of=Zd(vr),rg=di(.42,0,1,1),ag=di(0,0,.58,1),sf=di(.42,0,.58,1),rf=e=>Array.isArray(e)&&typeof e[0]!="number";function af(e,t){return rf(e)?e[ng(0,e.length,t)]:e}const lf=e=>Array.isArray(e)&&typeof e[0]=="number",lg={linear:Ue,easeIn:rg,easeInOut:sf,easeOut:ag,circIn:vr,circInOut:of,circOut:nf,backIn:Ir,backInOut:ef,backOut:jd,anticipate:tf},cg=e=>typeof e=="string",Sa=e=>{if(lf(e)){jn(e.length===4);const[t,n,i,o]=e;return di(t,n,i,o)}else if(cg(e))return lg[e];return e},yi=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function ug(e,t){let n=new Set,i=new Set,o=!1,s=!1;const r=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function c(d){r.has(d)&&(l.schedule(d),e()),d(a)}const l={schedule:(d,h=!1,p=!1)=>{const g=p&&o?n:i;return h&&r.add(d),g.has(d)||g.add(d),d},cancel:d=>{i.delete(d),r.delete(d)},process:d=>{if(a=d,o){s=!0;return}o=!0,[n,i]=[i,n],n.forEach(c),n.clear(),o=!1,s&&(s=!1,l.process(d))}};return l}const dg=40;function cf(e,t){let n=!1,i=!0;const o={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,r=yi.reduce((I,S)=>(I[S]=ug(s),I),{}),{setup:a,read:c,resolveKeyframes:l,preUpdate:d,update:h,preRender:p,render:m,postRender:g}=r,y=()=>{const I=pt.useManualTiming?o.timestamp:performance.now();n=!1,pt.useManualTiming||(o.delta=i?1e3/60:Math.max(Math.min(I-o.timestamp,dg),1)),o.timestamp=I,o.isProcessing=!0,a.process(o),c.process(o),l.process(o),d.process(o),h.process(o),p.process(o),m.process(o),g.process(o),o.isProcessing=!1,n&&t&&(i=!1,e(y))},E=()=>{n=!0,i=!0,o.isProcessing||e(y)};return{schedule:yi.reduce((I,S)=>{const A=r[S];return I[S]=(P,D=!1,R=!1)=>(n||E(),A.schedule(P,D,R)),I},{}),cancel:I=>{for(let S=0;S<yi.length;S++)r[yi[S]].cancel(I)},state:o,steps:r}}const{schedule:se,cancel:rt,state:Ie,steps:Wo}=cf(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ue,!0);let ki;function fg(){ki=void 0}const Ve={now:()=>(ki===void 0&&Ve.set(Ie.isProcessing||pt.useManualTiming?Ie.timestamp:performance.now()),ki),set:e=>{ki=e,queueMicrotask(fg)}},uf=e=>t=>typeof t=="string"&&t.startsWith(e),df=uf("--"),hg=uf("var(--"),_r=e=>hg(e)?pg.test(e.split("/*")[0].trim()):!1,pg=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Sn={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},ei={...Sn,transform:e=>ft(0,1,e)},Ei={...Sn,default:1},qn=e=>Math.round(e*1e5)/1e5,Cr=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function mg(e){return e==null}const gg=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Sr=(e,t)=>n=>!!(typeof n=="string"&&gg.test(n)&&n.startsWith(e)||t&&!mg(n)&&Object.prototype.hasOwnProperty.call(n,t)),ff=(e,t,n)=>i=>{if(typeof i!="string")return i;const[o,s,r,a]=i.match(Cr);return{[e]:parseFloat(o),[t]:parseFloat(s),[n]:parseFloat(r),alpha:a!==void 0?parseFloat(a):1}},yg=e=>ft(0,255,e),$o={...Sn,transform:e=>Math.round(yg(e))},Nt={test:Sr("rgb","red"),parse:ff("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:i=1})=>"rgba("+$o.transform(e)+", "+$o.transform(t)+", "+$o.transform(n)+", "+qn(ei.transform(i))+")"};function Eg(e){let t="",n="",i="",o="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),i=e.substring(5,7),o=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),i=e.substring(3,4),o=e.substring(4,5),t+=t,n+=n,i+=i,o+=o),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:o?parseInt(o,16)/255:1}}const Is={test:Sr("#"),parse:Eg,transform:Nt.transform},fi=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),vt=fi("deg"),dt=fi("%"),z=fi("px"),Tg=fi("vh"),Ig=fi("vw"),Aa={...dt,parse:e=>dt.parse(e)/100,transform:e=>dt.transform(e*100)},Qt={test:Sr("hsl","hue"),parse:ff("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:i=1})=>"hsla("+Math.round(e)+", "+dt.transform(qn(t))+", "+dt.transform(qn(n))+", "+qn(ei.transform(i))+")"},pe={test:e=>Nt.test(e)||Is.test(e)||Qt.test(e),parse:e=>Nt.test(e)?Nt.parse(e):Qt.test(e)?Qt.parse(e):Is.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Nt.transform(e):Qt.transform(e),getAnimatableNone:e=>{const t=pe.parse(e);return t.alpha=0,pe.transform(t)}},vg=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function _g(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(Cr))==null?void 0:t.length)||0)+(((n=e.match(vg))==null?void 0:n.length)||0)>0}const hf="number",pf="color",Cg="var",Sg="var(",Ra="${}",Ag=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ti(e){const t=e.toString(),n=[],i={color:[],number:[],var:[]},o=[];let s=0;const a=t.replace(Ag,c=>(pe.test(c)?(i.color.push(s),o.push(pf),n.push(pe.parse(c))):c.startsWith(Sg)?(i.var.push(s),o.push(Cg),n.push(c)):(i.number.push(s),o.push(hf),n.push(parseFloat(c))),++s,Ra)).split(Ra);return{values:n,split:a,indexes:i,types:o}}function mf(e){return ti(e).values}function gf(e){const{split:t,types:n}=ti(e),i=t.length;return o=>{let s="";for(let r=0;r<i;r++)if(s+=t[r],o[r]!==void 0){const a=n[r];a===hf?s+=qn(o[r]):a===pf?s+=pe.transform(o[r]):s+=o[r]}return s}}const Rg=e=>typeof e=="number"?0:pe.test(e)?pe.getAnimatableNone(e):e;function wg(e){const t=mf(e);return gf(e)(t.map(Rg))}const wt={test:_g,parse:mf,createTransformer:gf,getAnimatableNone:wg};function Yo(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Mg({hue:e,saturation:t,lightness:n,alpha:i}){e/=360,t/=100,n/=100;let o=0,s=0,r=0;if(!t)o=s=r=n;else{const a=n<.5?n*(1+t):n+t-n*t,c=2*n-a;o=Yo(c,a,e+1/3),s=Yo(c,a,e),r=Yo(c,a,e-1/3)}return{red:Math.round(o*255),green:Math.round(s*255),blue:Math.round(r*255),alpha:i}}function Ki(e,t){return n=>n>0?t:e}const ae=(e,t,n)=>e+(t-e)*n,zo=(e,t,n)=>{const i=e*e,o=n*(t*t-i)+i;return o<0?0:Math.sqrt(o)},Pg=[Is,Nt,Qt],Dg=e=>Pg.find(t=>t.test(e));function wa(e){const t=Dg(e);if(!t)return!1;let n=t.parse(e);return t===Qt&&(n=Mg(n)),n}const Ma=(e,t)=>{const n=wa(e),i=wa(t);if(!n||!i)return Ki(e,t);const o={...n};return s=>(o.red=zo(n.red,i.red,s),o.green=zo(n.green,i.green,s),o.blue=zo(n.blue,i.blue,s),o.alpha=ae(n.alpha,i.alpha,s),Nt.transform(o))},vs=new Set(["none","hidden"]);function bg(e,t){return vs.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function xg(e,t){return n=>ae(e,t,n)}function Ar(e){return typeof e=="number"?xg:typeof e=="string"?_r(e)?Ki:pe.test(e)?Ma:Og:Array.isArray(e)?yf:typeof e=="object"?pe.test(e)?Ma:Ng:Ki}function yf(e,t){const n=[...e],i=n.length,o=e.map((s,r)=>Ar(s)(s,t[r]));return s=>{for(let r=0;r<i;r++)n[r]=o[r](s);return n}}function Ng(e,t){const n={...e,...t},i={};for(const o in n)e[o]!==void 0&&t[o]!==void 0&&(i[o]=Ar(e[o])(e[o],t[o]));return o=>{for(const s in i)n[s]=i[s](o);return n}}function Lg(e,t){const n=[],i={color:0,var:0,number:0};for(let o=0;o<t.values.length;o++){const s=t.types[o],r=e.indexes[s][i[s]],a=e.values[r]??0;n[o]=a,i[s]++}return n}const Og=(e,t)=>{const n=wt.createTransformer(t),i=ti(e),o=ti(t);return i.indexes.var.length===o.indexes.var.length&&i.indexes.color.length===o.indexes.color.length&&i.indexes.number.length>=o.indexes.number.length?vs.has(e)&&!o.values.length||vs.has(t)&&!i.values.length?bg(e,t):ui(yf(Lg(i,o),o.values),n):Ki(e,t)};function Ef(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?ae(e,t,n):Ar(e)(e,t)}const Fg=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>se.update(t,n),stop:()=>rt(t),now:()=>Ie.isProcessing?Ie.timestamp:Ve.now()}},Tf=(e,t,n=10)=>{let i="";const o=Math.max(Math.round(t/n),2);for(let s=0;s<o;s++)i+=Math.round(e(s/(o-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},Xi=2e4;function Rr(e){let t=0;const n=50;let i=e.next(t);for(;!i.done&&t<Xi;)t+=n,i=e.next(t);return t>=Xi?1/0:t}function If(e,t=100,n){const i=n({...e,keyframes:[0,t]}),o=Math.min(Rr(i),Xi);return{type:"keyframes",ease:s=>i.next(o*s).value/t,duration:Ye(o)}}const kg=5;function vf(e,t,n){const i=Math.max(t-kg,0);return Tr(n-e(i),t-i)}const le={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Jo=.001;function Vg({duration:e=le.duration,bounce:t=le.bounce,velocity:n=le.velocity,mass:i=le.mass}){let o,s,r=1-t;r=ft(le.minDamping,le.maxDamping,r),e=ft(le.minDuration,le.maxDuration,Ye(e)),r<1?(o=l=>{const d=l*r,h=d*e,p=d-n,m=_s(l,r),g=Math.exp(-h);return Jo-p/m*g},s=l=>{const h=l*r*e,p=h*n+n,m=Math.pow(r,2)*Math.pow(l,2)*e,g=Math.exp(-h),y=_s(Math.pow(l,2),r);return(-o(l)+Jo>0?-1:1)*((p-m)*g)/y}):(o=l=>{const d=Math.exp(-l*e),h=(l-n)*e+1;return-Jo+d*h},s=l=>{const d=Math.exp(-l*e),h=(n-l)*(e*e);return d*h});const a=5/e,c=Gg(o,s,a);if(e=it(e),isNaN(c))return{stiffness:le.stiffness,damping:le.damping,duration:e};{const l=Math.pow(c,2)*i;return{stiffness:l,damping:r*2*Math.sqrt(i*l),duration:e}}}const Ug=12;function Gg(e,t,n){let i=n;for(let o=1;o<Ug;o++)i=i-e(i)/t(i);return i}function _s(e,t){return e*Math.sqrt(1-t*t)}const Bg=["duration","bounce"],Hg=["stiffness","damping","mass"];function Pa(e,t){return t.some(n=>e[n]!==void 0)}function qg(e){let t={velocity:le.velocity,stiffness:le.stiffness,damping:le.damping,mass:le.mass,isResolvedFromDuration:!1,...e};if(!Pa(e,Hg)&&Pa(e,Bg))if(e.visualDuration){const n=e.visualDuration,i=2*Math.PI/(n*1.2),o=i*i,s=2*ft(.05,1,1-(e.bounce||0))*Math.sqrt(o);t={...t,mass:le.mass,stiffness:o,damping:s}}else{const n=Vg(e);t={...t,...n,mass:le.mass},t.isResolvedFromDuration=!0}return t}function ni(e=le.visualDuration,t=le.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:i,restDelta:o}=n;const s=n.keyframes[0],r=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:c,damping:l,mass:d,duration:h,velocity:p,isResolvedFromDuration:m}=qg({...n,velocity:-Ye(n.velocity||0)}),g=p||0,y=l/(2*Math.sqrt(c*d)),E=r-s,v=Ye(Math.sqrt(c/d)),T=Math.abs(E)<5;i||(i=T?le.restSpeed.granular:le.restSpeed.default),o||(o=T?le.restDelta.granular:le.restDelta.default);let I;if(y<1){const A=_s(v,y);I=P=>{const D=Math.exp(-y*v*P);return r-D*((g+y*v*E)/A*Math.sin(A*P)+E*Math.cos(A*P))}}else if(y===1)I=A=>r-Math.exp(-v*A)*(E+(g+v*E)*A);else{const A=v*Math.sqrt(y*y-1);I=P=>{const D=Math.exp(-y*v*P),R=Math.min(A*P,300);return r-D*((g+y*v*E)*Math.sinh(R)+A*E*Math.cosh(R))/A}}const S={calculatedDuration:m&&h||null,next:A=>{const P=I(A);if(m)a.done=A>=h;else{let D=A===0?g:0;y<1&&(D=A===0?it(g):vf(I,A,P));const R=Math.abs(D)<=i,C=Math.abs(r-P)<=o;a.done=R&&C}return a.value=a.done?r:P,a},toString:()=>{const A=Math.min(Rr(S),Xi),P=Tf(D=>S.next(A*D).value,A,30);return A+"ms "+P},toTransition:()=>{}};return S}ni.applyToOptions=e=>{const t=If(e,100,ni);return e.ease=t.ease,e.duration=it(t.duration),e.type="keyframes",e};function Cs({keyframes:e,velocity:t=0,power:n=.8,timeConstant:i=325,bounceDamping:o=10,bounceStiffness:s=500,modifyTarget:r,min:a,max:c,restDelta:l=.5,restSpeed:d}){const h=e[0],p={done:!1,value:h},m=R=>a!==void 0&&R<a||c!==void 0&&R>c,g=R=>a===void 0?c:c===void 0||Math.abs(a-R)<Math.abs(c-R)?a:c;let y=n*t;const E=h+y,v=r===void 0?E:r(E);v!==E&&(y=v-h);const T=R=>-y*Math.exp(-R/i),I=R=>v+T(R),S=R=>{const C=T(R),_=I(R);p.done=Math.abs(C)<=l,p.value=p.done?v:_};let A,P;const D=R=>{m(p.value)&&(A=R,P=ni({keyframes:[p.value,g(p.value)],velocity:vf(I,R,p.value),damping:o,stiffness:s,restDelta:l,restSpeed:d}))};return D(0),{calculatedDuration:null,next:R=>{let C=!1;return!P&&A===void 0&&(C=!0,S(R),D(R)),A!==void 0&&R>=A?P.next(R-A):(!C&&S(R),p)}}}function Wg(e,t,n){const i=[],o=n||pt.mix||Ef,s=e.length-1;for(let r=0;r<s;r++){let a=o(e[r],e[r+1]);if(t){const c=Array.isArray(t)?t[r]||Ue:t;a=ui(c,a)}i.push(a)}return i}function wr(e,t,{clamp:n=!0,ease:i,mixer:o}={}){const s=e.length;if(jn(s===t.length),s===1)return()=>t[0];if(s===2&&t[0]===t[1])return()=>t[1];const r=e[0]===e[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=Wg(t,i,o),c=a.length,l=d=>{if(r&&d<e[0])return t[0];let h=0;if(c>1)for(;h<e.length-2&&!(d<e[h+1]);h++);const p=Wt(e[h],e[h+1],d);return a[h](p)};return n?d=>l(ft(e[0],e[s-1],d)):l}function _f(e,t){const n=e[e.length-1];for(let i=1;i<=t;i++){const o=Wt(0,t,i);e.push(ae(n,1,o))}}function Mr(e){const t=[0];return _f(t,e.length-1),t}function $g(e,t){return e.map(n=>n*t)}function Yg(e,t){return e.map(()=>t||sf).splice(0,e.length-1)}function Wn({duration:e=300,keyframes:t,times:n,ease:i="easeInOut"}){const o=rf(i)?i.map(Sa):Sa(i),s={done:!1,value:t[0]},r=$g(n&&n.length===t.length?n:Mr(t),e),a=wr(r,t,{ease:Array.isArray(o)?o:Yg(t,o)});return{calculatedDuration:e,next:c=>(s.value=a(c),s.done=c>=e,s)}}const zg=e=>e!==null;function Pr(e,{repeat:t,repeatType:n="loop"},i,o=1){const s=e.filter(zg),a=o<0||t&&n!=="loop"&&t%2===1?0:s.length-1;return!a||i===void 0?s[a]:i}const Jg={decay:Cs,inertia:Cs,tween:Wn,keyframes:Wn,spring:ni};function Cf(e){typeof e.type=="string"&&(e.type=Jg[e.type])}class Dr{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const Kg=e=>e/100;class Io extends Dr{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var i,o;const{motionValue:n}=this.options;n&&n.updatedAt!==Ve.now()&&this.tick(Ve.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(o=(i=this.options).onStop)==null||o.call(i))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;Cf(t);const{type:n=Wn,repeat:i=0,repeatDelay:o=0,repeatType:s,velocity:r=0}=t;let{keyframes:a}=t;const c=n||Wn;c!==Wn&&typeof a[0]!="number"&&(this.mixKeyframes=ui(Kg,Ef(a[0],a[1])),a=[0,100]);const l=c({...t,keyframes:a});s==="mirror"&&(this.mirroredGenerator=c({...t,keyframes:[...a].reverse(),velocity:-r})),l.calculatedDuration===null&&(l.calculatedDuration=Rr(l));const{calculatedDuration:d}=l;this.calculatedDuration=d,this.resolvedDuration=d+o,this.totalDuration=this.resolvedDuration*(i+1)-o,this.generator=l}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:i,totalDuration:o,mixKeyframes:s,mirroredGenerator:r,resolvedDuration:a,calculatedDuration:c}=this;if(this.startTime===null)return i.next(0);const{delay:l=0,keyframes:d,repeat:h,repeatType:p,repeatDelay:m,type:g,onUpdate:y,finalKeyframe:E}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-o/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const v=this.currentTime-l*(this.playbackSpeed>=0?1:-1),T=this.playbackSpeed>=0?v<0:v>o;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=o);let I=this.currentTime,S=i;if(h){const R=Math.min(this.currentTime,o)/a;let C=Math.floor(R),_=R%1;!_&&R>=1&&(_=1),_===1&&C--,C=Math.min(C,h+1),!!(C%2)&&(p==="reverse"?(_=1-_,m&&(_-=m/a)):p==="mirror"&&(S=r)),I=ft(0,1,_)*a}const A=T?{done:!1,value:d[0]}:S.next(I);s&&(A.value=s(A.value));let{done:P}=A;!T&&c!==null&&(P=this.playbackSpeed>=0?this.currentTime>=o:this.currentTime<=0);const D=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&P);return D&&g!==Cs&&(A.value=Pr(d,this.options,E,this.speed)),y&&y(A.value),D&&this.finish(),A}then(t,n){return this.finished.then(t,n)}get duration(){return Ye(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Ye(t)}get time(){return Ye(this.currentTime)}set time(t){var n;t=it(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Ve.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Ye(this.currentTime))}play(){var o,s;if(this.isStopped)return;const{driver:t=Fg,startTime:n}=this.options;this.driver||(this.driver=t(r=>this.tick(r))),(s=(o=this.options).onPlay)==null||s.call(o);const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=n??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Ve.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(t=this.options).onComplete)==null||n.call(t)}cancel(){var t,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(t=this.options).onCancel)==null||n.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),t.observe(this)}}function Xg(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Lt=e=>e*180/Math.PI,Ss=e=>{const t=Lt(Math.atan2(e[1],e[0]));return As(t)},Zg={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Ss,rotateZ:Ss,skewX:e=>Lt(Math.atan(e[1])),skewY:e=>Lt(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},As=e=>(e=e%360,e<0&&(e+=360),e),Da=Ss,ba=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),xa=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),Qg={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:ba,scaleY:xa,scale:e=>(ba(e)+xa(e))/2,rotateX:e=>As(Lt(Math.atan2(e[6],e[5]))),rotateY:e=>As(Lt(Math.atan2(-e[2],e[0]))),rotateZ:Da,rotate:Da,skewX:e=>Lt(Math.atan(e[4])),skewY:e=>Lt(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function Rs(e){return e.includes("scale")?1:0}function ws(e,t){if(!e||e==="none")return Rs(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,o;if(n)i=Qg,o=n;else{const a=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=Zg,o=a}if(!o)return Rs(t);const s=i[t],r=o[1].split(",").map(ey);return typeof s=="function"?s(r):r[s]}const jg=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return ws(n,t)};function ey(e){return parseFloat(e.trim())}const An=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Rn=new Set(An),Na=e=>e===Sn||e===z,ty=new Set(["x","y","z"]),ny=An.filter(e=>!ty.has(e));function iy(e){const t=[];return ny.forEach(n=>{const i=e.getValue(n);i!==void 0&&(t.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),t}const Ut={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>ws(t,"x"),y:(e,{transform:t})=>ws(t,"y")};Ut.translateX=Ut.x;Ut.translateY=Ut.y;const Gt=new Set;let Ms=!1,Ps=!1,Ds=!1;function Sf(){if(Ps){const e=Array.from(Gt).filter(i=>i.needsMeasurement),t=new Set(e.map(i=>i.element)),n=new Map;t.forEach(i=>{const o=iy(i);o.length&&(n.set(i,o),i.render())}),e.forEach(i=>i.measureInitialState()),t.forEach(i=>{i.render();const o=n.get(i);o&&o.forEach(([s,r])=>{var a;(a=i.getValue(s))==null||a.set(r)})}),e.forEach(i=>i.measureEndState()),e.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}Ps=!1,Ms=!1,Gt.forEach(e=>e.complete(Ds)),Gt.clear()}function Af(){Gt.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Ps=!0)})}function oy(){Ds=!0,Af(),Sf(),Ds=!1}class br{constructor(t,n,i,o,s,r=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=i,this.motionValue=o,this.element=s,this.isAsync=r}scheduleResolve(){this.state="scheduled",this.isAsync?(Gt.add(this),Ms||(Ms=!0,se.read(Af),se.resolveKeyframes(Sf))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:i,motionValue:o}=this;if(t[0]===null){const s=o==null?void 0:o.get(),r=t[t.length-1];if(s!==void 0)t[0]=s;else if(i&&n){const a=i.readValue(n,r);a!=null&&(t[0]=a)}t[0]===void 0&&(t[0]=r),o&&s===void 0&&o.set(t[0])}Xg(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Gt.delete(this)}cancel(){this.state==="scheduled"&&(Gt.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const sy=e=>e.startsWith("--");function ry(e,t,n){sy(t)?e.style.setProperty(t,n):e.style[t]=n}const Rf=yr(()=>window.ScrollTimeline!==void 0),ay={};function ly(e,t){const n=yr(e);return()=>ay[t]??n()}const wf=ly(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Bn=([e,t,n,i])=>`cubic-bezier(${e}, ${t}, ${n}, ${i})`,La={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Bn([0,.65,.55,1]),circOut:Bn([.55,0,1,.45]),backIn:Bn([.31,.01,.66,-.59]),backOut:Bn([.33,1.53,.69,.99])};function Mf(e,t){if(e)return typeof e=="function"?wf()?Tf(e,t):"ease-out":lf(e)?Bn(e):Array.isArray(e)?e.map(n=>Mf(n,t)||La.easeOut):La[e]}function cy(e,t,n,{delay:i=0,duration:o=300,repeat:s=0,repeatType:r="loop",ease:a="easeOut",times:c}={},l=void 0){const d={[t]:n};c&&(d.offset=c);const h=Mf(a,o);Array.isArray(h)&&(d.easing=h);const p={delay:i,duration:o,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:r==="reverse"?"alternate":"normal"};return l&&(p.pseudoElement=l),e.animate(d,p)}function xr(e){return typeof e=="function"&&"applyToOptions"in e}function uy({type:e,...t}){return xr(e)&&wf()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class dy extends Dr{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:i,keyframes:o,pseudoElement:s,allowFlatten:r=!1,finalKeyframe:a,onComplete:c}=t;this.isPseudoElement=!!s,this.allowFlatten=r,this.options=t,jn(typeof t.type!="string");const l=uy(t);this.animation=cy(n,i,o,l,s),l.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const d=Pr(o,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(d):ry(n,i,d),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,i;const t=((i=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:i.call(n).duration)||0;return Ye(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Ye(t)}get time(){return Ye(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=it(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var i;return this.allowFlatten&&((i=this.animation.effect)==null||i.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&Rf()?(this.animation.timeline=t,Ue):n(this)}}const Pf={anticipate:tf,backInOut:ef,circInOut:of};function fy(e){return e in Pf}function hy(e){typeof e.ease=="string"&&fy(e.ease)&&(e.ease=Pf[e.ease])}const Oa=10;class py extends dy{constructor(t){hy(t),Cf(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:i,onComplete:o,element:s,...r}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const a=new Io({...r,autoplay:!1}),c=it(this.finishedTime??this.time);n.setWithVelocity(a.sample(c-Oa).value,a.sample(c).value,Oa),a.stop()}}const Fa=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(wt.test(e)||e==="0")&&!e.startsWith("url("));function my(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function gy(e,t,n,i){const o=e[0];if(o===null)return!1;if(t==="display"||t==="visibility")return!0;const s=e[e.length-1],r=Fa(o,t),a=Fa(s,t);return!r||!a?!1:my(e)||(n==="spring"||xr(n))&&i}function bs(e){e.duration=0,e.type="keyframes"}const yy=new Set(["opacity","clipPath","filter","transform"]),Ey=yr(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Ty(e){var d;const{motionValue:t,name:n,repeatDelay:i,repeatType:o,damping:s,type:r}=e;if(!(((d=t==null?void 0:t.owner)==null?void 0:d.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:l}=t.owner.getProps();return Ey()&&n&&yy.has(n)&&(n!=="transform"||!l)&&!c&&!i&&o!=="mirror"&&s!==0&&r!=="inertia"}const Iy=40;class vy extends Dr{constructor({autoplay:t=!0,delay:n=0,type:i="keyframes",repeat:o=0,repeatDelay:s=0,repeatType:r="loop",keyframes:a,name:c,motionValue:l,element:d,...h}){var g;super(),this.stop=()=>{var y,E;this._animation&&(this._animation.stop(),(y=this.stopTimeline)==null||y.call(this)),(E=this.keyframeResolver)==null||E.cancel()},this.createdAt=Ve.now();const p={autoplay:t,delay:n,type:i,repeat:o,repeatDelay:s,repeatType:r,name:c,motionValue:l,element:d,...h},m=(d==null?void 0:d.KeyframeResolver)||br;this.keyframeResolver=new m(a,(y,E,v)=>this.onKeyframesResolved(y,E,p,!v),c,l,d),(g=this.keyframeResolver)==null||g.scheduleResolve()}onKeyframesResolved(t,n,i,o){this.keyframeResolver=void 0;const{name:s,type:r,velocity:a,delay:c,isHandoff:l,onUpdate:d}=i;this.resolvedAt=Ve.now(),gy(t,s,r,a)||((pt.instantAnimations||!c)&&(d==null||d(Pr(t,i,n))),t[0]=t[t.length-1],bs(i),i.repeat=0);const p={startTime:o?this.resolvedAt?this.resolvedAt-this.createdAt>Iy?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...i,keyframes:t},m=!l&&Ty(p)?new py({...p,element:p.motionValue.owner.current}):new Io(p);m.finished.then(()=>this.notifyFinished()).catch(Ue),this.pendingTimeline&&(this.stopTimeline=m.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=m}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),oy()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}class _y{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>t.finished))}getAll(t){return this.animations[0][t]}setAll(t,n){for(let i=0;i<this.animations.length;i++)this.animations[i][t]=n}attachTimeline(t){const n=this.animations.map(i=>i.attachTimeline(t));return()=>{n.forEach((i,o)=>{i&&i(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get state(){return this.getAll("state")}get startTime(){return this.getAll("startTime")}get duration(){return ka(this.animations,"duration")}get iterationDuration(){return ka(this.animations,"iterationDuration")}runAll(t){this.animations.forEach(n=>n[t]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function ka(e,t){let n=0;for(let i=0;i<e.length;i++){const o=e[i][t];o!==null&&o>n&&(n=o)}return n}class Cy extends _y{then(t,n){return this.finished.finally(t).then(()=>{})}}const Sy=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Ay(e){const t=Sy.exec(e);if(!t)return[,];const[,n,i,o]=t;return[`--${n??i}`,o]}function Df(e,t,n=1){const[i,o]=Ay(e);if(!i)return;const s=window.getComputedStyle(t).getPropertyValue(i);if(s){const r=s.trim();return zd(r)?parseFloat(r):r}return _r(o)?Df(o,t,n+1):o}function Nr(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const bf=new Set(["width","height","top","left","right","bottom",...An]),Ry={test:e=>e==="auto",parse:e=>e},xf=e=>t=>t.test(e),Nf=[Sn,z,dt,vt,Ig,Tg,Ry],Va=e=>Nf.find(xf(e));function wy(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||Kd(e):!0}const My=new Set(["brightness","contrast","saturate","opacity"]);function Py(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[i]=n.match(Cr)||[];if(!i)return e;const o=n.replace(i,"");let s=My.has(t)?1:0;return i!==n&&(s*=100),t+"("+s+o+")"}const Dy=/\b([a-z-]*)\(.*?\)/gu,xs={...wt,getAnimatableNone:e=>{const t=e.match(Dy);return t?t.map(Py).join(" "):e}},Ua={...Sn,transform:Math.round},by={rotate:vt,rotateX:vt,rotateY:vt,rotateZ:vt,scale:Ei,scaleX:Ei,scaleY:Ei,scaleZ:Ei,skew:vt,skewX:vt,skewY:vt,distance:z,translateX:z,translateY:z,translateZ:z,x:z,y:z,z,perspective:z,transformPerspective:z,opacity:ei,originX:Aa,originY:Aa,originZ:z},Lr={borderWidth:z,borderTopWidth:z,borderRightWidth:z,borderBottomWidth:z,borderLeftWidth:z,borderRadius:z,radius:z,borderTopLeftRadius:z,borderTopRightRadius:z,borderBottomRightRadius:z,borderBottomLeftRadius:z,width:z,maxWidth:z,height:z,maxHeight:z,top:z,right:z,bottom:z,left:z,padding:z,paddingTop:z,paddingRight:z,paddingBottom:z,paddingLeft:z,margin:z,marginTop:z,marginRight:z,marginBottom:z,marginLeft:z,backgroundPositionX:z,backgroundPositionY:z,...by,zIndex:Ua,fillOpacity:ei,strokeOpacity:ei,numOctaves:Ua},xy={...Lr,color:pe,backgroundColor:pe,outlineColor:pe,fill:pe,stroke:pe,borderColor:pe,borderTopColor:pe,borderRightColor:pe,borderBottomColor:pe,borderLeftColor:pe,filter:xs,WebkitFilter:xs},Lf=e=>xy[e];function Of(e,t){let n=Lf(e);return n!==xs&&(n=wt),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const Ny=new Set(["auto","none","0"]);function Ly(e,t,n){let i=0,o;for(;i<e.length&&!o;){const s=e[i];typeof s=="string"&&!Ny.has(s)&&ti(s).values.length&&(o=e[i]),i++}if(o&&n)for(const s of t)e[s]=Of(n,o)}class Oy extends br{constructor(t,n,i,o,s){super(t,n,i,o,s,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let l=t[c];if(typeof l=="string"&&(l=l.trim(),_r(l))){const d=Df(l,n.current);d!==void 0&&(t[c]=d),c===t.length-1&&(this.finalKeyframe=l)}}if(this.resolveNoneKeyframes(),!bf.has(i)||t.length!==2)return;const[o,s]=t,r=Va(o),a=Va(s);if(r!==a)if(Na(r)&&Na(a))for(let c=0;c<t.length;c++){const l=t[c];typeof l=="string"&&(t[c]=parseFloat(l))}else Ut[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,i=[];for(let o=0;o<t.length;o++)(t[o]===null||wy(t[o]))&&i.push(o);i.length&&Ly(t,i,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:i}=this;if(!t||!t.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ut[i](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const o=n[n.length-1];o!==void 0&&t.getValue(i,o).jump(o,!1)}measureEndState(){var a;const{element:t,name:n,unresolvedKeyframes:i}=this;if(!t||!t.current)return;const o=t.getValue(n);o&&o.jump(this.measuredOrigin,!1);const s=i.length-1,r=i[s];i[s]=Ut[n](t.measureViewportBox(),window.getComputedStyle(t.current)),r!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=r),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([c,l])=>{t.getValue(c).set(l)}),this.resolveNoneKeyframes()}}function Or(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let i=document;const o=(n==null?void 0:n[e])??i.querySelectorAll(e);return o?Array.from(o):[]}return Array.from(e)}const Ff=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function Fr(e){return Jd(e)&&"offsetHeight"in e}const Ga=30,Fy=e=>!isNaN(parseFloat(e)),$n={current:void 0};class ky{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{var s;const o=Ve.now();if(this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const r of this.dependents)r.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Ve.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=Fy(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Er);const i=this.events[t].add(n);return t==="change"?()=>{i(),se.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-i}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return $n.current&&$n.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const t=Ve.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Ga)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Ga);return Tr(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,n;(t=this.dependents)==null||t.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function tt(e,t){return new ky(e,t)}const{schedule:kr}=cf(queueMicrotask,!1),Qe={x:!1,y:!1};function kf(){return Qe.x||Qe.y}function Vy(e){return e==="x"||e==="y"?Qe[e]?null:(Qe[e]=!0,()=>{Qe[e]=!1}):Qe.x||Qe.y?null:(Qe.x=Qe.y=!0,()=>{Qe.x=Qe.y=!1})}function Vf(e,t){const n=Or(e),i=new AbortController,o={passive:!0,...t,signal:i.signal};return[n,o,()=>i.abort()]}function Ba(e){return!(e.pointerType==="touch"||kf())}function Uy(e,t,n={}){const[i,o,s]=Vf(e,n),r=a=>{if(!Ba(a))return;const{target:c}=a,l=t(c,a);if(typeof l!="function"||!c)return;const d=h=>{Ba(h)&&(l(h),c.removeEventListener("pointerleave",d))};c.addEventListener("pointerleave",d,o)};return i.forEach(a=>{a.addEventListener("pointerenter",r,o)}),s}const Uf=(e,t)=>t?e===t?!0:Uf(e,t.parentElement):!1,Vr=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,Gy=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function By(e){return Gy.has(e.tagName)||e.tabIndex!==-1}const Vi=new WeakSet;function Ha(e){return t=>{t.key==="Enter"&&e(t)}}function Ko(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const Hy=(e,t)=>{const n=e.currentTarget;if(!n)return;const i=Ha(()=>{if(Vi.has(n))return;Ko(n,"down");const o=Ha(()=>{Ko(n,"up")}),s=()=>Ko(n,"cancel");n.addEventListener("keyup",o,t),n.addEventListener("blur",s,t)});n.addEventListener("keydown",i,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),t)};function qa(e){return Vr(e)&&!kf()}function qy(e,t,n={}){const[i,o,s]=Vf(e,n),r=a=>{const c=a.currentTarget;if(!qa(a))return;Vi.add(c);const l=t(c,a),d=(m,g)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",p),Vi.has(c)&&Vi.delete(c),qa(m)&&typeof l=="function"&&l(m,{success:g})},h=m=>{d(m,c===window||c===document||n.useGlobalTarget||Uf(c,m.target))},p=m=>{d(m,!1)};window.addEventListener("pointerup",h,o),window.addEventListener("pointercancel",p,o)};return i.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",r,o),Fr(a)&&(a.addEventListener("focus",l=>Hy(l,o)),!By(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),s}function vo(e){return Jd(e)&&"ownerSVGElement"in e}const Ui=new WeakMap;let _t;const Gf=(e,t,n)=>(i,o)=>o&&o[0]?o[0][e+"Size"]:vo(i)&&"getBBox"in i?i.getBBox()[t]:i[n],Wy=Gf("inline","width","offsetWidth"),$y=Gf("block","height","offsetHeight");function Yy({target:e,borderBoxSize:t}){var n;(n=Ui.get(e))==null||n.forEach(i=>{i(e,{get width(){return Wy(e,t)},get height(){return $y(e,t)}})})}function zy(e){e.forEach(Yy)}function Jy(){typeof ResizeObserver>"u"||(_t=new ResizeObserver(zy))}function Ky(e,t){_t||Jy();const n=Or(e);return n.forEach(i=>{let o=Ui.get(i);o||(o=new Set,Ui.set(i,o)),o.add(t),_t==null||_t.observe(i)}),()=>{n.forEach(i=>{const o=Ui.get(i);o==null||o.delete(t),o!=null&&o.size||_t==null||_t.unobserve(i)})}}const Gi=new Set;let jt;function Xy(){jt=()=>{const e={get width(){return window.innerWidth},get height(){return window.innerHeight}};Gi.forEach(t=>t(e))},window.addEventListener("resize",jt)}function Zy(e){return Gi.add(e),jt||Xy(),()=>{Gi.delete(e),!Gi.size&&typeof jt=="function"&&(window.removeEventListener("resize",jt),jt=void 0)}}function Qy(e,t){return typeof e=="function"?Zy(e):Ky(e,t)}function Bf(e,t){let n;const i=()=>{const{currentTime:o}=t,r=(o===null?0:o.value)/100;n!==r&&e(r),n=r};return se.preUpdate(i,!0),()=>rt(i)}function Hf(e){return vo(e)&&e.tagName==="svg"}function jy(...e){const t=!Array.isArray(e[0]),n=t?0:-1,i=e[0+n],o=e[1+n],s=e[2+n],r=e[3+n],a=wr(o,s,r);return t?a(i):a}const me=e=>!!(e&&e.getVelocity);function eE(e,t,n){const i=e.get();let o=null,s=i,r;const a=typeof i=="string"?i.replace(/[\d.-]/g,""):void 0,c=()=>{o&&(o.stop(),o=null)},l=()=>{c(),o=new Io({keyframes:[$a(e.get()),$a(s)],velocity:e.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...n,onUpdate:r})};if(e.attach((d,h)=>{s=d,r=p=>h(Wa(p,a)),se.postRender(l)},c),me(t)){const d=t.on("change",p=>e.set(Wa(p,a))),h=e.on("destroy",d);return()=>{d(),h()}}return c}function Wa(e,t){return t?e+t:e}function $a(e){return typeof e=="number"?e:parseFloat(e)}const tE=[...Nf,pe,wt],nE=e=>tE.find(xf(e)),hi=q.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function Ya(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function iE(...e){return t=>{let n=!1;const i=e.map(o=>{const s=Ya(o,t);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let o=0;o<i.length;o++){const s=i[o];typeof s=="function"?s():Ya(e[o],null)}}}}function oE(...e){return q.useCallback(iE(...e),e)}class sE extends q.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const i=n.offsetParent,o=Fr(i)&&i.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=o-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function rE({children:e,isPresent:t,anchorX:n,root:i}){const o=q.useId(),s=q.useRef(null),r=q.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=q.useContext(hi),c=oE(s,e==null?void 0:e.ref);return q.useInsertionEffect(()=>{const{width:l,height:d,top:h,left:p,right:m}=r.current;if(t||!s.current||!l||!d)return;const g=n==="left"?`left: ${p}`:`right: ${m}`;s.current.dataset.motionPopId=o;const y=document.createElement("style");a&&(y.nonce=a);const E=i??document.head;return E.appendChild(y),y.sheet&&y.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${d}px !important;
            ${g}px !important;
            top: ${h}px !important;
          }
        `),()=>{E.contains(y)&&E.removeChild(y)}},[t]),ht.jsx(sE,{isPresent:t,childRef:s,sizeRef:r,children:q.cloneElement(e,{ref:c})})}const aE=({children:e,initial:t,isPresent:n,onExitComplete:i,custom:o,presenceAffectsLayout:s,mode:r,anchorX:a,root:c})=>{const l=Cn(lE),d=q.useId();let h=!0,p=q.useMemo(()=>(h=!1,{id:d,initial:t,isPresent:n,custom:o,onExitComplete:m=>{l.set(m,!0);for(const g of l.values())if(!g)return;i&&i()},register:m=>(l.set(m,!1),()=>l.delete(m))}),[n,l,i]);return s&&h&&(p={...p}),q.useMemo(()=>{l.forEach((m,g)=>l.set(g,!1))},[n]),q.useEffect(()=>{!n&&!l.size&&i&&i()},[n]),r==="popLayout"&&(e=ht.jsx(rE,{isPresent:n,anchorX:a,root:c,children:e})),ht.jsx(Eo.Provider,{value:p,children:e})};function lE(){return new Map}function qf(e=!0){const t=q.useContext(Eo);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:o}=t,s=q.useId();q.useEffect(()=>{if(e)return o(s)},[e]);const r=q.useCallback(()=>e&&i&&i(s),[s,i,e]);return!n&&i?[!1,r]:[!0]}const Ti=e=>e.key||"";function za(e){const t=[];return q.Children.forEach(e,n=>{q.isValidElement(n)&&t.push(n)}),t}const aO=({children:e,custom:t,initial:n=!0,onExitComplete:i,presenceAffectsLayout:o=!0,mode:s="sync",propagate:r=!1,anchorX:a="left",root:c})=>{const[l,d]=qf(r),h=q.useMemo(()=>za(e),[e]),p=r&&!l?[]:h.map(Ti),m=q.useRef(!0),g=q.useRef(h),y=Cn(()=>new Map),[E,v]=q.useState(h),[T,I]=q.useState(h);yo(()=>{m.current=!1,g.current=h;for(let P=0;P<T.length;P++){const D=Ti(T[P]);p.includes(D)?y.delete(D):y.get(D)!==!0&&y.set(D,!1)}},[T,p.length,p.join("-")]);const S=[];if(h!==E){let P=[...h];for(let D=0;D<T.length;D++){const R=T[D],C=Ti(R);p.includes(C)||(P.splice(D,0,R),S.push(R))}return s==="wait"&&S.length&&(P=S),I(za(P)),v(h),null}const{forceRender:A}=q.useContext(pr);return ht.jsx(ht.Fragment,{children:T.map(P=>{const D=Ti(P),R=r&&!l?!1:h===T||p.includes(D),C=()=>{if(y.has(D))y.set(D,!0);else return;let _=!0;y.forEach(b=>{b||(_=!1)}),_&&(A==null||A(),I(g.current),r&&(d==null||d()),i&&i())};return ht.jsx(aE,{isPresent:R,initial:!m.current||n?void 0:!1,custom:t,presenceAffectsLayout:o,mode:s,root:c,onExitComplete:R?void 0:C,anchorX:a,children:P},D)})})},Wf=q.createContext({strict:!1}),Ja={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},En={};for(const e in Ja)En[e]={isEnabled:t=>Ja[e].some(n=>!!t[n])};function cE(e){for(const t in e)En[t]={...En[t],...e[t]}}const uE=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Zi(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||uE.has(e)}let $f=e=>!Zi(e);function dE(e){typeof e=="function"&&($f=t=>t.startsWith("on")?!Zi(t):e(t))}try{dE(require("@emotion/is-prop-valid").default)}catch{}function fE(e,t,n){const i={};for(const o in e)o==="values"&&typeof e.values=="object"||($f(o)||n===!0&&Zi(o)||!t&&!Zi(o)||e.draggable&&o.startsWith("onDrag"))&&(i[o]=e[o]);return i}const _o=q.createContext({});function Co(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function ii(e){return typeof e=="string"||Array.isArray(e)}const Ur=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Gr=["initial",...Ur];function So(e){return Co(e.animate)||Gr.some(t=>ii(e[t]))}function Yf(e){return!!(So(e)||e.variants)}function hE(e,t){if(So(e)){const{initial:n,animate:i}=e;return{initial:n===!1||ii(n)?n:void 0,animate:ii(i)?i:void 0}}return e.inherit!==!1?t:{}}function pE(e){const{initial:t,animate:n}=hE(e,q.useContext(_o));return q.useMemo(()=>({initial:t,animate:n}),[Ka(t),Ka(n)])}function Ka(e){return Array.isArray(e)?e.join(" "):e}function Xa(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const On={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(z.test(e))e=parseFloat(e);else return e;const n=Xa(e,t.target.x),i=Xa(e,t.target.y);return`${n}% ${i}%`}},mE={correct:(e,{treeScale:t,projectionDelta:n})=>{const i=e,o=wt.parse(e);if(o.length>5)return i;const s=wt.createTransformer(e),r=typeof o[0]!="number"?1:0,a=n.x.scale*t.x,c=n.y.scale*t.y;o[0+r]/=a,o[1+r]/=c;const l=ae(a,c,.5);return typeof o[2+r]=="number"&&(o[2+r]/=l),typeof o[3+r]=="number"&&(o[3+r]/=l),s(o)}},Ns={borderRadius:{...On,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:On,borderTopRightRadius:On,borderBottomLeftRadius:On,borderBottomRightRadius:On,boxShadow:mE};function zf(e,{layout:t,layoutId:n}){return Rn.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Ns[e]||e==="opacity")}const gE={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},yE=An.length;function EE(e,t,n){let i="",o=!0;for(let s=0;s<yE;s++){const r=An[s],a=e[r];if(a===void 0)continue;let c=!0;if(typeof a=="number"?c=a===(r.startsWith("scale")?1:0):c=parseFloat(a)===0,!c||n){const l=Ff(a,Lr[r]);if(!c){o=!1;const d=gE[r]||r;i+=`${d}(${l}) `}n&&(t[r]=l)}}return i=i.trim(),n?i=n(t,o?"":i):o&&(i="none"),i}function Br(e,t,n){const{style:i,vars:o,transformOrigin:s}=e;let r=!1,a=!1;for(const c in t){const l=t[c];if(Rn.has(c)){r=!0;continue}else if(df(c)){o[c]=l;continue}else{const d=Ff(l,Lr[c]);c.startsWith("origin")?(a=!0,s[c]=d):i[c]=d}}if(t.transform||(r||n?i.transform=EE(t,e.transform,n):i.transform&&(i.transform="none")),a){const{originX:c="50%",originY:l="50%",originZ:d=0}=s;i.transformOrigin=`${c} ${l} ${d}`}}const Hr=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Jf(e,t,n){for(const i in t)!me(t[i])&&!zf(i,n)&&(e[i]=t[i])}function TE({transformTemplate:e},t){return q.useMemo(()=>{const n=Hr();return Br(n,t,e),Object.assign({},n.vars,n.style)},[t])}function IE(e,t){const n=e.style||{},i={};return Jf(i,n,e),Object.assign(i,TE(e,t)),i}function vE(e,t){const n={},i=IE(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=i,n}const _E={offset:"stroke-dashoffset",array:"stroke-dasharray"},CE={offset:"strokeDashoffset",array:"strokeDasharray"};function SE(e,t,n=1,i=0,o=!0){e.pathLength=1;const s=o?_E:CE;e[s.offset]=z.transform(-i);const r=z.transform(t),a=z.transform(n);e[s.array]=`${r} ${a}`}function Kf(e,{attrX:t,attrY:n,attrScale:i,pathLength:o,pathSpacing:s=1,pathOffset:r=0,...a},c,l,d){if(Br(e,a,l),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:p}=e;h.transform&&(p.transform=h.transform,delete h.transform),(p.transform||h.transformOrigin)&&(p.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),p.transform&&(p.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete h.transformBox),t!==void 0&&(h.x=t),n!==void 0&&(h.y=n),i!==void 0&&(h.scale=i),o!==void 0&&SE(h,o,s,r,!1)}const Xf=()=>({...Hr(),attrs:{}}),Zf=e=>typeof e=="string"&&e.toLowerCase()==="svg";function AE(e,t,n,i){const o=q.useMemo(()=>{const s=Xf();return Kf(s,t,Zf(i),e.transformTemplate,e.style),{...s.attrs,style:{...s.style}}},[t]);if(e.style){const s={};Jf(s,e.style,e),o.style={...s,...o.style}}return o}const RE=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function qr(e){return typeof e!="string"||e.includes("-")?!1:!!(RE.indexOf(e)>-1||/[A-Z]/u.test(e))}function wE(e,t,n,{latestValues:i},o,s=!1){const a=(qr(e)?AE:vE)(t,i,o,e),c=fE(t,typeof e=="string",s),l=e!==q.Fragment?{...c,...a,ref:n}:{},{children:d}=t,h=q.useMemo(()=>me(d)?d.get():d,[d]);return q.createElement(e,{...l,children:h})}function Za(e){const t=[{},{}];return e==null||e.values.forEach((n,i)=>{t[0][i]=n.get(),t[1][i]=n.getVelocity()}),t}function Wr(e,t,n,i){if(typeof t=="function"){const[o,s]=Za(i);t=t(n!==void 0?n:e.custom,o,s)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[o,s]=Za(i);t=t(n!==void 0?n:e.custom,o,s)}return t}function Bi(e){return me(e)?e.get():e}function ME({scrapeMotionValuesFromProps:e,createRenderState:t},n,i,o){return{latestValues:PE(n,i,o,e),renderState:t()}}function PE(e,t,n,i){const o={},s=i(e,{});for(const p in s)o[p]=Bi(s[p]);let{initial:r,animate:a}=e;const c=So(e),l=Yf(e);t&&l&&!c&&e.inherit!==!1&&(r===void 0&&(r=t.initial),a===void 0&&(a=t.animate));let d=n?n.initial===!1:!1;d=d||r===!1;const h=d?a:r;if(h&&typeof h!="boolean"&&!Co(h)){const p=Array.isArray(h)?h:[h];for(let m=0;m<p.length;m++){const g=Wr(e,p[m]);if(g){const{transitionEnd:y,transition:E,...v}=g;for(const T in v){let I=v[T];if(Array.isArray(I)){const S=d?I.length-1:0;I=I[S]}I!==null&&(o[T]=I)}for(const T in y)o[T]=y[T]}}}return o}const Qf=e=>(t,n)=>{const i=q.useContext(_o),o=q.useContext(Eo),s=()=>ME(e,t,i,o);return n?s():Cn(s)};function $r(e,t,n){var s;const{style:i}=e,o={};for(const r in i)(me(i[r])||t.style&&me(t.style[r])||zf(r,e)||((s=n==null?void 0:n.getValue(r))==null?void 0:s.liveStyle)!==void 0)&&(o[r]=i[r]);return o}const DE=Qf({scrapeMotionValuesFromProps:$r,createRenderState:Hr});function jf(e,t,n){const i=$r(e,t,n);for(const o in e)if(me(e[o])||me(t[o])){const s=An.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;i[s]=e[o]}return i}const bE=Qf({scrapeMotionValuesFromProps:jf,createRenderState:Xf}),xE=Symbol.for("motionComponentSymbol");function en(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function NE(e,t,n){return q.useCallback(i=>{i&&e.onMount&&e.onMount(i),t&&(i?t.mount(i):t.unmount()),n&&(typeof n=="function"?n(i):en(n)&&(n.current=i))},[t])}const Yr=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),LE="framerAppearId",eh="data-"+Yr(LE),th=q.createContext({});function OE(e,t,n,i,o){var y,E;const{visualElement:s}=q.useContext(_o),r=q.useContext(Wf),a=q.useContext(Eo),c=q.useContext(hi).reducedMotion,l=q.useRef(null);i=i||r.renderer,!l.current&&i&&(l.current=i(e,{visualState:t,parent:s,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:c}));const d=l.current,h=q.useContext(th);d&&!d.projection&&o&&(d.type==="html"||d.type==="svg")&&FE(l.current,n,o,h);const p=q.useRef(!1);q.useInsertionEffect(()=>{d&&p.current&&d.update(n,a)});const m=n[eh],g=q.useRef(!!m&&!((y=window.MotionHandoffIsComplete)!=null&&y.call(window,m))&&((E=window.MotionHasOptimisedAnimation)==null?void 0:E.call(window,m)));return yo(()=>{d&&(p.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),g.current&&d.animationState&&d.animationState.animateChanges())}),q.useEffect(()=>{d&&(!g.current&&d.animationState&&d.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)==null||v.call(window,m)}),g.current=!1),d.enteringChildren=void 0)}),d}function FE(e,t,n,i){const{layoutId:o,layout:s,drag:r,dragConstraints:a,layoutScroll:c,layoutRoot:l,layoutCrossfade:d}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:nh(e.parent)),e.projection.setOptions({layoutId:o,layout:s,alwaysMeasureLayout:!!r||a&&en(a),visualElement:e,animationType:typeof s=="string"?s:"both",initialPromotionConfig:i,crossfade:d,layoutScroll:c,layoutRoot:l})}function nh(e){if(e)return e.options.allowProjection!==!1?e.projection:nh(e.parent)}function Xo(e,{forwardMotionProps:t=!1}={},n,i){n&&cE(n);const o=qr(e)?bE:DE;function s(a,c){let l;const d={...q.useContext(hi),...a,layoutId:kE(a)},{isStatic:h}=d,p=pE(a),m=o(a,h);if(!h&&mr){VE();const g=UE(d);l=g.MeasureLayout,p.visualElement=OE(e,m,d,i,g.ProjectionNode)}return ht.jsxs(_o.Provider,{value:p,children:[l&&p.visualElement?ht.jsx(l,{visualElement:p.visualElement,...d}):null,wE(e,a,NE(m,p.visualElement,c),m,h,t)]})}s.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const r=q.forwardRef(s);return r[xE]=e,r}function kE({layoutId:e}){const t=q.useContext(pr).id;return t&&e!==void 0?t+"-"+e:e}function VE(e,t){q.useContext(Wf).strict}function UE(e){const{drag:t,layout:n}=En;if(!t&&!n)return{};const i={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function GE(e,t){if(typeof Proxy>"u")return Xo;const n=new Map,i=(s,r)=>Xo(s,r,e,t),o=(s,r)=>i(s,r);return new Proxy(o,{get:(s,r)=>r==="create"?i:(n.has(r)||n.set(r,Xo(r,void 0,e,t)),n.get(r))})}function ih({top:e,left:t,right:n,bottom:i}){return{x:{min:t,max:n},y:{min:e,max:i}}}function BE({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function HE(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),i=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function Zo(e){return e===void 0||e===1}function Ls({scale:e,scaleX:t,scaleY:n}){return!Zo(e)||!Zo(t)||!Zo(n)}function bt(e){return Ls(e)||oh(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function oh(e){return Qa(e.x)||Qa(e.y)}function Qa(e){return e&&e!=="0%"}function Qi(e,t,n){const i=e-n,o=t*i;return n+o}function ja(e,t,n,i,o){return o!==void 0&&(e=Qi(e,o,i)),Qi(e,n,i)+t}function Os(e,t=0,n=1,i,o){e.min=ja(e.min,t,n,i,o),e.max=ja(e.max,t,n,i,o)}function sh(e,{x:t,y:n}){Os(e.x,t.translate,t.scale,t.originPoint),Os(e.y,n.translate,n.scale,n.originPoint)}const el=.999999999999,tl=1.0000000000001;function qE(e,t,n,i=!1){const o=n.length;if(!o)return;t.x=t.y=1;let s,r;for(let a=0;a<o;a++){s=n[a],r=s.projectionDelta;const{visualElement:c}=s.options;c&&c.props.style&&c.props.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&nn(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),r&&(t.x*=r.x.scale,t.y*=r.y.scale,sh(e,r)),i&&bt(s.latestValues)&&nn(e,s.latestValues))}t.x<tl&&t.x>el&&(t.x=1),t.y<tl&&t.y>el&&(t.y=1)}function tn(e,t){e.min=e.min+t,e.max=e.max+t}function nl(e,t,n,i,o=.5){const s=ae(e.min,e.max,o);Os(e,t,n,s,i)}function nn(e,t){nl(e.x,t.x,t.scaleX,t.scale,t.originX),nl(e.y,t.y,t.scaleY,t.scale,t.originY)}function rh(e,t){return ih(HE(e.getBoundingClientRect(),t))}function WE(e,t,n){const i=rh(e,n),{scroll:o}=t;return o&&(tn(i.x,o.offset.x),tn(i.y,o.offset.y)),i}const il=()=>({translate:0,scale:1,origin:0,originPoint:0}),on=()=>({x:il(),y:il()}),ol=()=>({min:0,max:0}),he=()=>({x:ol(),y:ol()}),Fs={current:null},ah={current:!1};function $E(){if(ah.current=!0,!!mr)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Fs.current=e.matches;e.addEventListener("change",t),t()}else Fs.current=!1}const oi=new WeakMap;function YE(e,t,n){for(const i in t){const o=t[i],s=n[i];if(me(o))e.addValue(i,o);else if(me(s))e.addValue(i,tt(o,{owner:e}));else if(s!==o)if(e.hasValue(i)){const r=e.getValue(i);r.liveStyle===!0?r.jump(o):r.hasAnimated||r.set(o)}else{const r=e.getStaticValue(i);e.addValue(i,tt(r!==void 0?r:o,{owner:e}))}}for(const i in n)t[i]===void 0&&e.removeValue(i);return t}const sl=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class lh{scrapeMotionValuesFromProps(t,n,i){return{}}constructor({parent:t,props:n,presenceContext:i,reducedMotionConfig:o,blockInitialAnimation:s,visualState:r},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=br,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=Ve.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,se.render(this.render,!1,!0))};const{latestValues:c,renderState:l}=r;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=l,this.parent=t,this.props=n,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=o,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=So(n),this.isVariantNode=Yf(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in h){const m=h[p];c[p]!==void 0&&me(m)&&m.set(c[p])}}mount(t){var n;this.current=t,oi.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((i,o)=>this.bindToMotionValue(o,i)),ah.current||$E(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Fs.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),rt(this.notifyUpdate),rt(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const i=this.features[n];i&&(i.unmount(),i.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const i=Rn.has(t);i&&this.onBindTransform&&this.onBindTransform();const o=n.on("change",r=>{this.latestValues[t]=r,this.props.onUpdate&&se.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{o(),s&&s(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in En){const n=En[t];if(!n)continue;const{isEnabled:i,Feature:o}=n;if(!this.features[t]&&o&&i(this.props)&&(this.features[t]=new o(this)),this.features[t]){const s=this.features[t];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):he()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<sl.length;i++){const o=sl[i];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const s="on"+o,r=t[s];r&&(this.propEventSubscriptions[o]=this.on(o,r))}this.prevMotionValues=YE(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const i=this.values.get(t);n!==i&&(i&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let i=this.values.get(t);return i===void 0&&n!==void 0&&(i=tt(n===null?void 0:n,{owner:this}),this.addValue(t,i)),i}readValue(t,n){let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(zd(i)||Kd(i))?i=parseFloat(i):!nE(i)&&wt.test(n)&&(i=Of(t,n)),this.setBaseTarget(t,me(i)?i.get():i)),me(i)?i.get():i}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var s;const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const r=Wr(this.props,n,(s=this.presenceContext)==null?void 0:s.custom);r&&(i=r[t])}if(n&&i!==void 0)return i;const o=this.getBaseTargetFromProps(this.props,t);return o!==void 0&&!me(o)?o:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Er),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){kr.render(this.render)}}class ch extends lh{constructor(){super(...arguments),this.KeyframeResolver=Oy}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:i}){delete n[t],delete i[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;me(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function uh(e,{style:t,vars:n},i,o){const s=e.style;let r;for(r in t)s[r]=t[r];o==null||o.applyProjectionStyles(s,i);for(r in n)s.setProperty(r,n[r])}function zE(e){return window.getComputedStyle(e)}class dh extends ch{constructor(){super(...arguments),this.type="html",this.renderInstance=uh}readValueFromInstance(t,n){var i;if(Rn.has(n))return(i=this.projection)!=null&&i.isProjecting?Rs(n):jg(t,n);{const o=zE(t),s=(df(n)?o.getPropertyValue(n):o[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:n}){return rh(t,n)}build(t,n,i){Br(t,n,i.transformTemplate)}scrapeMotionValuesFromProps(t,n,i){return $r(t,n,i)}}const fh=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function JE(e,t,n,i){uh(e,t,void 0,i);for(const o in t.attrs)e.setAttribute(fh.has(o)?o:Yr(o),t.attrs[o])}class hh extends ch{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=he}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Rn.has(n)){const i=Lf(n);return i&&i.default||0}return n=fh.has(n)?n:Yr(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,i){return jf(t,n,i)}build(t,n,i){Kf(t,n,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(t,n,i,o){JE(t,n,i,o)}mount(t){this.isSVGTag=Zf(t.tagName),super.mount(t)}}const KE=(e,t)=>qr(e)?new hh(t):new dh(t,{allowProjection:e!==q.Fragment});function pn(e,t,n){const i=e.getProps();return Wr(i,t,n!==void 0?n:i.custom,e)}const ks=e=>Array.isArray(e);function XE(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,tt(n))}function ZE(e){return ks(e)?e[e.length-1]||0:e}function QE(e,t){const n=pn(e,t);let{transitionEnd:i={},transition:o={},...s}=n||{};s={...s,...i};for(const r in s){const a=ZE(s[r]);XE(e,r,a)}}function jE(e){return!!(me(e)&&e.add)}function Vs(e,t){const n=e.getValue("willChange");if(jE(n))return n.add(t);if(!n&&pt.WillChange){const i=new pt.WillChange("auto");e.addValue("willChange",i),i.add(t)}}function ph(e){return e.props[eh]}const eT=e=>e!==null;function tT(e,{repeat:t,repeatType:n="loop"},i){const o=e.filter(eT),s=t&&n!=="loop"&&t%2===1?0:o.length-1;return o[s]}const nT={type:"spring",stiffness:500,damping:25,restSpeed:10},iT=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),oT={type:"keyframes",duration:.8},sT={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},rT=(e,{keyframes:t})=>t.length>2?oT:Rn.has(e)?e.startsWith("scale")?iT(t[1]):nT:sT;function aT({when:e,delay:t,delayChildren:n,staggerChildren:i,staggerDirection:o,repeat:s,repeatType:r,repeatDelay:a,from:c,elapsed:l,...d}){return!!Object.keys(d).length}const zr=(e,t,n,i={},o,s)=>r=>{const a=Nr(i,e)||{},c=a.delay||i.delay||0;let{elapsed:l=0}=i;l=l-it(c);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-l,onUpdate:p=>{t.set(p),a.onUpdate&&a.onUpdate(p)},onComplete:()=>{r(),a.onComplete&&a.onComplete()},name:e,motionValue:t,element:s?void 0:o};aT(a)||Object.assign(d,rT(e,d)),d.duration&&(d.duration=it(d.duration)),d.repeatDelay&&(d.repeatDelay=it(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(bs(d),d.delay===0&&(h=!0)),(pt.instantAnimations||pt.skipAnimations)&&(h=!0,bs(d),d.delay=0),d.allowFlatten=!a.type&&!a.ease,h&&!s&&t.get()!==void 0){const p=tT(d.keyframes,a);if(p!==void 0){se.update(()=>{d.onUpdate(p),d.onComplete()});return}}return a.isSync?new Io(d):new vy(d)};function lT({protectedKeys:e,needsAnimating:t},n){const i=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,i}function Jr(e,t,{delay:n=0,transitionOverride:i,type:o}={}){let{transition:s=e.getDefaultTransition(),transitionEnd:r,...a}=t;i&&(s=i);const c=[],l=o&&e.animationState&&e.animationState.getState()[o];for(const d in a){const h=e.getValue(d,e.latestValues[d]??null),p=a[d];if(p===void 0||l&&lT(l,d))continue;const m={delay:n,...Nr(s||{},d)},g=h.get();if(g!==void 0&&!h.isAnimating&&!Array.isArray(p)&&p===g&&!m.velocity)continue;let y=!1;if(window.MotionHandoffAnimation){const v=ph(e);if(v){const T=window.MotionHandoffAnimation(v,d,se);T!==null&&(m.startTime=T,y=!0)}}Vs(e,d),h.start(zr(d,h,p,e.shouldReduceMotion&&bf.has(d)?{type:!1}:m,e,y));const E=h.animation;E&&c.push(E)}return r&&Promise.all(c).then(()=>{se.update(()=>{r&&QE(e,r)})}),c}function mh(e,t,n,i=0,o=1){const s=Array.from(e).sort((l,d)=>l.sortNodePosition(d)).indexOf(t),r=e.size,a=(r-1)*i;return typeof n=="function"?n(s,r):o===1?s*i:a-s*i}function Us(e,t,n={}){var c;const i=pn(e,t,n.type==="exit"?(c=e.presenceContext)==null?void 0:c.custom:void 0);let{transition:o=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(o=n.transitionOverride);const s=i?()=>Promise.all(Jr(e,i,n)):()=>Promise.resolve(),r=e.variantChildren&&e.variantChildren.size?(l=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:p}=o;return cT(e,t,l,d,h,p,n)}:()=>Promise.resolve(),{when:a}=o;if(a){const[l,d]=a==="beforeChildren"?[s,r]:[r,s];return l().then(()=>d())}else return Promise.all([s(),r(n.delay)])}function cT(e,t,n=0,i=0,o=0,s=1,r){const a=[];for(const c of e.variantChildren)c.notify("AnimationStart",t),a.push(Us(c,t,{...r,delay:n+(typeof i=="function"?0:i)+mh(e.variantChildren,c,i,o,s)}).then(()=>c.notify("AnimationComplete",t)));return Promise.all(a)}function uT(e,t,n={}){e.notify("AnimationStart",t);let i;if(Array.isArray(t)){const o=t.map(s=>Us(e,s,n));i=Promise.all(o)}else if(typeof t=="string")i=Us(e,t,n);else{const o=typeof t=="function"?pn(e,t,n.custom):t;i=Promise.all(Jr(e,o,n))}return i.then(()=>{e.notify("AnimationComplete",t)})}function gh(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}const dT=Gr.length;function yh(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?yh(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<dT;n++){const i=Gr[n],o=e.props[i];(ii(o)||o===!1)&&(t[i]=o)}return t}const fT=[...Ur].reverse(),hT=Ur.length;function pT(e){return t=>Promise.all(t.map(({animation:n,options:i})=>uT(e,n,i)))}function mT(e){let t=pT(e),n=rl(),i=!0;const o=c=>(l,d)=>{var p;const h=pn(e,d,c==="exit"?(p=e.presenceContext)==null?void 0:p.custom:void 0);if(h){const{transition:m,transitionEnd:g,...y}=h;l={...l,...y,...g}}return l};function s(c){t=c(e)}function r(c){const{props:l}=e,d=yh(e.parent)||{},h=[],p=new Set;let m={},g=1/0;for(let E=0;E<hT;E++){const v=fT[E],T=n[v],I=l[v]!==void 0?l[v]:d[v],S=ii(I),A=v===c?T.isActive:null;A===!1&&(g=E);let P=I===d[v]&&I!==l[v]&&S;if(P&&i&&e.manuallyAnimateOnMount&&(P=!1),T.protectedKeys={...m},!T.isActive&&A===null||!I&&!T.prevProp||Co(I)||typeof I=="boolean")continue;const D=gT(T.prevProp,I);let R=D||v===c&&T.isActive&&!P&&S||E>g&&S,C=!1;const _=Array.isArray(I)?I:[I];let b=_.reduce(o(v),{});A===!1&&(b={});const{prevResolvedValues:N={}}=T,F={...N,...b},x=M=>{R=!0,p.has(M)&&(C=!0,p.delete(M)),T.needsAnimating[M]=!0;const L=e.getValue(M);L&&(L.liveStyle=!1)};for(const M in F){const L=b[M],O=N[M];if(m.hasOwnProperty(M))continue;let U=!1;ks(L)&&ks(O)?U=!gh(L,O):U=L!==O,U?L!=null?x(M):p.add(M):L!==void 0&&p.has(M)?x(M):T.protectedKeys[M]=!0}T.prevProp=I,T.prevResolvedValues=b,T.isActive&&(m={...m,...b}),i&&e.blockInitialAnimation&&(R=!1);const k=P&&D;R&&(!k||C)&&h.push(..._.map(M=>{const L={type:v};if(typeof M=="string"&&i&&!k&&e.manuallyAnimateOnMount&&e.parent){const{parent:O}=e,U=pn(O,M);if(O.enteringChildren&&U){const{delayChildren:B}=U.transition||{};L.delay=mh(O.enteringChildren,e,B)}}return{animation:M,options:L}}))}if(p.size){const E={};if(typeof l.initial!="boolean"){const v=pn(e,Array.isArray(l.initial)?l.initial[0]:l.initial);v&&v.transition&&(E.transition=v.transition)}p.forEach(v=>{const T=e.getBaseTarget(v),I=e.getValue(v);I&&(I.liveStyle=!0),E[v]=T??null}),h.push({animation:E})}let y=!!h.length;return i&&(l.initial===!1||l.initial===l.animate)&&!e.manuallyAnimateOnMount&&(y=!1),i=!1,y?t(h):Promise.resolve()}function a(c,l){var h;if(n[c].isActive===l)return Promise.resolve();(h=e.variantChildren)==null||h.forEach(p=>{var m;return(m=p.animationState)==null?void 0:m.setActive(c,l)}),n[c].isActive=l;const d=r(c);for(const p in n)n[p].protectedKeys={};return d}return{animateChanges:r,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=rl()}}}function gT(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!gh(t,e):!1}function Dt(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function rl(){return{animate:Dt(!0),whileInView:Dt(),whileHover:Dt(),whileTap:Dt(),whileDrag:Dt(),whileFocus:Dt(),exit:Dt()}}class Mt{constructor(t){this.isMounted=!1,this.node=t}update(){}}class yT extends Mt{constructor(t){super(t),t.animationState||(t.animationState=mT(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Co(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let ET=0;class TT extends Mt{constructor(){super(...arguments),this.id=ET++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const o=this.node.animationState.setActive("exit",!t);n&&!t&&o.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const IT={animation:{Feature:yT},exit:{Feature:TT}};function si(e,t,n,i={passive:!0}){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n)}function pi(e){return{point:{x:e.pageX,y:e.pageY}}}const vT=e=>t=>Vr(t)&&e(t,pi(t));function Yn(e,t,n,i){return si(e,t,vT(n),i)}const Eh=1e-4,_T=1-Eh,CT=1+Eh,Th=.01,ST=0-Th,AT=0+Th;function be(e){return e.max-e.min}function RT(e,t,n){return Math.abs(e-t)<=n}function al(e,t,n,i=.5){e.origin=i,e.originPoint=ae(t.min,t.max,e.origin),e.scale=be(n)/be(t),e.translate=ae(n.min,n.max,e.origin)-e.originPoint,(e.scale>=_T&&e.scale<=CT||isNaN(e.scale))&&(e.scale=1),(e.translate>=ST&&e.translate<=AT||isNaN(e.translate))&&(e.translate=0)}function zn(e,t,n,i){al(e.x,t.x,n.x,i?i.originX:void 0),al(e.y,t.y,n.y,i?i.originY:void 0)}function ll(e,t,n){e.min=n.min+t.min,e.max=e.min+be(t)}function wT(e,t,n){ll(e.x,t.x,n.x),ll(e.y,t.y,n.y)}function cl(e,t,n){e.min=t.min-n.min,e.max=e.min+be(t)}function ji(e,t,n){cl(e.x,t.x,n.x),cl(e.y,t.y,n.y)}function $e(e){return[e("x"),e("y")]}const Ih=({current:e})=>e?e.ownerDocument.defaultView:null,ul=(e,t)=>Math.abs(e-t);function MT(e,t){const n=ul(e.x,t.x),i=ul(e.y,t.y);return Math.sqrt(n**2+i**2)}class vh{constructor(t,n,{transformPagePoint:i,contextWindow:o=window,dragSnapToOrigin:s=!1,distanceThreshold:r=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=jo(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,g=MT(p.offset,{x:0,y:0})>=this.distanceThreshold;if(!m&&!g)return;const{point:y}=p,{timestamp:E}=Ie;this.history.push({...y,timestamp:E});const{onStart:v,onMove:T}=this.handlers;m||(v&&v(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),T&&T(this.lastMoveEvent,p)},this.handlePointerMove=(p,m)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=Qo(m,this.transformPagePoint),se.update(this.updatePoint,!0)},this.handlePointerUp=(p,m)=>{this.end();const{onEnd:g,onSessionEnd:y,resumeAnimation:E}=this.handlers;if(this.dragSnapToOrigin&&E&&E(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=jo(p.type==="pointercancel"?this.lastMoveEventInfo:Qo(m,this.transformPagePoint),this.history);this.startEvent&&g&&g(p,v),y&&y(p,v)},!Vr(t))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=i,this.distanceThreshold=r,this.contextWindow=o||window;const a=pi(t),c=Qo(a,this.transformPagePoint),{point:l}=c,{timestamp:d}=Ie;this.history=[{...l,timestamp:d}];const{onSessionStart:h}=n;h&&h(t,jo(c,this.history)),this.removeListeners=ui(Yn(this.contextWindow,"pointermove",this.handlePointerMove),Yn(this.contextWindow,"pointerup",this.handlePointerUp),Yn(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),rt(this.updatePoint)}}function Qo(e,t){return t?{point:t(e.point)}:e}function dl(e,t){return{x:e.x-t.x,y:e.y-t.y}}function jo({point:e},t){return{point:e,delta:dl(e,_h(t)),offset:dl(e,PT(t)),velocity:DT(t,.1)}}function PT(e){return e[0]}function _h(e){return e[e.length-1]}function DT(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,i=null;const o=_h(e);for(;n>=0&&(i=e[n],!(o.timestamp-i.timestamp>it(t)));)n--;if(!i)return{x:0,y:0};const s=Ye(o.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const r={x:(o.x-i.x)/s,y:(o.y-i.y)/s};return r.x===1/0&&(r.x=0),r.y===1/0&&(r.y=0),r}function bT(e,{min:t,max:n},i){return t!==void 0&&e<t?e=i?ae(t,e,i.min):Math.max(e,t):n!==void 0&&e>n&&(e=i?ae(n,e,i.max):Math.min(e,n)),e}function fl(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function xT(e,{top:t,left:n,bottom:i,right:o}){return{x:fl(e.x,n,o),y:fl(e.y,t,i)}}function hl(e,t){let n=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,i]=[i,n]),{min:n,max:i}}function NT(e,t){return{x:hl(e.x,t.x),y:hl(e.y,t.y)}}function LT(e,t){let n=.5;const i=be(e),o=be(t);return o>i?n=Wt(t.min,t.max-i,e.min):i>o&&(n=Wt(e.min,e.max-o,t.min)),ft(0,1,n)}function OT(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const Gs=.35;function FT(e=Gs){return e===!1?e=0:e===!0&&(e=Gs),{x:pl(e,"left","right"),y:pl(e,"top","bottom")}}function pl(e,t,n){return{min:ml(e,t),max:ml(e,n)}}function ml(e,t){return typeof e=="number"?e:e[t]||0}const kT=new WeakMap;class VT{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=he(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:i}={}){const{presenceContext:o}=this.visualElement;if(o&&o.isPresent===!1)return;const s=h=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(pi(h).point)},r=(h,p)=>{const{drag:m,dragPropagation:g,onDragStart:y}=this.getProps();if(m&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Vy(m),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=p,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),$e(v=>{let T=this.getAxisMotionValue(v).get()||0;if(dt.test(T)){const{projection:I}=this.visualElement;if(I&&I.layout){const S=I.layout.layoutBox[v];S&&(T=be(S)*(parseFloat(T)/100))}}this.originPoint[v]=T}),y&&se.postRender(()=>y(h,p)),Vs(this.visualElement,"transform");const{animationState:E}=this.visualElement;E&&E.setActive("whileDrag",!0)},a=(h,p)=>{this.latestPointerEvent=h,this.latestPanInfo=p;const{dragPropagation:m,dragDirectionLock:g,onDirectionLock:y,onDrag:E}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:v}=p;if(g&&this.currentDirection===null){this.currentDirection=UT(v),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",p.point,v),this.updateAxis("y",p.point,v),this.visualElement.render(),E&&E(h,p)},c=(h,p)=>{this.latestPointerEvent=h,this.latestPanInfo=p,this.stop(h,p),this.latestPointerEvent=null,this.latestPanInfo=null},l=()=>$e(h=>{var p;return this.getAnimationState(h)==="paused"&&((p=this.getAxisMotionValue(h).animation)==null?void 0:p.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new vh(t,{onSessionStart:s,onStart:r,onMove:a,onSessionEnd:c,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:i,contextWindow:Ih(this.visualElement)})}stop(t,n){const i=t||this.latestPointerEvent,o=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!o||!i)return;const{velocity:r}=o;this.startAnimation(r);const{onDragEnd:a}=this.getProps();a&&se.postRender(()=>a(i,o))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,i){const{drag:o}=this.getProps();if(!i||!Ii(t,o,this.currentDirection))return;const s=this.getAxisMotionValue(t);let r=this.originPoint[t]+i[t];this.constraints&&this.constraints[t]&&(r=bT(r,this.constraints[t],this.elastic[t])),s.set(r)}resolveConstraints(){var s;const{dragConstraints:t,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,o=this.constraints;t&&en(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=xT(i.layoutBox,t):this.constraints=!1,this.elastic=FT(n),o!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&$e(r=>{this.constraints!==!1&&this.getAxisMotionValue(r)&&(this.constraints[r]=OT(i.layoutBox[r],this.constraints[r]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!en(t))return!1;const i=t.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const s=WE(i,o.root,this.visualElement.getTransformPagePoint());let r=NT(o.layout.layoutBox,s);if(n){const a=n(BE(r));this.hasMutatedConstraints=!!a,a&&(r=ih(a))}return r}startAnimation(t){const{drag:n,dragMomentum:i,dragElastic:o,dragTransition:s,dragSnapToOrigin:r,onDragTransitionEnd:a}=this.getProps(),c=this.constraints||{},l=$e(d=>{if(!Ii(d,n,this.currentDirection))return;let h=c&&c[d]||{};r&&(h={min:0,max:0});const p=o?200:1e6,m=o?40:1e7,g={type:"inertia",velocity:i?t[d]:0,bounceStiffness:p,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...h};return this.startAxisValueAnimation(d,g)});return Promise.all(l).then(a)}startAxisValueAnimation(t,n){const i=this.getAxisMotionValue(t);return Vs(this.visualElement,t),i.start(zr(t,i,0,n,this.visualElement,!1))}stopAnimation(){$e(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){$e(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,i=this.visualElement.getProps(),o=i[n];return o||this.visualElement.getValue(t,(i.initial?i.initial[t]:void 0)||0)}snapToCursor(t){$e(n=>{const{drag:i}=this.getProps();if(!Ii(n,i,this.currentDirection))return;const{projection:o}=this.visualElement,s=this.getAxisMotionValue(n);if(o&&o.layout){const{min:r,max:a}=o.layout.layoutBox[n];s.set(t[n]-ae(r,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!en(n)||!i||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};$e(r=>{const a=this.getAxisMotionValue(r);if(a&&this.constraints!==!1){const c=a.get();o[r]=LT({min:c,max:c},this.constraints[r])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),$e(r=>{if(!Ii(r,t,null))return;const a=this.getAxisMotionValue(r),{min:c,max:l}=this.constraints[r];a.set(ae(c,l,o[r]))})}addListeners(){if(!this.visualElement.current)return;kT.set(this.visualElement,this);const t=this.visualElement.current,n=Yn(t,"pointerdown",c=>{const{drag:l,dragListener:d=!0}=this.getProps();l&&d&&this.start(c)}),i=()=>{const{dragConstraints:c}=this.getProps();en(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,s=o.addEventListener("measure",i);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),se.read(i);const r=si(window,"resize",()=>this.scalePositionWithinConstraints()),a=o.addEventListener("didUpdate",(({delta:c,hasLayoutChanged:l})=>{this.isDragging&&l&&($e(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=c[d].translate,h.set(h.get()+c[d].translate))}),this.visualElement.render())}));return()=>{r(),n(),s(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:o=!1,dragConstraints:s=!1,dragElastic:r=Gs,dragMomentum:a=!0}=t;return{...t,drag:n,dragDirectionLock:i,dragPropagation:o,dragConstraints:s,dragElastic:r,dragMomentum:a}}}function Ii(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function UT(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class GT extends Mt{constructor(t){super(t),this.removeGroupControls=Ue,this.removeListeners=Ue,this.controls=new VT(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ue}unmount(){this.removeGroupControls(),this.removeListeners()}}const gl=e=>(t,n)=>{e&&se.postRender(()=>e(t,n))};class BT extends Mt{constructor(){super(...arguments),this.removePointerDownListener=Ue}onPointerDown(t){this.session=new vh(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Ih(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:i,onPanEnd:o}=this.node.getProps();return{onSessionStart:gl(t),onStart:gl(n),onMove:i,onEnd:(s,r)=>{delete this.session,o&&se.postRender(()=>o(s,r))}}}mount(){this.removePointerDownListener=Yn(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Hi={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let es=!1;class HT extends q.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:i,layoutId:o}=this.props,{projection:s}=t;s&&(n.group&&n.group.add(s),i&&i.register&&o&&i.register(s),es&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Hi.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:i,drag:o,isPresent:s}=this.props,{projection:r}=i;return r&&(r.isPresent=s,es=!0,o||t.layoutDependency!==n||n===void 0||t.isPresent!==s?r.willUpdate():this.safeToRemove(),t.isPresent!==s&&(s?r.promote():r.relegate()||se.postRender(()=>{const a=r.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),kr.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:o}=t;es=!0,o&&(o.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(o),i&&i.deregister&&i.deregister(o))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Ch(e){const[t,n]=qf(),i=q.useContext(pr);return ht.jsx(HT,{...e,layoutGroup:i,switchLayoutGroup:q.useContext(th),isPresent:t,safeToRemove:n})}function Sh(e,t,n){const i=me(e)?e:tt(e);return i.start(zr("",i,t,n)),i.animation}const qT=(e,t)=>e.depth-t.depth;class WT{constructor(){this.children=[],this.isDirty=!1}add(t){gr(this.children,t),this.isDirty=!0}remove(t){To(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(qT),this.isDirty=!1,this.children.forEach(t)}}function $T(e,t){const n=Ve.now(),i=({timestamp:o})=>{const s=o-n;s>=t&&(rt(i),e(s-t))};return se.setup(i,!0),()=>rt(i)}const Ah=["TopLeft","TopRight","BottomLeft","BottomRight"],YT=Ah.length,yl=e=>typeof e=="string"?parseFloat(e):e,El=e=>typeof e=="number"||z.test(e);function zT(e,t,n,i,o,s){o?(e.opacity=ae(0,n.opacity??1,JT(i)),e.opacityExit=ae(t.opacity??1,0,KT(i))):s&&(e.opacity=ae(t.opacity??1,n.opacity??1,i));for(let r=0;r<YT;r++){const a=`border${Ah[r]}Radius`;let c=Tl(t,a),l=Tl(n,a);if(c===void 0&&l===void 0)continue;c||(c=0),l||(l=0),c===0||l===0||El(c)===El(l)?(e[a]=Math.max(ae(yl(c),yl(l),i),0),(dt.test(l)||dt.test(c))&&(e[a]+="%")):e[a]=l}(t.rotate||n.rotate)&&(e.rotate=ae(t.rotate||0,n.rotate||0,i))}function Tl(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const JT=Rh(0,.5,nf),KT=Rh(.5,.95,Ue);function Rh(e,t,n){return i=>i<e?0:i>t?1:n(Wt(e,t,i))}function Il(e,t){e.min=t.min,e.max=t.max}function Xe(e,t){Il(e.x,t.x),Il(e.y,t.y)}function vl(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function _l(e,t,n,i,o){return e-=t,e=Qi(e,1/n,i),o!==void 0&&(e=Qi(e,1/o,i)),e}function XT(e,t=0,n=1,i=.5,o,s=e,r=e){if(dt.test(t)&&(t=parseFloat(t),t=ae(r.min,r.max,t/100)-r.min),typeof t!="number")return;let a=ae(s.min,s.max,i);e===s&&(a-=t),e.min=_l(e.min,t,n,a,o),e.max=_l(e.max,t,n,a,o)}function Cl(e,t,[n,i,o],s,r){XT(e,t[n],t[i],t[o],t.scale,s,r)}const ZT=["x","scaleX","originX"],QT=["y","scaleY","originY"];function Sl(e,t,n,i){Cl(e.x,t,ZT,n?n.x:void 0,i?i.x:void 0),Cl(e.y,t,QT,n?n.y:void 0,i?i.y:void 0)}function Al(e){return e.translate===0&&e.scale===1}function wh(e){return Al(e.x)&&Al(e.y)}function Rl(e,t){return e.min===t.min&&e.max===t.max}function jT(e,t){return Rl(e.x,t.x)&&Rl(e.y,t.y)}function wl(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Mh(e,t){return wl(e.x,t.x)&&wl(e.y,t.y)}function Ml(e){return be(e.x)/be(e.y)}function Pl(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class eI{constructor(){this.members=[]}add(t){gr(this.members,t),t.scheduleRender()}remove(t){if(To(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(o=>t===o);if(n===0)return!1;let i;for(let o=n;o>=0;o--){const s=this.members[o];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(t,n){const i=this.lead;if(t!==i&&(this.prevLead=i,this.lead=t,t.show(),i)){i.instance&&i.scheduleRender(),t.scheduleRender(),t.resumeFrom=i,n&&(t.resumeFrom.preserveOpacity=!0),i.snapshot&&(t.snapshot=i.snapshot,t.snapshot.latestValues=i.animationValues||i.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:o}=t.options;o===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:i}=t;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function tI(e,t,n){let i="";const o=e.x.translate/t.x,s=e.y.translate/t.y,r=(n==null?void 0:n.z)||0;if((o||s||r)&&(i=`translate3d(${o}px, ${s}px, ${r}px) `),(t.x!==1||t.y!==1)&&(i+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:l,rotate:d,rotateX:h,rotateY:p,skewX:m,skewY:g}=n;l&&(i=`perspective(${l}px) ${i}`),d&&(i+=`rotate(${d}deg) `),h&&(i+=`rotateX(${h}deg) `),p&&(i+=`rotateY(${p}deg) `),m&&(i+=`skewX(${m}deg) `),g&&(i+=`skewY(${g}deg) `)}const a=e.x.scale*t.x,c=e.y.scale*t.y;return(a!==1||c!==1)&&(i+=`scale(${a}, ${c})`),i||"none"}const ts=["","X","Y","Z"],nI=1e3;let iI=0;function ns(e,t,n,i){const{latestValues:o}=t;o[e]&&(n[e]=o[e],t.setStaticValue(e,0),i&&(i[e]=0))}function Ph(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=ph(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:o,layoutId:s}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",se,!(o||s))}const{parent:i}=e;i&&!i.hasCheckedOptimisedAppear&&Ph(i)}function Dh({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:i,resetTransform:o}){return class{constructor(r={},a=t==null?void 0:t()){this.id=iI++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(rI),this.nodes.forEach(uI),this.nodes.forEach(dI),this.nodes.forEach(aI)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=r,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new WT)}addEventListener(r,a){return this.eventHandlers.has(r)||this.eventHandlers.set(r,new Er),this.eventHandlers.get(r).add(a)}notifyListeners(r,...a){const c=this.eventHandlers.get(r);c&&c.notify(...a)}hasListeners(r){return this.eventHandlers.has(r)}mount(r){if(this.instance)return;this.isSVG=vo(r)&&!Hf(r),this.instance=r;const{layoutId:a,layout:c,visualElement:l}=this.options;if(l&&!l.current&&l.mount(r),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||a)&&(this.isLayoutDirty=!0),e){let d,h=0;const p=()=>this.root.updateBlockedByResize=!1;se.read(()=>{h=window.innerWidth}),e(r,()=>{const m=window.innerWidth;m!==h&&(h=m,this.root.updateBlockedByResize=!0,d&&d(),d=$T(p,250),Hi.hasAnimatedSinceResize&&(Hi.hasAnimatedSinceResize=!1,this.nodes.forEach(xl)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&l&&(a||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:p,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||l.getDefaultTransition()||gI,{onLayoutAnimationStart:y,onLayoutAnimationComplete:E}=l.getProps(),v=!this.targetLayout||!Mh(this.targetLayout,m),T=!h&&p;if(this.options.layoutRoot||this.resumeFrom||T||h&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const I={...Nr(g,"layout"),onPlay:y,onComplete:E};(l.shouldReduceMotion||this.options.layoutRoot)&&(I.delay=0,I.type=!1),this.startAnimation(I),this.setAnimationOrigin(d,T)}else h||xl(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const r=this.getStack();r&&r.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),rt(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(fI),this.animationId++)}getTransformTemplate(){const{visualElement:r}=this.options;return r&&r.getProps().transformTemplate}willUpdate(r=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Ph(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:c}=this.options;if(a===void 0&&!c)return;const l=this.getTransformTemplate();this.prevTransformTemplateValue=l?l(this.latestValues,""):void 0,this.updateSnapshot(),r&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Dl);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(bl);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(cI),this.nodes.forEach(oI),this.nodes.forEach(sI)):this.nodes.forEach(bl),this.clearAllSnapshots();const a=Ve.now();Ie.delta=ft(0,1e3/60,a-Ie.timestamp),Ie.timestamp=a,Ie.isProcessing=!0,Wo.update.process(Ie),Wo.preRender.process(Ie),Wo.render.process(Ie),Ie.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,kr.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(lI),this.sharedNodes.forEach(hI)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,se.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){se.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!be(this.snapshot.measuredBox.x)&&!be(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const r=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=he(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,r?r.layoutBox:void 0)}updateScroll(r="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===r&&(a=!1),a&&this.instance){const c=i(this.instance);this.scroll={animationId:this.root.animationId,phase:r,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!o)return;const r=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!wh(this.projectionDelta),c=this.getTransformTemplate(),l=c?c(this.latestValues,""):void 0,d=l!==this.prevTransformTemplateValue;r&&this.instance&&(a||bt(this.latestValues)||d)&&(o(this.instance,l),this.shouldResetTransform=!1,this.scheduleRender())}measure(r=!0){const a=this.measurePageBox();let c=this.removeElementScroll(a);return r&&(c=this.removeTransform(c)),yI(c),{animationId:this.root.animationId,measuredBox:a,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var l;const{visualElement:r}=this.options;if(!r)return he();const a=r.measureViewportBox();if(!(((l=this.scroll)==null?void 0:l.wasRoot)||this.path.some(EI))){const{scroll:d}=this.root;d&&(tn(a.x,d.offset.x),tn(a.y,d.offset.y))}return a}removeElementScroll(r){var c;const a=he();if(Xe(a,r),(c=this.scroll)!=null&&c.wasRoot)return a;for(let l=0;l<this.path.length;l++){const d=this.path[l],{scroll:h,options:p}=d;d!==this.root&&h&&p.layoutScroll&&(h.wasRoot&&Xe(a,r),tn(a.x,h.offset.x),tn(a.y,h.offset.y))}return a}applyTransform(r,a=!1){const c=he();Xe(c,r);for(let l=0;l<this.path.length;l++){const d=this.path[l];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&nn(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),bt(d.latestValues)&&nn(c,d.latestValues)}return bt(this.latestValues)&&nn(c,this.latestValues),c}removeTransform(r){const a=he();Xe(a,r);for(let c=0;c<this.path.length;c++){const l=this.path[c];if(!l.instance||!bt(l.latestValues))continue;Ls(l.latestValues)&&l.updateSnapshot();const d=he(),h=l.measurePageBox();Xe(d,h),Sl(a,l.latestValues,l.snapshot?l.snapshot.layoutBox:void 0,d)}return bt(this.latestValues)&&Sl(a,this.latestValues),a}setTargetDelta(r){this.targetDelta=r,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(r){this.options={...this.options,...r,crossfade:r.crossfade!==void 0?r.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ie.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(r=!1){var m;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==a;if(!(r||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!this.layout||!(d||h))return;this.resolvedRelativeTargetAt=Ie.timestamp;const p=this.getClosestProjectingParent();p&&this.linkedParentVersion!==p.layoutVersion&&!p.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(p&&p.layout?this.createRelativeTarget(p,this.layout.layoutBox,p.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=he(),this.targetWithTransforms=he()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),wT(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Xe(this.target,this.layout.layoutBox),sh(this.target,this.targetDelta)):Xe(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?this.createRelativeTarget(p,this.target,p.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Ls(this.parent.latestValues)||oh(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(r,a,c){this.relativeParent=r,this.linkedParentVersion=r.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=he(),this.relativeTargetOrigin=he(),ji(this.relativeTargetOrigin,a,c),Xe(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var g;const r=this.getLead(),a=!!this.resumingFrom||this!==r;let c=!0;if((this.isProjectionDirty||(g=this.parent)!=null&&g.isProjectionDirty)&&(c=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Ie.timestamp&&(c=!1),c)return;const{layout:l,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(l||d))return;Xe(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,p=this.treeScale.y;qE(this.layoutCorrected,this.treeScale,this.path,a),r.layout&&!r.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(r.target=r.layout.layoutBox,r.targetWithTransforms=he());const{target:m}=r;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(vl(this.prevProjectionDelta.x,this.projectionDelta.x),vl(this.prevProjectionDelta.y,this.projectionDelta.y)),zn(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==p||!Pl(this.projectionDelta.x,this.prevProjectionDelta.x)||!Pl(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(r=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),r){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=on(),this.projectionDelta=on(),this.projectionDeltaWithTransform=on()}setAnimationOrigin(r,a=!1){const c=this.snapshot,l=c?c.latestValues:{},d={...this.latestValues},h=on();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=he(),m=c?c.source:void 0,g=this.layout?this.layout.source:void 0,y=m!==g,E=this.getStack(),v=!E||E.members.length<=1,T=!!(y&&!v&&this.options.crossfade===!0&&!this.path.some(mI));this.animationProgress=0;let I;this.mixTargetDelta=S=>{const A=S/1e3;Nl(h.x,r.x,A),Nl(h.y,r.y,A),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ji(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),pI(this.relativeTarget,this.relativeTargetOrigin,p,A),I&&jT(this.relativeTarget,I)&&(this.isProjectionDirty=!1),I||(I=he()),Xe(I,this.relativeTarget)),y&&(this.animationValues=d,zT(d,l,this.latestValues,A,T,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=A},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(r){var a,c,l;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(l=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||l.stop(),this.pendingAnimation&&(rt(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=se.update(()=>{Hi.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=tt(0)),this.currentAnimation=Sh(this.motionValue,[0,1e3],{...r,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),r.onUpdate&&r.onUpdate(d)},onStop:()=>{},onComplete:()=>{r.onComplete&&r.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const r=this.getStack();r&&r.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(nI),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const r=this.getLead();let{targetWithTransforms:a,target:c,layout:l,latestValues:d}=r;if(!(!a||!c||!l)){if(this!==r&&this.layout&&l&&bh(this.options.animationType,this.layout.layoutBox,l.layoutBox)){c=this.target||he();const h=be(this.layout.layoutBox.x);c.x.min=r.target.x.min,c.x.max=c.x.min+h;const p=be(this.layout.layoutBox.y);c.y.min=r.target.y.min,c.y.max=c.y.min+p}Xe(a,c),nn(a,d),zn(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(r,a){this.sharedNodes.has(r)||this.sharedNodes.set(r,new eI),this.sharedNodes.get(r).add(a);const l=a.options.initialPromotionConfig;a.promote({transition:l?l.transition:void 0,preserveFollowOpacity:l&&l.shouldPreserveFollowOpacity?l.shouldPreserveFollowOpacity(a):void 0})}isLead(){const r=this.getStack();return r?r.lead===this:!0}getLead(){var a;const{layoutId:r}=this.options;return r?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:r}=this.options;return r?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:r}=this.options;if(r)return this.root.sharedNodes.get(r)}promote({needsReset:r,transition:a,preserveFollowOpacity:c}={}){const l=this.getStack();l&&l.promote(this,c),r&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const r=this.getStack();return r?r.relegate(this):!1}resetSkewAndRotation(){const{visualElement:r}=this.options;if(!r)return;let a=!1;const{latestValues:c}=r;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(a=!0),!a)return;const l={};c.z&&ns("z",r,l,this.animationValues);for(let d=0;d<ts.length;d++)ns(`rotate${ts[d]}`,r,l,this.animationValues),ns(`skew${ts[d]}`,r,l,this.animationValues);r.render();for(const d in l)r.setStaticValue(d,l[d]),this.animationValues&&(this.animationValues[d]=l[d]);r.scheduleRender()}applyProjectionStyles(r,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){r.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,r.visibility="",r.opacity="",r.pointerEvents=Bi(a==null?void 0:a.pointerEvents)||"",r.transform=c?c(this.latestValues,""):"none";return}const l=this.getLead();if(!this.projectionDelta||!this.layout||!l.target){this.options.layoutId&&(r.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,r.pointerEvents=Bi(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!bt(this.latestValues)&&(r.transform=c?c({},""):"none",this.hasProjected=!1);return}r.visibility="";const d=l.animationValues||l.latestValues;this.applyTransformsToTarget();let h=tI(this.projectionDeltaWithTransform,this.treeScale,d);c&&(h=c(d,h)),r.transform=h;const{x:p,y:m}=this.projectionDelta;r.transformOrigin=`${p.origin*100}% ${m.origin*100}% 0`,l.animationValues?r.opacity=l===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:r.opacity=l===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const g in Ns){if(d[g]===void 0)continue;const{correct:y,applyTo:E,isCSSVariable:v}=Ns[g],T=h==="none"?d[g]:y(d[g],l);if(E){const I=E.length;for(let S=0;S<I;S++)r[E[S]]=T}else v?this.options.visualElement.renderState.vars[g]=T:r[g]=T}this.options.layoutId&&(r.pointerEvents=l===this?Bi(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(r=>{var a;return(a=r.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(Dl),this.root.sharedNodes.clear()}}}function oI(e){e.updateLayout()}function sI(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:o}=e.layout,{animationType:s}=e.options,r=t.source!==e.layout.source;s==="size"?$e(h=>{const p=r?t.measuredBox[h]:t.layoutBox[h],m=be(p);p.min=i[h].min,p.max=p.min+m}):bh(s,t.layoutBox,i)&&$e(h=>{const p=r?t.measuredBox[h]:t.layoutBox[h],m=be(i[h]);p.max=p.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+m)});const a=on();zn(a,i,t.layoutBox);const c=on();r?zn(c,e.applyTransform(o,!0),t.measuredBox):zn(c,i,t.layoutBox);const l=!wh(a);let d=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:p,layout:m}=h;if(p&&m){const g=he();ji(g,t.layoutBox,p.layoutBox);const y=he();ji(y,i,m.layoutBox),Mh(g,y)||(d=!0),h.options.layoutRoot&&(e.relativeTarget=y,e.relativeTargetOrigin=g,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:c,layoutDelta:a,hasLayoutChanged:l,hasRelativeLayoutChanged:d})}else if(e.isLead()){const{onExitComplete:i}=e.options;i&&i()}e.options.transition=void 0}function rI(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function aI(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function lI(e){e.clearSnapshot()}function Dl(e){e.clearMeasurements()}function bl(e){e.isLayoutDirty=!1}function cI(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function xl(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function uI(e){e.resolveTargetDelta()}function dI(e){e.calcProjection()}function fI(e){e.resetSkewAndRotation()}function hI(e){e.removeLeadSnapshot()}function Nl(e,t,n){e.translate=ae(t.translate,0,n),e.scale=ae(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Ll(e,t,n,i){e.min=ae(t.min,n.min,i),e.max=ae(t.max,n.max,i)}function pI(e,t,n,i){Ll(e.x,t.x,n.x,i),Ll(e.y,t.y,n.y,i)}function mI(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const gI={duration:.45,ease:[.4,0,.1,1]},Ol=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Fl=Ol("applewebkit/")&&!Ol("chrome/")?Math.round:Ue;function kl(e){e.min=Fl(e.min),e.max=Fl(e.max)}function yI(e){kl(e.x),kl(e.y)}function bh(e,t,n){return e==="position"||e==="preserve-aspect"&&!RT(Ml(t),Ml(n),.2)}function EI(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const TI=Dh({attachResizeListener:(e,t)=>si(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),is={current:void 0},xh=Dh({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!is.current){const e=new TI({});e.mount(window),e.setOptions({layoutScroll:!0}),is.current=e}return is.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),II={pan:{Feature:BT},drag:{Feature:GT,ProjectionNode:xh,MeasureLayout:Ch}};function Vl(e,t,n){const{props:i}=e;e.animationState&&i.whileHover&&e.animationState.setActive("whileHover",n==="Start");const o="onHover"+n,s=i[o];s&&se.postRender(()=>s(t,pi(t)))}class vI extends Mt{mount(){const{current:t}=this.node;t&&(this.unmount=Uy(t,(n,i)=>(Vl(this.node,i,"Start"),o=>Vl(this.node,o,"End"))))}unmount(){}}class _I extends Mt{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ui(si(this.node.current,"focus",()=>this.onFocus()),si(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Ul(e,t,n){const{props:i}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&i.whileTap&&e.animationState.setActive("whileTap",n==="Start");const o="onTap"+(n==="End"?"":n),s=i[o];s&&se.postRender(()=>s(t,pi(t)))}class CI extends Mt{mount(){const{current:t}=this.node;t&&(this.unmount=qy(t,(n,i)=>(Ul(this.node,i,"Start"),(o,{success:s})=>Ul(this.node,o,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Bs=new WeakMap,os=new WeakMap,SI=e=>{const t=Bs.get(e.target);t&&t(e)},AI=e=>{e.forEach(SI)};function RI({root:e,...t}){const n=e||document;os.has(n)||os.set(n,{});const i=os.get(n),o=JSON.stringify(t);return i[o]||(i[o]=new IntersectionObserver(AI,{root:e,...t})),i[o]}function wI(e,t,n){const i=RI(t);return Bs.set(e,n),i.observe(e),()=>{Bs.delete(e),i.unobserve(e)}}const MI={some:0,all:1};class PI extends Mt{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:i,amount:o="some",once:s}=t,r={root:n?n.current:void 0,rootMargin:i,threshold:typeof o=="number"?o:MI[o]},a=c=>{const{isIntersecting:l}=c;if(this.isInView===l||(this.isInView=l,s&&!l&&this.hasEnteredView))return;l&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",l);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),p=l?d:h;p&&p(c)};return wI(this.node.current,r,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(DI(t,n))&&this.startObserver()}unmount(){}}function DI({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const bI={inView:{Feature:PI},tap:{Feature:CI},focus:{Feature:_I},hover:{Feature:vI}},xI={layout:{ProjectionNode:xh,MeasureLayout:Ch}},NI={...IT,...bI,...II,...xI},cO=GE(NI,KE),LI=50,Gl=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),OI=()=>({time:0,x:Gl(),y:Gl()}),FI={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function Bl(e,t,n,i){const o=n[t],{length:s,position:r}=FI[t],a=o.current,c=n.time;o.current=e[`scroll${r}`],o.scrollLength=e[`scroll${s}`]-e[`client${s}`],o.offset.length=0,o.offset[0]=0,o.offset[1]=o.scrollLength,o.progress=Wt(0,o.scrollLength,o.current);const l=i-c;o.velocity=l>LI?0:Tr(o.current-a,l)}function kI(e,t,n){Bl(e,"x",t,n),Bl(e,"y",t,n),t.time=n}function VI(e,t){const n={x:0,y:0};let i=e;for(;i&&i!==t;)if(Fr(i))n.x+=i.offsetLeft,n.y+=i.offsetTop,i=i.offsetParent;else if(i.tagName==="svg"){const o=i.getBoundingClientRect();i=i.parentElement;const s=i.getBoundingClientRect();n.x+=o.left-s.left,n.y+=o.top-s.top}else if(i instanceof SVGGraphicsElement){const{x:o,y:s}=i.getBBox();n.x+=o,n.y+=s;let r=null,a=i.parentNode;for(;!r;)a.tagName==="svg"&&(r=a),a=i.parentNode;i=r}else break;return n}const Hs={start:0,center:.5,end:1};function Hl(e,t,n=0){let i=0;if(e in Hs&&(e=Hs[e]),typeof e=="string"){const o=parseFloat(e);e.endsWith("px")?i=o:e.endsWith("%")?e=o/100:e.endsWith("vw")?i=o/100*document.documentElement.clientWidth:e.endsWith("vh")?i=o/100*document.documentElement.clientHeight:e=o}return typeof e=="number"&&(i=t*e),n+i}const UI=[0,0];function GI(e,t,n,i){let o=Array.isArray(e)?e:UI,s=0,r=0;return typeof e=="number"?o=[e,e]:typeof e=="string"&&(e=e.trim(),e.includes(" ")?o=e.split(" "):o=[e,Hs[e]?e:"0"]),s=Hl(o[0],n,i),r=Hl(o[1],t),s-r}const BI={All:[[0,0],[1,1]]},HI={x:0,y:0};function qI(e){return"getBBox"in e&&e.tagName!=="svg"?e.getBBox():{width:e.clientWidth,height:e.clientHeight}}function WI(e,t,n){const{offset:i=BI.All}=n,{target:o=e,axis:s="y"}=n,r=s==="y"?"height":"width",a=o!==e?VI(o,e):HI,c=o===e?{width:e.scrollWidth,height:e.scrollHeight}:qI(o),l={width:e.clientWidth,height:e.clientHeight};t[s].offset.length=0;let d=!t[s].interpolate;const h=i.length;for(let p=0;p<h;p++){const m=GI(i[p],l[r],c[r],a[s]);!d&&m!==t[s].interpolatorOffsets[p]&&(d=!0),t[s].offset[p]=m}d&&(t[s].interpolate=wr(t[s].offset,Mr(i),{clamp:!1}),t[s].interpolatorOffsets=[...t[s].offset]),t[s].progress=ft(0,1,t[s].interpolate(t[s].current))}function $I(e,t=e,n){if(n.x.targetOffset=0,n.y.targetOffset=0,t!==e){let i=t;for(;i&&i!==e;)n.x.targetOffset+=i.offsetLeft,n.y.targetOffset+=i.offsetTop,i=i.offsetParent}n.x.targetLength=t===e?t.scrollWidth:t.clientWidth,n.y.targetLength=t===e?t.scrollHeight:t.clientHeight,n.x.containerLength=e.clientWidth,n.y.containerLength=e.clientHeight}function YI(e,t,n,i={}){return{measure:o=>{$I(e,i.target,n),kI(e,n,o),(i.offset||i.target)&&WI(e,n,i)},notify:()=>t(n)}}const Fn=new WeakMap,ql=new WeakMap,ss=new WeakMap,Wl=e=>e===document.scrollingElement?window:e;function Nh(e,{container:t=document.scrollingElement,...n}={}){if(!t)return Ue;let i=ss.get(t);i||(i=new Set,ss.set(t,i));const o=OI(),s=YI(t,e,o,n);if(i.add(s),!Fn.has(t)){const a=()=>{for(const h of i)h.measure(Ie.timestamp);se.preUpdate(c)},c=()=>{for(const h of i)h.notify()},l=()=>se.read(a);Fn.set(t,l);const d=Wl(t);window.addEventListener("resize",l,{passive:!0}),t!==document.documentElement&&ql.set(t,Qy(t,l)),d.addEventListener("scroll",l,{passive:!0}),l()}const r=Fn.get(t);return se.read(r,!1,!0),()=>{var l;rt(r);const a=ss.get(t);if(!a||(a.delete(s),a.size))return;const c=Fn.get(t);Fn.delete(t),c&&(Wl(t).removeEventListener("scroll",c),(l=ql.get(t))==null||l(),window.removeEventListener("resize",c))}}const $l=new Map;function zI(e){const t={value:0},n=Nh(i=>{t.value=i[e.axis].progress*100},e);return{currentTime:t,cancel:n}}function Lh({source:e,container:t,...n}){const{axis:i}=n;e&&(t=e);const o=$l.get(t)??new Map;$l.set(t,o);const s=n.target??"self",r=o.get(s)??{},a=i+(n.offset??[]).join(",");return r[a]||(r[a]=!n.target&&Rf()?new ScrollTimeline({source:t,axis:i}):zI({container:t,...n})),r[a]}function JI(e,t){const n=Lh(t);return e.attachTimeline({timeline:t.target?void 0:n,observe:i=>(i.pause(),Bf(o=>{i.time=i.iterationDuration*o},n))})}function KI(e){return e.length===2}function XI(e,t){return KI(e)?Nh(n=>{e(n[t.axis].progress,n)},t):Bf(e,Lh(t))}function ZI(e,{axis:t="y",container:n=document.scrollingElement,...i}={}){if(!n)return Ue;const o={axis:t,container:n,...i};return typeof e=="function"?XI(e,o):JI(e,o)}const QI=()=>({scrollX:tt(0),scrollY:tt(0),scrollXProgress:tt(0),scrollYProgress:tt(0)}),vi=e=>e?!e.current:!1;function uO({container:e,target:t,...n}={}){const i=Cn(QI),o=q.useRef(null),s=q.useRef(!1),r=q.useCallback(()=>(o.current=ZI((a,{x:c,y:l})=>{i.scrollX.set(c.current),i.scrollXProgress.set(c.progress),i.scrollY.set(l.current),i.scrollYProgress.set(l.progress)},{...n,container:(e==null?void 0:e.current)||void 0,target:(t==null?void 0:t.current)||void 0}),()=>{var a;(a=o.current)==null||a.call(o)}),[e,t,JSON.stringify(n.offset)]);return yo(()=>{if(s.current=!1,vi(e)||vi(t)){s.current=!0;return}else return r()},[r]),q.useEffect(()=>{if(s.current)return jn(!vi(e)),jn(!vi(t)),r()},[r]),i}function Oh(e){const t=Cn(()=>tt(e)),{isStatic:n}=q.useContext(hi);if(n){const[,i]=q.useState(e);q.useEffect(()=>t.on("change",i),[])}return t}function Fh(e,t){const n=Oh(t()),i=()=>n.set(t());return i(),yo(()=>{const o=()=>se.preRender(i,!1,!0),s=e.map(r=>r.on("change",o));return()=>{s.forEach(r=>r()),rt(i)}}),n}function jI(e){$n.current=[],e();const t=Fh($n.current,e);return $n.current=void 0,t}function e0(e,t,n,i){if(typeof e=="function")return jI(e);const o=typeof t=="function"?t:jy(t,n,i);return Array.isArray(e)?Yl(e,o):Yl([e],([s])=>o(s))}function Yl(e,t){const n=Cn(()=>[]);return Fh(e,()=>{n.length=0;const i=e.length;for(let o=0;o<i;o++)n[o]=e[o].get();return t(n)})}function dO(e,t={}){const{isStatic:n}=q.useContext(hi),i=()=>me(e)?e.get():e;if(n)return e0(i);const o=Oh(i());return q.useInsertionEffect(()=>eE(o,e,t),[o,JSON.stringify(t)]),o}function Kr(e){return typeof e=="object"&&!Array.isArray(e)}function kh(e,t,n,i){return typeof e=="string"&&Kr(t)?Or(e,n,i):e instanceof NodeList?Array.from(e):Array.isArray(e)?e:[e]}function t0(e,t,n){return e*(t+1)}function zl(e,t,n,i){return typeof t=="number"?t:t.startsWith("-")||t.startsWith("+")?Math.max(0,e+parseFloat(t)):t==="<"?n:t.startsWith("<")?Math.max(0,n+parseFloat(t.slice(1))):i.get(t)??e}function n0(e,t,n){for(let i=0;i<e.length;i++){const o=e[i];o.at>t&&o.at<n&&(To(e,o),i--)}}function i0(e,t,n,i,o,s){n0(e,o,s);for(let r=0;r<t.length;r++)e.push({value:t[r],at:ae(o,s,i[r]),easing:af(n,r)})}function o0(e,t){for(let n=0;n<e.length;n++)e[n]=e[n]/(t+1)}function s0(e,t){return e.at===t.at?e.value===null?1:t.value===null?-1:0:e.at-t.at}const r0="easeInOut";function a0(e,{defaultTransition:t={},...n}={},i,o){const s=t.duration||.3,r=new Map,a=new Map,c={},l=new Map;let d=0,h=0,p=0;for(let m=0;m<e.length;m++){const g=e[m];if(typeof g=="string"){l.set(g,h);continue}else if(!Array.isArray(g)){l.set(g.name,zl(h,g.at,d,l));continue}let[y,E,v={}]=g;v.at!==void 0&&(h=zl(h,v.at,d,l));let T=0;const I=(S,A,P,D=0,R=0)=>{const C=l0(S),{delay:_=0,times:b=Mr(C),type:N="keyframes",repeat:F,repeatType:x,repeatDelay:k=0,...w}=A;let{ease:M=t.ease||"easeOut",duration:L}=A;const O=typeof _=="function"?_(D,R):_,U=C.length,B=xr(N)?N:o==null?void 0:o[N||"keyframes"];if(U<=2&&B){let te=100;if(U===2&&d0(C)){const Q=C[1]-C[0];te=Math.abs(Q)}const G={...w};L!==void 0&&(G.duration=it(L));const W=If(G,te,B);M=W.ease,L=W.duration}L??(L=s);const $=h+O;b.length===1&&b[0]===0&&(b[1]=1);const X=b.length-C.length;if(X>0&&_f(b,X),C.length===1&&C.unshift(null),F){L=t0(L,F);const te=[...C],G=[...b];M=Array.isArray(M)?[...M]:[M];const W=[...M];for(let Q=0;Q<F;Q++){C.push(...te);for(let J=0;J<te.length;J++)b.push(G[J]+(Q+1)),M.push(J===0?"linear":af(W,J-1))}o0(b,F)}const Y=$+L;i0(P,C,M,b,$,Y),T=Math.max(O+L,T),p=Math.max(Y,p)};if(me(y)){const S=Jl(y,a);I(E,v,Kl("default",S))}else{const S=kh(y,E,i,c),A=S.length;for(let P=0;P<A;P++){E=E,v=v;const D=S[P],R=Jl(D,a);for(const C in E)I(E[C],c0(v,C),Kl(C,R),P,A)}}d=h,h+=T}return a.forEach((m,g)=>{for(const y in m){const E=m[y];E.sort(s0);const v=[],T=[],I=[];for(let A=0;A<E.length;A++){const{at:P,value:D,easing:R}=E[A];v.push(D),T.push(Wt(0,p,P)),I.push(R||"easeOut")}T[0]!==0&&(T.unshift(0),v.unshift(v[0]),I.unshift(r0)),T[T.length-1]!==1&&(T.push(1),v.push(null)),r.has(g)||r.set(g,{keyframes:{},transition:{}});const S=r.get(g);S.keyframes[y]=v,S.transition[y]={...t,duration:p,ease:I,times:T,...n}}}),r}function Jl(e,t){return!t.has(e)&&t.set(e,{}),t.get(e)}function Kl(e,t){return t[e]||(t[e]=[]),t[e]}function l0(e){return Array.isArray(e)?e:[e]}function c0(e,t){return e&&e[t]?{...e,...e[t]}:{...e}}const u0=e=>typeof e=="number",d0=e=>e.every(u0);function f0(e,t){return e in t}class h0 extends lh{constructor(){super(...arguments),this.type="object"}readValueFromInstance(t,n){if(f0(n,t)){const i=t[n];if(typeof i=="string"||typeof i=="number")return i}}getBaseTargetFromProps(){}removeValueFromRenderState(t,n){delete n.output[t]}measureInstanceViewportBox(){return he()}build(t,n){Object.assign(t.output,n)}renderInstance(t,{output:n}){Object.assign(t,n)}sortInstanceNodePosition(){return 0}}function p0(e){const t={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},n=vo(e)&&!Hf(e)?new hh(t):new dh(t);n.mount(e),oi.set(e,n)}function m0(e){const t={presenceContext:null,props:{},visualState:{renderState:{output:{}},latestValues:{}}},n=new h0(t);n.mount(e),oi.set(e,n)}function g0(e,t){return me(e)||typeof e=="number"||typeof e=="string"&&!Kr(t)}function Vh(e,t,n,i){const o=[];if(g0(e,t))o.push(Sh(e,Kr(t)&&t.default||t,n&&(n.default||n)));else{const s=kh(e,t,i),r=s.length;for(let a=0;a<r;a++){const c=s[a],l=c instanceof Element?p0:m0;oi.has(c)||l(c);const d=oi.get(c),h={...n};"delay"in h&&typeof h.delay=="function"&&(h.delay=h.delay(a,r)),o.push(...Jr(d,{...t,transition:h},{}))}}return o}function y0(e,t,n){const i=[];return a0(e,t,n,{spring:ni}).forEach(({keyframes:s,transition:r},a)=>{i.push(...Vh(a,s,r))}),i}function E0(e){return Array.isArray(e)&&e.some(Array.isArray)}function T0(e){function t(n,i,o){let s=[],r;if(E0(n))s=y0(n,i,e);else{const{onComplete:c,...l}=o||{};typeof c=="function"&&(r=c),s=Vh(n,i,l,e)}const a=new Cy(s);return r&&a.finished.then(r),a}return t}const fO=T0();var qi={exports:{}},I0=qi.exports,Xl;function v0(){return Xl||(Xl=1,(function(e,t){(function(n,i){e.exports=i(Qm())})(I0,(function(n){return(function(i){var o={};function s(r){if(o[r])return o[r].exports;var a=o[r]={i:r,l:!1,exports:{}};return i[r].call(a.exports,a,a.exports,s),a.l=!0,a.exports}return s.m=i,s.c=o,s.d=function(r,a,c){s.o(r,a)||Object.defineProperty(r,a,{enumerable:!0,get:c})},s.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},s.t=function(r,a){if(1&a&&(r=s(r)),8&a||4&a&&typeof r=="object"&&r&&r.__esModule)return r;var c=Object.create(null);if(s.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:r}),2&a&&typeof r!="string")for(var l in r)s.d(c,l,(function(d){return r[d]}).bind(null,l));return c},s.n=function(r){var a=r&&r.__esModule?function(){return r.default}:function(){return r};return s.d(a,"a",a),a},s.o=function(r,a){return Object.prototype.hasOwnProperty.call(r,a)},s.p="/",s(s.s=1)})([function(i,o){i.exports=n},function(i,o,s){i.exports=s(2)},function(i,o,s){function r(C,_,b){return _ in C?Object.defineProperty(C,_,{value:b,enumerable:!0,configurable:!0,writable:!0}):C[_]=b,C}function a(C,_){var b=Object.keys(C);if(Object.getOwnPropertySymbols){var N=Object.getOwnPropertySymbols(C);_&&(N=N.filter((function(F){return Object.getOwnPropertyDescriptor(C,F).enumerable}))),b.push.apply(b,N)}return b}function c(C,_){if(C==null)return{};var b,N,F=(function(k,w){if(k==null)return{};var M,L,O={},U=Object.keys(k);for(L=0;L<U.length;L++)M=U[L],w.indexOf(M)>=0||(O[M]=k[M]);return O})(C,_);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(C);for(N=0;N<x.length;N++)b=x[N],_.indexOf(b)>=0||Object.prototype.propertyIsEnumerable.call(C,b)&&(F[b]=C[b])}return F}s.r(o);var l=s(0),d=s.n(l),h=function(C){for(var _=0,b=0;b<C.length;b++)_=(_<<5)-_+C.charCodeAt(b),_&=_;return Math.abs(_)},p=function(C,_){return Math.floor(C/Math.pow(10,_)%10)},m=function(C,_){return!(p(C,_)%2)},g=function(C,_,b){var N=C%_;return b&&p(C,b)%2===0?-N:N},y=function(C,_,b){return _[C%b]},E=function(C){var _=(function(N,F){var x=h(N),k=F&&F.length;return Array.from({length:4},(function(w,M){return{color:y(x+M,F,k),translateX:g(x*(M+1),40-(M+17),1),translateY:g(x*(M+1),40-(M+17),2),rotate:g(x*(M+1),360),isSquare:m(x,2)}}))})(C.name,C.colors),b=l.useId();return l.createElement("svg",{viewBox:"0 0 80 80",fill:"none",role:"img",xmlns:"http://www.w3.org/2000/svg",width:C.size,height:C.size},C.title&&l.createElement("title",null,C.name),l.createElement("mask",{id:b,maskUnits:"userSpaceOnUse",x:0,y:0,width:80,height:80},l.createElement("rect",{width:80,height:80,rx:C.square?void 0:160,fill:"#FFFFFF"})),l.createElement("g",{mask:"url(#".concat(b,")")},l.createElement("rect",{width:80,height:80,fill:_[0].color}),l.createElement("rect",{x:10,y:30,width:80,height:_[1].isSquare?80:10,fill:_[1].color,transform:"translate("+_[1].translateX+" "+_[1].translateY+") rotate("+_[1].rotate+" 40 40)"}),l.createElement("circle",{cx:40,cy:40,fill:_[2].color,r:16,transform:"translate("+_[2].translateX+" "+_[2].translateY+")"}),l.createElement("line",{x1:0,y1:40,x2:80,y2:40,strokeWidth:2,stroke:_[3].color,transform:"translate("+_[3].translateX+" "+_[3].translateY+") rotate("+_[3].rotate+" 40 40)"})))},v=function(C){var _=(function(N,F){var x=h(F),k=N&&N.length,w=Array.from({length:5},(function(L,O){return y(x+O,N,k)})),M=[];return M[0]=w[0],M[1]=w[1],M[2]=w[1],M[3]=w[2],M[4]=w[2],M[5]=w[3],M[6]=w[3],M[7]=w[0],M[8]=w[4],M})(C.colors,C.name),b=d.a.useId();return d.a.createElement("svg",{viewBox:"0 0 90 90",fill:"none",role:"img",xmlns:"http://www.w3.org/2000/svg",width:C.size,height:C.size},C.title&&d.a.createElement("title",null,C.name),d.a.createElement("mask",{id:b,maskUnits:"userSpaceOnUse",x:0,y:0,width:90,height:90},d.a.createElement("rect",{width:90,height:90,rx:C.square?void 0:180,fill:"#FFFFFF"})),d.a.createElement("g",{mask:"url(#".concat(b,")")},d.a.createElement("path",{d:"M0 0h90v45H0z",fill:_[0]}),d.a.createElement("path",{d:"M0 45h90v45H0z",fill:_[1]}),d.a.createElement("path",{d:"M83 45a38 38 0 00-76 0h76z",fill:_[2]}),d.a.createElement("path",{d:"M83 45a38 38 0 01-76 0h76z",fill:_[3]}),d.a.createElement("path",{d:"M77 45a32 32 0 10-64 0h64z",fill:_[4]}),d.a.createElement("path",{d:"M77 45a32 32 0 11-64 0h64z",fill:_[5]}),d.a.createElement("path",{d:"M71 45a26 26 0 00-52 0h52z",fill:_[6]}),d.a.createElement("path",{d:"M71 45a26 26 0 01-52 0h52z",fill:_[7]}),d.a.createElement("circle",{cx:45,cy:45,r:23,fill:_[8]})))},T=function(C){var _=(function(N,F){var x=h(N),k=F&&F.length;return Array.from({length:64},(function(w,M){return y(x%(M+1),F,k)}))})(C.name,C.colors),b=l.useId();return l.createElement("svg",{viewBox:"0 0 80 80",fill:"none",role:"img",xmlns:"http://www.w3.org/2000/svg",width:C.size,height:C.size},C.title&&l.createElement("title",null,C.name),l.createElement("mask",{id:b,"mask-type":"alpha",maskUnits:"userSpaceOnUse",x:0,y:0,width:80,height:80},l.createElement("rect",{width:80,height:80,rx:C.square?void 0:160,fill:"#FFFFFF"})),l.createElement("g",{mask:"url(#".concat(b,")")},l.createElement("rect",{width:10,height:10,fill:_[0]}),l.createElement("rect",{x:20,width:10,height:10,fill:_[1]}),l.createElement("rect",{x:40,width:10,height:10,fill:_[2]}),l.createElement("rect",{x:60,width:10,height:10,fill:_[3]}),l.createElement("rect",{x:10,width:10,height:10,fill:_[4]}),l.createElement("rect",{x:30,width:10,height:10,fill:_[5]}),l.createElement("rect",{x:50,width:10,height:10,fill:_[6]}),l.createElement("rect",{x:70,width:10,height:10,fill:_[7]}),l.createElement("rect",{y:10,width:10,height:10,fill:_[8]}),l.createElement("rect",{y:20,width:10,height:10,fill:_[9]}),l.createElement("rect",{y:30,width:10,height:10,fill:_[10]}),l.createElement("rect",{y:40,width:10,height:10,fill:_[11]}),l.createElement("rect",{y:50,width:10,height:10,fill:_[12]}),l.createElement("rect",{y:60,width:10,height:10,fill:_[13]}),l.createElement("rect",{y:70,width:10,height:10,fill:_[14]}),l.createElement("rect",{x:20,y:10,width:10,height:10,fill:_[15]}),l.createElement("rect",{x:20,y:20,width:10,height:10,fill:_[16]}),l.createElement("rect",{x:20,y:30,width:10,height:10,fill:_[17]}),l.createElement("rect",{x:20,y:40,width:10,height:10,fill:_[18]}),l.createElement("rect",{x:20,y:50,width:10,height:10,fill:_[19]}),l.createElement("rect",{x:20,y:60,width:10,height:10,fill:_[20]}),l.createElement("rect",{x:20,y:70,width:10,height:10,fill:_[21]}),l.createElement("rect",{x:40,y:10,width:10,height:10,fill:_[22]}),l.createElement("rect",{x:40,y:20,width:10,height:10,fill:_[23]}),l.createElement("rect",{x:40,y:30,width:10,height:10,fill:_[24]}),l.createElement("rect",{x:40,y:40,width:10,height:10,fill:_[25]}),l.createElement("rect",{x:40,y:50,width:10,height:10,fill:_[26]}),l.createElement("rect",{x:40,y:60,width:10,height:10,fill:_[27]}),l.createElement("rect",{x:40,y:70,width:10,height:10,fill:_[28]}),l.createElement("rect",{x:60,y:10,width:10,height:10,fill:_[29]}),l.createElement("rect",{x:60,y:20,width:10,height:10,fill:_[30]}),l.createElement("rect",{x:60,y:30,width:10,height:10,fill:_[31]}),l.createElement("rect",{x:60,y:40,width:10,height:10,fill:_[32]}),l.createElement("rect",{x:60,y:50,width:10,height:10,fill:_[33]}),l.createElement("rect",{x:60,y:60,width:10,height:10,fill:_[34]}),l.createElement("rect",{x:60,y:70,width:10,height:10,fill:_[35]}),l.createElement("rect",{x:10,y:10,width:10,height:10,fill:_[36]}),l.createElement("rect",{x:10,y:20,width:10,height:10,fill:_[37]}),l.createElement("rect",{x:10,y:30,width:10,height:10,fill:_[38]}),l.createElement("rect",{x:10,y:40,width:10,height:10,fill:_[39]}),l.createElement("rect",{x:10,y:50,width:10,height:10,fill:_[40]}),l.createElement("rect",{x:10,y:60,width:10,height:10,fill:_[41]}),l.createElement("rect",{x:10,y:70,width:10,height:10,fill:_[42]}),l.createElement("rect",{x:30,y:10,width:10,height:10,fill:_[43]}),l.createElement("rect",{x:30,y:20,width:10,height:10,fill:_[44]}),l.createElement("rect",{x:30,y:30,width:10,height:10,fill:_[45]}),l.createElement("rect",{x:30,y:40,width:10,height:10,fill:_[46]}),l.createElement("rect",{x:30,y:50,width:10,height:10,fill:_[47]}),l.createElement("rect",{x:30,y:60,width:10,height:10,fill:_[48]}),l.createElement("rect",{x:30,y:70,width:10,height:10,fill:_[49]}),l.createElement("rect",{x:50,y:10,width:10,height:10,fill:_[50]}),l.createElement("rect",{x:50,y:20,width:10,height:10,fill:_[51]}),l.createElement("rect",{x:50,y:30,width:10,height:10,fill:_[52]}),l.createElement("rect",{x:50,y:40,width:10,height:10,fill:_[53]}),l.createElement("rect",{x:50,y:50,width:10,height:10,fill:_[54]}),l.createElement("rect",{x:50,y:60,width:10,height:10,fill:_[55]}),l.createElement("rect",{x:50,y:70,width:10,height:10,fill:_[56]}),l.createElement("rect",{x:70,y:10,width:10,height:10,fill:_[57]}),l.createElement("rect",{x:70,y:20,width:10,height:10,fill:_[58]}),l.createElement("rect",{x:70,y:30,width:10,height:10,fill:_[59]}),l.createElement("rect",{x:70,y:40,width:10,height:10,fill:_[60]}),l.createElement("rect",{x:70,y:50,width:10,height:10,fill:_[61]}),l.createElement("rect",{x:70,y:60,width:10,height:10,fill:_[62]}),l.createElement("rect",{x:70,y:70,width:10,height:10,fill:_[63]})))},I=function(C){var _=(function(N,F){var x,k=h(N),w=F&&F.length,M=y(k,F,w),L=g(k,10,1),O=L<5?L+4:L,U=g(k,10,2),B=U<5?U+4:U;return{wrapperColor:M,faceColor:(x=M,x.slice(0,1)==="#"&&(x=x.slice(1)),(299*parseInt(x.substr(0,2),16)+587*parseInt(x.substr(2,2),16)+114*parseInt(x.substr(4,2),16))/1e3>=128?"#000000":"#FFFFFF"),backgroundColor:y(k+13,F,w),wrapperTranslateX:O,wrapperTranslateY:B,wrapperRotate:g(k,360),wrapperScale:1+g(k,3)/10,isMouthOpen:m(k,2),isCircle:m(k,1),eyeSpread:g(k,5),mouthSpread:g(k,3),faceRotate:g(k,10,3),faceTranslateX:O>6?O/2:g(k,8,1),faceTranslateY:B>6?B/2:g(k,7,2)}})(C.name,C.colors),b=l.useId();return l.createElement("svg",{viewBox:"0 0 36 36",fill:"none",role:"img",xmlns:"http://www.w3.org/2000/svg",width:C.size,height:C.size},C.title&&l.createElement("title",null,C.name),l.createElement("mask",{id:b,maskUnits:"userSpaceOnUse",x:0,y:0,width:36,height:36},l.createElement("rect",{width:36,height:36,rx:C.square?void 0:72,fill:"#FFFFFF"})),l.createElement("g",{mask:"url(#".concat(b,")")},l.createElement("rect",{width:36,height:36,fill:_.backgroundColor}),l.createElement("rect",{x:"0",y:"0",width:36,height:36,transform:"translate("+_.wrapperTranslateX+" "+_.wrapperTranslateY+") rotate("+_.wrapperRotate+" 18 18) scale("+_.wrapperScale+")",fill:_.wrapperColor,rx:_.isCircle?36:6}),l.createElement("g",{transform:"translate("+_.faceTranslateX+" "+_.faceTranslateY+") rotate("+_.faceRotate+" 18 18)"},_.isMouthOpen?l.createElement("path",{d:"M15 "+(19+_.mouthSpread)+"c2 1 4 1 6 0",stroke:_.faceColor,fill:"none",strokeLinecap:"round"}):l.createElement("path",{d:"M13,"+(19+_.mouthSpread)+" a1,0.75 0 0,0 10,0",fill:_.faceColor}),l.createElement("rect",{x:14-_.eyeSpread,y:14,width:1.5,height:2,rx:1,stroke:"none",fill:_.faceColor}),l.createElement("rect",{x:20+_.eyeSpread,y:14,width:1.5,height:2,rx:1,stroke:"none",fill:_.faceColor}))))},S=function(C){var _=(function(F,x){var k=h(F),w=x&&x.length;return Array.from({length:4},(function(M,L){return y(k+L,x,w)}))})(C.name,C.colors),b=C.name.replace(/\s/g,""),N=l.useId();return l.createElement("svg",{viewBox:"0 0 80 80",fill:"none",role:"img",xmlns:"http://www.w3.org/2000/svg",width:C.size,height:C.size},C.title&&l.createElement("title",null,C.name),l.createElement("mask",{id:N,maskUnits:"userSpaceOnUse",x:0,y:0,width:80,height:80},l.createElement("rect",{width:80,height:80,rx:C.square?void 0:160,fill:"#FFFFFF"})),l.createElement("g",{mask:"url(#".concat(N,")")},l.createElement("path",{fill:"url(#gradient_paint0_linear_"+b+")",d:"M0 0h80v40H0z"}),l.createElement("path",{fill:"url(#gradient_paint1_linear_"+b+")",d:"M0 40h80v40H0z"})),l.createElement("defs",null,l.createElement("linearGradient",{id:"gradient_paint0_linear_"+b,x1:40,y1:0,x2:40,y2:40,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:_[0]}),l.createElement("stop",{offset:1,stopColor:_[1]})),l.createElement("linearGradient",{id:"gradient_paint1_linear_"+b,x1:40,y1:40,x2:40,y2:80,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:_[2]}),l.createElement("stop",{offset:1,stopColor:_[3]}))))},A=function(C){var _=(function(N,F){var x=h(N),k=F&&F.length;return Array.from({length:3},(function(w,M){return{color:y(x+M,F,k),translateX:g(x*(M+1),8,1),translateY:g(x*(M+1),8,2),scale:1.2+g(x*(M+1),4)/10,rotate:g(x*(M+1),360,1)}}))})(C.name,C.colors),b=l.useId();return l.createElement("svg",{viewBox:"0 0 80 80",fill:"none",role:"img",xmlns:"http://www.w3.org/2000/svg",width:C.size,height:C.size},C.title&&l.createElement("title",null,C.name),l.createElement("mask",{id:b,maskUnits:"userSpaceOnUse",x:0,y:0,width:80,height:80},l.createElement("rect",{width:80,height:80,rx:C.square?void 0:160,fill:"#FFFFFF"})),l.createElement("g",{mask:"url(#".concat(b,")")},l.createElement("rect",{width:80,height:80,fill:_[0].color}),l.createElement("path",{filter:"url(#filter_".concat(b,")"),d:"M32.414 59.35L50.376 70.5H72.5v-71H33.728L26.5 13.381l19.057 27.08L32.414 59.35z",fill:_[1].color,transform:"translate("+_[1].translateX+" "+_[1].translateY+") rotate("+_[1].rotate+" 40 40) scale("+_[2].scale+")"}),l.createElement("path",{filter:"url(#filter_".concat(b,")"),style:{mixBlendMode:"overlay"},d:"M22.216 24L0 46.75l14.108 38.129L78 86l-3.081-59.276-22.378 4.005 12.972 20.186-23.35 27.395L22.215 24z",fill:_[2].color,transform:"translate("+_[2].translateX+" "+_[2].translateY+") rotate("+_[2].rotate+" 40 40) scale("+_[2].scale+")"})),l.createElement("defs",null,l.createElement("filter",{id:"filter_".concat(b),filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},l.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),l.createElement("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),l.createElement("feGaussianBlur",{stdDeviation:7,result:"effect1_foregroundBlur"}))))},P=["pixel","bauhaus","ring","beam","sunset","marble"],D={geometric:"beam",abstract:"bauhaus"},R=function(C){var _=C.variant,b=_===void 0?"marble":_,N=C.colors,F=N===void 0?["#92A1C6","#146A7C","#F0AB3D","#C271B4","#C20D90"]:N,x=C.name,k=x===void 0?"Clara Barton":x,w=C.square,M=w!==void 0&&w,L=C.title,O=L!==void 0&&L,U=C.size,B=(function($){for(var X=1;X<arguments.length;X++){var Y=arguments[X]!=null?arguments[X]:{};X%2?a(Object(Y),!0).forEach((function(te){r($,te,Y[te])})):Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(Y)):a(Object(Y)).forEach((function(te){Object.defineProperty($,te,Object.getOwnPropertyDescriptor(Y,te))}))}return $})({colors:F,name:k,title:O,size:U===void 0?40:U,square:M},c(C,["variant","colors","name","square","title","size"]));return{pixel:d.a.createElement(T,B),bauhaus:d.a.createElement(E,B),ring:d.a.createElement(v,B),beam:d.a.createElement(I,B),sunset:d.a.createElement(S,B),marble:d.a.createElement(A,B)}[Object.keys(D).includes(b)?D[b]:P.includes(b)?b:"marble"]};o.default=R}])}))})(qi)),qi.exports}var _0=v0();const hO=jm(_0);/*!
 * FilePond 4.30.6
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const C0=e=>e instanceof HTMLElement,S0=(e,t=[],n=[])=>{const i={...e},o=[],s=[],r=()=>({...i}),a=()=>{const g=[...o];return o.length=0,g},c=()=>{const g=[...s];s.length=0,g.forEach(({type:y,data:E})=>{l(y,E)})},l=(g,y,E)=>{if(E&&!document.hidden){s.push({type:g,data:y});return}m[g]&&m[g](y),o.push({type:g,data:y})},d=(g,...y)=>p[g]?p[g](...y):null,h={getState:r,processActionQueue:a,processDispatchQueue:c,dispatch:l,query:d};let p={};t.forEach(g=>{p={...g(i),...p}});let m={};return n.forEach(g=>{m={...g(l,d,i),...m}}),h},A0=(e,t,n)=>{if(typeof n=="function"){e[t]=n;return}Object.defineProperty(e,t,{...n})},ce=(e,t)=>{for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])},Rt=e=>{const t={};return ce(e,n=>{A0(t,n,e[n])}),t},ge=(e,t,n=null)=>{if(n===null)return e.getAttribute(t)||e.hasAttribute(t);e.setAttribute(t,n)},R0="http://www.w3.org/2000/svg",w0=["svg","path"],Zl=e=>w0.includes(e),eo=(e,t,n={})=>{typeof t=="object"&&(n=t,t=null);const i=Zl(e)?document.createElementNS(R0,e):document.createElement(e);return t&&(Zl(e)?ge(i,"class",t):i.className=t),ce(n,(o,s)=>{ge(i,o,s)}),i},M0=e=>(t,n)=>{typeof n<"u"&&e.children[n]?e.insertBefore(t,e.children[n]):e.appendChild(t)},P0=(e,t)=>(n,i)=>(typeof i<"u"?t.splice(i,0,n):t.push(n),n),D0=(e,t)=>n=>(t.splice(t.indexOf(n),1),n.element.parentNode&&e.removeChild(n.element),n),b0=typeof window<"u"&&typeof window.document<"u",Uh=()=>b0,x0=Uh()?eo("svg"):{},N0="children"in x0?e=>e.children.length:e=>e.childNodes.length,Gh=(e,t,n,i)=>{const o=n[0]||e.left,s=n[1]||e.top,r=o+e.width,a=s+e.height*(i[1]||1),c={element:{...e},inner:{left:e.left,top:e.top,right:e.right,bottom:e.bottom},outer:{left:o,top:s,right:r,bottom:a}};return t.filter(l=>!l.isRectIgnored()).map(l=>l.rect).forEach(l=>{Ql(c.inner,{...l.inner}),Ql(c.outer,{...l.outer})}),jl(c.inner),c.outer.bottom+=c.element.marginBottom,c.outer.right+=c.element.marginRight,jl(c.outer),c},Ql=(e,t)=>{t.top+=e.top,t.right+=e.left,t.bottom+=e.top,t.left+=e.left,t.bottom>e.bottom&&(e.bottom=t.bottom),t.right>e.right&&(e.right=t.right)},jl=e=>{e.width=e.right-e.left,e.height=e.bottom-e.top},Ot=e=>typeof e=="number",L0=(e,t,n,i=.001)=>Math.abs(e-t)<i&&Math.abs(n)<i,O0=({stiffness:e=.5,damping:t=.75,mass:n=10}={})=>{let i=null,o=null,s=0,r=!1;const l=Rt({interpolate:(d,h)=>{if(r)return;if(!(Ot(i)&&Ot(o))){r=!0,s=0;return}const p=-(o-i)*e;s+=p/n,o+=s,s*=t,L0(o,i,s)||h?(o=i,s=0,r=!0,l.onupdate(o),l.oncomplete(o)):l.onupdate(o)},target:{set:d=>{if(Ot(d)&&!Ot(o)&&(o=d),i===null&&(i=d,o=d),i=d,o===i||typeof i>"u"){r=!0,s=0,l.onupdate(o),l.oncomplete(o);return}r=!1},get:()=>i},resting:{get:()=>r},onupdate:d=>{},oncomplete:d=>{}});return l},F0=e=>e<.5?2*e*e:-1+(4-2*e)*e,k0=({duration:e=500,easing:t=F0,delay:n=0}={})=>{let i=null,o,s,r=!0,a=!1,c=null;const d=Rt({interpolate:(h,p)=>{r||c===null||(i===null&&(i=h),!(h-i<n)&&(o=h-i-n,o>=e||p?(o=1,s=a?0:1,d.onupdate(s*c),d.oncomplete(s*c),r=!0):(s=o/e,d.onupdate((o>=0?t(a?1-s:s):0)*c))))},target:{get:()=>a?0:c,set:h=>{if(c===null){c=h,d.onupdate(h),d.oncomplete(h);return}h<c?(c=1,a=!0):(a=!1,c=h),r=!1,i=null}},resting:{get:()=>r},onupdate:h=>{},oncomplete:h=>{}});return d},ec={spring:O0,tween:k0},V0=(e,t,n)=>{const i=e[t]&&typeof e[t][n]=="object"?e[t][n]:e[t]||e,o=typeof i=="string"?i:i.type,s=typeof i=="object"?{...i}:{};return ec[o]?ec[o](s):null},Xr=(e,t,n,i=!1)=>{t=Array.isArray(t)?t:[t],t.forEach(o=>{e.forEach(s=>{let r=s,a=()=>n[s],c=l=>n[s]=l;typeof s=="object"&&(r=s.key,a=s.getter||a,c=s.setter||c),!(o[r]&&!i)&&(o[r]={get:a,set:c})})})},U0=({mixinConfig:e,viewProps:t,viewInternalAPI:n,viewExternalAPI:i})=>{const o={...t},s=[];return ce(e,(r,a)=>{const c=V0(a);if(!c)return;c.onupdate=d=>{t[r]=d},c.target=o[r],Xr([{key:r,setter:d=>{c.target!==d&&(c.target=d)},getter:()=>t[r]}],[n,i],t,!0),s.push(c)}),{write:r=>{let a=document.hidden,c=!0;return s.forEach(l=>{l.resting||(c=!1),l.interpolate(r,a)}),c},destroy:()=>{}}},G0=e=>(t,n)=>{e.addEventListener(t,n)},B0=e=>(t,n)=>{e.removeEventListener(t,n)},H0=({mixinConfig:e,viewProps:t,viewInternalAPI:n,viewExternalAPI:i,viewState:o,view:s})=>{const r=[],a=G0(s.element),c=B0(s.element);return i.on=(l,d)=>{r.push({type:l,fn:d}),a(l,d)},i.off=(l,d)=>{r.splice(r.findIndex(h=>h.type===l&&h.fn===d),1),c(l,d)},{write:()=>!0,destroy:()=>{r.forEach(l=>{c(l.type,l.fn)})}}},q0=({mixinConfig:e,viewProps:t,viewExternalAPI:n})=>{Xr(e,n,t)},we=e=>e!=null,W0={opacity:1,scaleX:1,scaleY:1,translateX:0,translateY:0,rotateX:0,rotateY:0,rotateZ:0,originX:0,originY:0},$0=({mixinConfig:e,viewProps:t,viewInternalAPI:n,viewExternalAPI:i,view:o})=>{const s={...t},r={};Xr(e,[n,i],t);const a=()=>[t.translateX||0,t.translateY||0],c=()=>[t.scaleX||0,t.scaleY||0],l=()=>o.rect?Gh(o.rect,o.childViews,a(),c()):null;return n.rect={get:l},i.rect={get:l},e.forEach(d=>{t[d]=typeof s[d]>"u"?W0[d]:s[d]}),{write:()=>{if(Y0(r,t))return z0(o.element,t),Object.assign(r,{...t}),!0},destroy:()=>{}}},Y0=(e,t)=>{if(Object.keys(e).length!==Object.keys(t).length)return!0;for(const n in t)if(t[n]!==e[n])return!0;return!1},z0=(e,{opacity:t,perspective:n,translateX:i,translateY:o,scaleX:s,scaleY:r,rotateX:a,rotateY:c,rotateZ:l,originX:d,originY:h,width:p,height:m})=>{let g="",y="";(we(d)||we(h))&&(y+=`transform-origin: ${d||0}px ${h||0}px;`),we(n)&&(g+=`perspective(${n}px) `),(we(i)||we(o))&&(g+=`translate3d(${i||0}px, ${o||0}px, 0) `),(we(s)||we(r))&&(g+=`scale3d(${we(s)?s:1}, ${we(r)?r:1}, 1) `),we(l)&&(g+=`rotateZ(${l}rad) `),we(a)&&(g+=`rotateX(${a}rad) `),we(c)&&(g+=`rotateY(${c}rad) `),g.length&&(y+=`transform:${g};`),we(t)&&(y+=`opacity:${t};`,t===0&&(y+="visibility:hidden;"),t<1&&(y+="pointer-events:none;")),we(m)&&(y+=`height:${m}px;`),we(p)&&(y+=`width:${p}px;`);const E=e.elementCurrentStyle||"";(y.length!==E.length||y!==E)&&(e.style.cssText=y,e.elementCurrentStyle=y)},J0={styles:$0,listeners:H0,animations:U0,apis:q0},tc=(e={},t={},n={})=>(t.layoutCalculated||(e.paddingTop=parseInt(n.paddingTop,10)||0,e.marginTop=parseInt(n.marginTop,10)||0,e.marginRight=parseInt(n.marginRight,10)||0,e.marginBottom=parseInt(n.marginBottom,10)||0,e.marginLeft=parseInt(n.marginLeft,10)||0,t.layoutCalculated=!0),e.left=t.offsetLeft||0,e.top=t.offsetTop||0,e.width=t.offsetWidth||0,e.height=t.offsetHeight||0,e.right=e.left+e.width,e.bottom=e.top+e.height,e.scrollTop=t.scrollTop,e.hidden=t.offsetParent===null,e),ye=({tag:e="div",name:t=null,attributes:n={},read:i=()=>{},write:o=()=>{},create:s=()=>{},destroy:r=()=>{},filterFrameActionsForChild:a=(m,g)=>g,didCreateView:c=()=>{},didWriteView:l=()=>{},ignoreRect:d=!1,ignoreRectUpdate:h=!1,mixins:p=[]}={})=>(m,g={})=>{const y=eo(e,`filepond--${t}`,n),E=window.getComputedStyle(y,null),v=tc();let T=null,I=!1;const S=[],A=[],P={},D={},R=[o],C=[i],_=[r],b=()=>y,N=()=>S.concat(),F=()=>P,x=G=>(W,Q)=>W(G,Q),k=()=>T||(T=Gh(v,S,[0,0],[1,1]),T),w=()=>E,M=()=>{T=null,S.forEach(Q=>Q._read()),!(h&&v.width&&v.height)&&tc(v,y,E);const W={root:Y,props:g,rect:v};C.forEach(Q=>Q(W))},L=(G,W,Q)=>{let J=W.length===0;return R.forEach(j=>{j({props:g,root:Y,actions:W,timestamp:G,shouldOptimize:Q})===!1&&(J=!1)}),A.forEach(j=>{j.write(G)===!1&&(J=!1)}),S.filter(j=>!!j.element.parentNode).forEach(j=>{j._write(G,a(j,W),Q)||(J=!1)}),S.forEach((j,ee)=>{j.element.parentNode||(Y.appendChild(j.element,ee),j._read(),j._write(G,a(j,W),Q),J=!1)}),I=J,l({props:g,root:Y,actions:W,timestamp:G}),J},O=()=>{A.forEach(G=>G.destroy()),_.forEach(G=>{G({root:Y,props:g})}),S.forEach(G=>G._destroy())},U={element:{get:b},style:{get:w},childViews:{get:N}},B={...U,rect:{get:k},ref:{get:F},is:G=>t===G,appendChild:M0(y),createChildView:x(m),linkView:G=>(S.push(G),G),unlinkView:G=>{S.splice(S.indexOf(G),1)},appendChildView:P0(y,S),removeChildView:D0(y,S),registerWriter:G=>R.push(G),registerReader:G=>C.push(G),registerDestroyer:G=>_.push(G),invalidateLayout:()=>y.layoutCalculated=!1,dispatch:m.dispatch,query:m.query},$={element:{get:b},childViews:{get:N},rect:{get:k},resting:{get:()=>I},isRectIgnored:()=>d,_read:M,_write:L,_destroy:O},X={...U,rect:{get:()=>v}};Object.keys(p).sort((G,W)=>G==="styles"?1:W==="styles"?-1:0).forEach(G=>{const W=J0[G]({mixinConfig:p[G],viewProps:g,viewState:D,viewInternalAPI:B,viewExternalAPI:$,view:Rt(X)});W&&A.push(W)});const Y=Rt(B);s({root:Y,props:g});const te=N0(y);return S.forEach((G,W)=>{Y.appendChild(G.element,te+W)}),c(Y),Rt($)},K0=(e,t,n=60)=>{const i="__framePainter";if(window[i]){window[i].readers.push(e),window[i].writers.push(t);return}window[i]={readers:[e],writers:[t]};const o=window[i],s=1e3/n;let r=null,a=null,c=null,l=null;const d=()=>{document.hidden?(c=()=>window.setTimeout(()=>h(performance.now()),s),l=()=>window.clearTimeout(a)):(c=()=>window.requestAnimationFrame(h),l=()=>window.cancelAnimationFrame(a))};document.addEventListener("visibilitychange",()=>{l&&l(),d(),h(performance.now())});const h=p=>{a=c(h),r||(r=p);const m=p-r;m<=s||(r=p-m%s,o.readers.forEach(g=>g()),o.writers.forEach(g=>g(p)))};return d(),h(performance.now()),{pause:()=>{l(a)}}},Le=(e,t)=>({root:n,props:i,actions:o=[],timestamp:s,shouldOptimize:r})=>{o.filter(a=>e[a.type]).forEach(a=>e[a.type]({root:n,props:i,action:a.data,timestamp:s,shouldOptimize:r})),t&&t({root:n,props:i,actions:o,timestamp:s,shouldOptimize:r})},nc=(e,t)=>t.parentNode.insertBefore(e,t),ic=(e,t)=>t.parentNode.insertBefore(e,t.nextSibling),Ao=e=>Array.isArray(e),mt=e=>e==null,X0=e=>e.trim(),Ro=e=>""+e,Z0=(e,t=",")=>mt(e)?[]:Ao(e)?e:Ro(e).split(t).map(X0).filter(n=>n.length),Bh=e=>typeof e=="boolean",Hh=e=>Bh(e)?e:e==="true",xe=e=>typeof e=="string",qh=e=>Ot(e)?e:xe(e)?Ro(e).replace(/[a-z]+/gi,""):0,Wi=e=>parseInt(qh(e),10),oc=e=>parseFloat(qh(e)),wn=e=>Ot(e)&&isFinite(e)&&Math.floor(e)===e,sc=(e,t=1e3)=>{if(wn(e))return e;let n=Ro(e).trim();return/MB$/i.test(n)?(n=n.replace(/MB$i/,"").trim(),Wi(n)*t*t):/KB/i.test(n)?(n=n.replace(/KB$i/,"").trim(),Wi(n)*t):Wi(n)},Ft=e=>typeof e=="function",Q0=e=>{let t=self,n=e.split("."),i=null;for(;i=n.shift();)if(t=t[i],!t)return null;return t},rc={process:"POST",patch:"PATCH",revert:"DELETE",fetch:"GET",restore:"GET",load:"GET"},j0=e=>{const t={};return t.url=xe(e)?e:e.url||"",t.timeout=e.timeout?parseInt(e.timeout,10):0,t.headers=e.headers?e.headers:{},ce(rc,n=>{t[n]=ev(n,e[n],rc[n],t.timeout,t.headers)}),t.process=e.process||xe(e)||e.url?t.process:null,t.remove=e.remove||null,delete t.headers,t},ev=(e,t,n,i,o)=>{if(t===null)return null;if(typeof t=="function")return t;const s={url:n==="GET"||n==="PATCH"?`?${e}=`:"",method:n,headers:o,withCredentials:!1,timeout:i,onload:null,ondata:null,onerror:null};if(xe(t))return s.url=t,s;if(Object.assign(s,t),xe(s.headers)){const r=s.headers.split(/:(.+)/);s.headers={header:r[0],value:r[1]}}return s.withCredentials=Hh(s.withCredentials),s},tv=e=>j0(e),nv=e=>e===null,_e=e=>typeof e=="object"&&e!==null,iv=e=>_e(e)&&xe(e.url)&&_e(e.process)&&_e(e.revert)&&_e(e.restore)&&_e(e.fetch),qs=e=>Ao(e)?"array":nv(e)?"null":wn(e)?"int":/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(e)?"bytes":iv(e)?"api":typeof e,ov=e=>e.replace(/{\s*'/g,'{"').replace(/'\s*}/g,'"}').replace(/'\s*:/g,'":').replace(/:\s*'/g,':"').replace(/,\s*'/g,',"').replace(/'\s*,/g,'",'),sv={array:Z0,boolean:Hh,int:e=>qs(e)==="bytes"?sc(e):Wi(e),number:oc,float:oc,bytes:sc,string:e=>Ft(e)?e:Ro(e),function:e=>Q0(e),serverapi:tv,object:e=>{try{return JSON.parse(ov(e))}catch{return null}}},rv=(e,t)=>sv[t](e),Wh=(e,t,n)=>{if(e===t)return e;let i=qs(e);if(i!==n){const o=rv(e,n);if(i=qs(o),o===null)throw`Trying to assign value with incorrect type to "${option}", allowed type: "${n}"`;e=o}return e},av=(e,t)=>{let n=e;return{enumerable:!0,get:()=>n,set:i=>{n=Wh(i,e,t)}}},lv=e=>{const t={};return ce(e,n=>{const i=e[n];t[n]=av(i[0],i[1])}),Rt(t)},cv=e=>({items:[],listUpdateTimeout:null,itemUpdateTimeout:null,processingQueue:[],options:lv(e)}),wo=(e,t="-")=>e.split(/(?=[A-Z])/).map(n=>n.toLowerCase()).join(t),uv=(e,t)=>{const n={};return ce(t,i=>{n[i]={get:()=>e.getState().options[i],set:o=>{e.dispatch(`SET_${wo(i,"_").toUpperCase()}`,{value:o})}}}),n},dv=e=>(t,n,i)=>{const o={};return ce(e,s=>{const r=wo(s,"_").toUpperCase();o[`SET_${r}`]=a=>{try{i.options[s]=a.value}catch{}t(`DID_SET_${r}`,{value:i.options[s]})}}),o},fv=e=>t=>{const n={};return ce(e,i=>{n[`GET_${wo(i,"_").toUpperCase()}`]=o=>t.options[i]}),n},ze={API:1,DROP:2,BROWSE:3,PASTE:4,NONE:5},Zr=()=>Math.random().toString(36).substring(2,11),Qr=(e,t)=>e.splice(t,1),hv=(e,t)=>{t?e():document.hidden?Promise.resolve(1).then(e):setTimeout(e,0)},Mo=()=>{const e=[],t=(i,o)=>{Qr(e,e.findIndex(s=>s.event===i&&(s.cb===o||!o)))},n=(i,o,s)=>{e.filter(r=>r.event===i).map(r=>r.cb).forEach(r=>hv(()=>r(...o),s))};return{fireSync:(i,...o)=>{n(i,o,!0)},fire:(i,...o)=>{n(i,o,!1)},on:(i,o)=>{e.push({event:i,cb:o})},onOnce:(i,o)=>{e.push({event:i,cb:(...s)=>{t(i,o),o(...s)}})},off:t}},$h=(e,t,n)=>{Object.getOwnPropertyNames(e).filter(i=>!n.includes(i)).forEach(i=>Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i)))},pv=["fire","process","revert","load","on","off","onOnce","retryLoad","extend","archive","archived","release","released","requestProcessing","freeze"],Fe=e=>{const t={};return $h(e,t,pv),t},mv=e=>{e.forEach((t,n)=>{t.released&&Qr(e,n)})},Z={INIT:1,IDLE:2,PROCESSING_QUEUED:9,PROCESSING:3,PROCESSING_COMPLETE:5,PROCESSING_ERROR:6,PROCESSING_REVERT_ERROR:10,LOADING:7,LOAD_ERROR:8},Te={INPUT:1,LIMBO:2,LOCAL:3},Yh=e=>/[^0-9]+/.exec(e),zh=()=>Yh(1.1.toLocaleString())[0],gv=()=>{const e=zh(),t=1e3.toLocaleString();return t!=="1000"?Yh(t)[0]:e==="."?",":"."},V={BOOLEAN:"boolean",INT:"int",NUMBER:"number",STRING:"string",ARRAY:"array",OBJECT:"object",FUNCTION:"function",ACTION:"action",SERVER_API:"serverapi",REGEX:"regex"},jr=[],je=(e,t,n)=>new Promise((i,o)=>{const s=jr.filter(a=>a.key===e).map(a=>a.cb);if(s.length===0){i(t);return}const r=s.shift();s.reduce((a,c)=>a.then(l=>c(l,n)),r(t,n)).then(a=>i(a)).catch(a=>o(a))}),$t=(e,t,n)=>jr.filter(i=>i.key===e).map(i=>i.cb(t,n)),yv=(e,t)=>jr.push({key:e,cb:t}),Ev=e=>Object.assign(sn,e),to=()=>({...sn}),Tv=e=>{ce(e,(t,n)=>{sn[t]&&(sn[t][0]=Wh(n,sn[t][0],sn[t][1]))})},sn={id:[null,V.STRING],name:["filepond",V.STRING],disabled:[!1,V.BOOLEAN],className:[null,V.STRING],required:[!1,V.BOOLEAN],captureMethod:[null,V.STRING],allowSyncAcceptAttribute:[!0,V.BOOLEAN],allowDrop:[!0,V.BOOLEAN],allowBrowse:[!0,V.BOOLEAN],allowPaste:[!0,V.BOOLEAN],allowMultiple:[!1,V.BOOLEAN],allowReplace:[!0,V.BOOLEAN],allowRevert:[!0,V.BOOLEAN],allowRemove:[!0,V.BOOLEAN],allowProcess:[!0,V.BOOLEAN],allowReorder:[!1,V.BOOLEAN],allowDirectoriesOnly:[!1,V.BOOLEAN],storeAsFile:[!1,V.BOOLEAN],forceRevert:[!1,V.BOOLEAN],maxFiles:[null,V.INT],checkValidity:[!1,V.BOOLEAN],itemInsertLocationFreedom:[!0,V.BOOLEAN],itemInsertLocation:["before",V.STRING],itemInsertInterval:[75,V.INT],dropOnPage:[!1,V.BOOLEAN],dropOnElement:[!0,V.BOOLEAN],dropValidation:[!1,V.BOOLEAN],ignoredFiles:[[".ds_store","thumbs.db","desktop.ini"],V.ARRAY],instantUpload:[!0,V.BOOLEAN],maxParallelUploads:[2,V.INT],allowMinimumUploadDuration:[!0,V.BOOLEAN],chunkUploads:[!1,V.BOOLEAN],chunkForce:[!1,V.BOOLEAN],chunkSize:[5e6,V.INT],chunkRetryDelays:[[500,1e3,3e3],V.ARRAY],server:[null,V.SERVER_API],fileSizeBase:[1e3,V.INT],labelFileSizeBytes:["bytes",V.STRING],labelFileSizeKilobytes:["KB",V.STRING],labelFileSizeMegabytes:["MB",V.STRING],labelFileSizeGigabytes:["GB",V.STRING],labelDecimalSeparator:[zh(),V.STRING],labelThousandsSeparator:[gv(),V.STRING],labelIdle:['Drag & Drop your files or <span class="filepond--label-action">Browse</span>',V.STRING],labelInvalidField:["Field contains invalid files",V.STRING],labelFileWaitingForSize:["Waiting for size",V.STRING],labelFileSizeNotAvailable:["Size not available",V.STRING],labelFileCountSingular:["file in list",V.STRING],labelFileCountPlural:["files in list",V.STRING],labelFileLoading:["Loading",V.STRING],labelFileAdded:["Added",V.STRING],labelFileLoadError:["Error during load",V.STRING],labelFileRemoved:["Removed",V.STRING],labelFileRemoveError:["Error during remove",V.STRING],labelFileProcessing:["Uploading",V.STRING],labelFileProcessingComplete:["Upload complete",V.STRING],labelFileProcessingAborted:["Upload cancelled",V.STRING],labelFileProcessingError:["Error during upload",V.STRING],labelFileProcessingRevertError:["Error during revert",V.STRING],labelTapToCancel:["tap to cancel",V.STRING],labelTapToRetry:["tap to retry",V.STRING],labelTapToUndo:["tap to undo",V.STRING],labelButtonRemoveItem:["Remove",V.STRING],labelButtonAbortItemLoad:["Abort",V.STRING],labelButtonRetryItemLoad:["Retry",V.STRING],labelButtonAbortItemProcessing:["Cancel",V.STRING],labelButtonUndoItemProcessing:["Undo",V.STRING],labelButtonRetryItemProcessing:["Retry",V.STRING],labelButtonProcessItem:["Upload",V.STRING],iconRemove:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z" fill="currentColor" fill-rule="nonzero"/></svg>',V.STRING],iconProcess:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z" fill="currentColor" fill-rule="evenodd"/></svg>',V.STRING],iconRetry:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z" fill="currentColor" fill-rule="nonzero"/></svg>',V.STRING],iconUndo:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z" fill="currentColor" fill-rule="nonzero"/></svg>',V.STRING],iconDone:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z" fill="currentColor" fill-rule="nonzero"/></svg>',V.STRING],oninit:[null,V.FUNCTION],onwarning:[null,V.FUNCTION],onerror:[null,V.FUNCTION],onactivatefile:[null,V.FUNCTION],oninitfile:[null,V.FUNCTION],onaddfilestart:[null,V.FUNCTION],onaddfileprogress:[null,V.FUNCTION],onaddfile:[null,V.FUNCTION],onprocessfilestart:[null,V.FUNCTION],onprocessfileprogress:[null,V.FUNCTION],onprocessfileabort:[null,V.FUNCTION],onprocessfilerevert:[null,V.FUNCTION],onprocessfile:[null,V.FUNCTION],onprocessfiles:[null,V.FUNCTION],onremovefile:[null,V.FUNCTION],onpreparefile:[null,V.FUNCTION],onupdatefiles:[null,V.FUNCTION],onreorderfiles:[null,V.FUNCTION],beforeDropFile:[null,V.FUNCTION],beforeAddFile:[null,V.FUNCTION],beforeRemoveFile:[null,V.FUNCTION],beforePrepareFile:[null,V.FUNCTION],stylePanelLayout:[null,V.STRING],stylePanelAspectRatio:[null,V.STRING],styleItemPanelAspectRatio:[null,V.STRING],styleButtonRemoveItemPosition:["left",V.STRING],styleButtonProcessItemPosition:["right",V.STRING],styleLoadIndicatorPosition:["right",V.STRING],styleProgressIndicatorPosition:["right",V.STRING],styleButtonRemoveItemAlign:[!1,V.BOOLEAN],files:[[],V.ARRAY],credits:[["https://pqina.nl/","Powered by PQINA"],V.ARRAY]},kt=(e,t)=>mt(t)?e[0]||null:wn(t)?e[t]||null:(typeof t=="object"&&(t=t.id),e.find(n=>n.id===t)||null),Jh=e=>{if(mt(e))return e;if(/:/.test(e)){const t=e.split(":");return t[1]/t[0]}return parseFloat(e)},et=e=>e.filter(t=>!t.archived),Iv={EMPTY:0,IDLE:1,ERROR:2,BUSY:3,READY:4};let _i=null;const vv=()=>{if(_i===null)try{const e=new DataTransfer;e.items.add(new File(["hello world"],"This_Works.txt"));const t=document.createElement("input");t.setAttribute("type","file"),t.files=e.files,_i=t.files.length===1}catch{_i=!1}return _i},_v=[Z.LOAD_ERROR,Z.PROCESSING_ERROR,Z.PROCESSING_REVERT_ERROR],Cv=[Z.LOADING,Z.PROCESSING,Z.PROCESSING_QUEUED,Z.INIT],Sv=[Z.PROCESSING_COMPLETE],Av=e=>_v.includes(e.status),Rv=e=>Cv.includes(e.status),wv=e=>Sv.includes(e.status),ac=e=>_e(e.options.server)&&(_e(e.options.server.process)||Ft(e.options.server.process)),Mv=e=>({GET_STATUS:()=>{const t=et(e.items),{EMPTY:n,ERROR:i,BUSY:o,IDLE:s,READY:r}=Iv;return t.length===0?n:t.some(Av)?i:t.some(Rv)?o:t.some(wv)?r:s},GET_ITEM:t=>kt(e.items,t),GET_ACTIVE_ITEM:t=>kt(et(e.items),t),GET_ACTIVE_ITEMS:()=>et(e.items),GET_ITEMS:()=>e.items,GET_ITEM_NAME:t=>{const n=kt(e.items,t);return n?n.filename:null},GET_ITEM_SIZE:t=>{const n=kt(e.items,t);return n?n.fileSize:null},GET_STYLES:()=>Object.keys(e.options).filter(t=>/^style/.test(t)).map(t=>({name:t,value:e.options[t]})),GET_PANEL_ASPECT_RATIO:()=>/circle/.test(e.options.stylePanelLayout)?1:Jh(e.options.stylePanelAspectRatio),GET_ITEM_PANEL_ASPECT_RATIO:()=>e.options.styleItemPanelAspectRatio,GET_ITEMS_BY_STATUS:t=>et(e.items).filter(n=>n.status===t),GET_TOTAL_ITEMS:()=>et(e.items).length,SHOULD_UPDATE_FILE_INPUT:()=>e.options.storeAsFile&&vv()&&!ac(e),IS_ASYNC:()=>ac(e),GET_FILE_SIZE_LABELS:t=>({labelBytes:t("GET_LABEL_FILE_SIZE_BYTES")||void 0,labelKilobytes:t("GET_LABEL_FILE_SIZE_KILOBYTES")||void 0,labelMegabytes:t("GET_LABEL_FILE_SIZE_MEGABYTES")||void 0,labelGigabytes:t("GET_LABEL_FILE_SIZE_GIGABYTES")||void 0})}),Pv=e=>{const t=et(e.items).length;if(!e.options.allowMultiple)return t===0;const n=e.options.maxFiles;return n===null||t<n},Kh=(e,t,n)=>Math.max(Math.min(n,e),t),Dv=(e,t,n)=>e.splice(t,0,n),bv=(e,t,n)=>mt(t)?null:typeof n>"u"?(e.push(t),t):(n=Kh(n,0,e.length),Dv(e,n,t),t),Ws=e=>/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i.test(e),mi=e=>`${e}`.split("/").pop().split("?").shift(),Po=e=>e.split(".").pop(),xv=e=>{if(typeof e!="string")return"";const t=e.split("/").pop();return/svg/.test(t)?"svg":/zip|compressed/.test(t)?"zip":/plain/.test(t)?"txt":/msword/.test(t)?"doc":/[a-z]+/.test(t)?t==="jpeg"?"jpg":t:""},kn=(e,t="")=>(t+e).slice(-t.length),Xh=(e=new Date)=>`${e.getFullYear()}-${kn(e.getMonth()+1,"00")}-${kn(e.getDate(),"00")}_${kn(e.getHours(),"00")}-${kn(e.getMinutes(),"00")}-${kn(e.getSeconds(),"00")}`,Tn=(e,t,n=null,i=null)=>{const o=typeof n=="string"?e.slice(0,e.size,n):e.slice(0,e.size,e.type);return o.lastModifiedDate=new Date,e._relativePath&&(o._relativePath=e._relativePath),xe(t)||(t=Xh()),t&&i===null&&Po(t)?o.name=t:(i=i||xv(o.type),o.name=t+(i?"."+i:"")),o},Nv=()=>window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,Zh=(e,t)=>{const n=Nv();if(n){const i=new n;return i.append(e),i.getBlob(t)}return new Blob([e],{type:t})},Lv=(e,t)=>{const n=new ArrayBuffer(e.length),i=new Uint8Array(n);for(let o=0;o<e.length;o++)i[o]=e.charCodeAt(o);return Zh(n,t)},Qh=e=>(/^data:(.+);/.exec(e)||[])[1]||null,Ov=e=>e.split(",")[1].replace(/\s/g,""),Fv=e=>atob(Ov(e)),kv=e=>{const t=Qh(e),n=Fv(e);return Lv(n,t)},Vv=(e,t,n)=>Tn(kv(e),t,null,n),Uv=e=>{if(!/^content-disposition:/i.test(e))return null;const t=e.split(/filename=|filename\*=.+''/).splice(1).map(n=>n.trim().replace(/^["']|[;"']{0,2}$/g,"")).filter(n=>n.length);return t.length?decodeURI(t[t.length-1]):null},Gv=e=>{if(/content-length:/i.test(e)){const t=e.match(/[0-9]+/)[0];return t?parseInt(t,10):null}return null},Bv=e=>/x-content-transfer-id:/i.test(e)&&(e.split(":")[1]||"").trim()||null,ea=e=>{const t={source:null,name:null,size:null},n=e.split(`
`);for(let i of n){const o=Uv(i);if(o){t.name=o;continue}const s=Gv(i);if(s){t.size=s;continue}const r=Bv(i);if(r){t.source=r;continue}}return t},Hv=e=>{const t={source:null,complete:!1,progress:0,size:null,timestamp:null,duration:0,request:null},n=()=>t.progress,i=()=>{t.request&&t.request.abort&&t.request.abort()},o=()=>{const a=t.source;r.fire("init",a),a instanceof File?r.fire("load",a):a instanceof Blob?r.fire("load",Tn(a,a.name)):Ws(a)?r.fire("load",Vv(a)):s(a)},s=a=>{if(!e){r.fire("error",{type:"error",body:"Can't load URL",code:400});return}t.timestamp=Date.now(),t.request=e(a,c=>{t.duration=Date.now()-t.timestamp,t.complete=!0,c instanceof Blob&&(c=Tn(c,c.name||mi(a))),r.fire("load",c instanceof Blob?c:c?c.body:null)},c=>{r.fire("error",typeof c=="string"?{type:"error",code:0,body:c}:c)},(c,l,d)=>{if(d&&(t.size=d),t.duration=Date.now()-t.timestamp,!c){t.progress=null;return}t.progress=l/d,r.fire("progress",t.progress)},()=>{r.fire("abort")},c=>{const l=ea(typeof c=="string"?c:c.headers);r.fire("meta",{size:t.size||l.size,filename:l.name,source:l.source})})},r={...Mo(),setSource:a=>t.source=a,getProgress:n,abort:i,load:o};return r},lc=e=>/GET|HEAD/.test(e),Bt=(e,t,n)=>{const i={onheaders:()=>{},onprogress:()=>{},onload:()=>{},ontimeout:()=>{},onerror:()=>{},onabort:()=>{},abort:()=>{o=!0,r.abort()}};let o=!1,s=!1;n={method:"POST",headers:{},withCredentials:!1,...n},t=encodeURI(t),lc(n.method)&&e&&(t=`${t}${encodeURIComponent(typeof e=="string"?e:JSON.stringify(e))}`);const r=new XMLHttpRequest,a=lc(n.method)?r:r.upload;return a.onprogress=c=>{o||i.onprogress(c.lengthComputable,c.loaded,c.total)},r.onreadystatechange=()=>{r.readyState<2||r.readyState===4&&r.status===0||s||(s=!0,i.onheaders(r))},r.onload=()=>{r.status>=200&&r.status<300?i.onload(r):i.onerror(r)},r.onerror=()=>i.onerror(r),r.onabort=()=>{o=!0,i.onabort()},r.ontimeout=()=>i.ontimeout(r),r.open(n.method,t,!0),wn(n.timeout)&&(r.timeout=n.timeout),Object.keys(n.headers).forEach(c=>{const l=unescape(encodeURIComponent(n.headers[c]));r.setRequestHeader(c,l)}),n.responseType&&(r.responseType=n.responseType),n.withCredentials&&(r.withCredentials=!0),r.send(e),i},de=(e,t,n,i)=>({type:e,code:t,body:n,headers:i}),Ht=e=>t=>{e(de("error",0,"Timeout",t.getAllResponseHeaders()))},cc=e=>/\?/.test(e),Jn=(...e)=>{let t="";return e.forEach(n=>{t+=cc(t)&&cc(n)?n.replace(/\?/,"&"):n}),t},rs=(e="",t)=>{if(typeof t=="function")return t;if(!t||!xe(t.url))return null;const n=t.onload||(o=>o),i=t.onerror||(o=>null);return(o,s,r,a,c,l)=>{const d=Bt(o,Jn(e,t.url),{...t,responseType:"blob"});return d.onload=h=>{const p=h.getAllResponseHeaders(),m=ea(p).name||mi(o);s(de("load",h.status,t.method==="HEAD"?null:Tn(n(h.response),m),p))},d.onerror=h=>{r(de("error",h.status,i(h.response)||h.statusText,h.getAllResponseHeaders()))},d.onheaders=h=>{l(de("headers",h.status,null,h.getAllResponseHeaders()))},d.ontimeout=Ht(r),d.onprogress=a,d.onabort=c,d}},Be={QUEUED:0,COMPLETE:1,PROCESSING:2,ERROR:3,WAITING:4},qv=(e,t,n,i,o,s,r,a,c,l,d)=>{const h=[],{chunkTransferId:p,chunkServer:m,chunkSize:g,chunkRetryDelays:y}=d,E={serverId:p,aborted:!1},v=t.ondata||(x=>x),T=t.onload||((x,k)=>k==="HEAD"?x.getResponseHeader("Upload-Offset"):x.response),I=t.onerror||(x=>null),S=x=>{const k=new FormData;_e(o)&&k.append(n,JSON.stringify(o));const w=typeof t.headers=="function"?t.headers(i,o):{...t.headers,"Upload-Length":i.size},M={...t,headers:w},L=Bt(v(k),Jn(e,t.url),M);L.onload=O=>x(T(O,M.method)),L.onerror=O=>r(de("error",O.status,I(O.response)||O.statusText,O.getAllResponseHeaders())),L.ontimeout=Ht(r)},A=x=>{const k=Jn(e,m.url,E.serverId),M={headers:typeof t.headers=="function"?t.headers(E.serverId):{...t.headers},method:"HEAD"},L=Bt(null,k,M);L.onload=O=>x(T(O,M.method)),L.onerror=O=>r(de("error",O.status,I(O.response)||O.statusText,O.getAllResponseHeaders())),L.ontimeout=Ht(r)},P=Math.floor(i.size/g);for(let x=0;x<=P;x++){const k=x*g,w=i.slice(k,k+g,"application/offset+octet-stream");h[x]={index:x,size:w.size,offset:k,data:w,file:i,progress:0,retries:[...y],status:Be.QUEUED,error:null,request:null,timeout:null}}const D=()=>s(E.serverId),R=x=>x.status===Be.QUEUED||x.status===Be.ERROR,C=x=>{if(E.aborted)return;if(x=x||h.find(R),!x){h.every(U=>U.status===Be.COMPLETE)&&D();return}x.status=Be.PROCESSING,x.progress=null;const k=m.ondata||(U=>U),w=m.onerror||(U=>null),M=Jn(e,m.url,E.serverId),L=typeof m.headers=="function"?m.headers(x):{...m.headers,"Content-Type":"application/offset+octet-stream","Upload-Offset":x.offset,"Upload-Length":i.size,"Upload-Name":i.name},O=x.request=Bt(k(x.data),M,{...m,headers:L});O.onload=()=>{x.status=Be.COMPLETE,x.request=null,N()},O.onprogress=(U,B,$)=>{x.progress=U?B:null,b()},O.onerror=U=>{x.status=Be.ERROR,x.request=null,x.error=w(U.response)||U.statusText,_(x)||r(de("error",U.status,w(U.response)||U.statusText,U.getAllResponseHeaders()))},O.ontimeout=U=>{x.status=Be.ERROR,x.request=null,_(x)||Ht(r)(U)},O.onabort=()=>{x.status=Be.QUEUED,x.request=null,c()}},_=x=>x.retries.length===0?!1:(x.status=Be.WAITING,clearTimeout(x.timeout),x.timeout=setTimeout(()=>{C(x)},x.retries.shift()),!0),b=()=>{const x=h.reduce((w,M)=>w===null||M.progress===null?null:w+M.progress,0);if(x===null)return a(!1,0,0);const k=h.reduce((w,M)=>w+M.size,0);a(!0,x,k)},N=()=>{h.filter(k=>k.status===Be.PROCESSING).length>=1||C()},F=()=>{h.forEach(x=>{clearTimeout(x.timeout),x.request&&x.request.abort()})};return E.serverId?A(x=>{E.aborted||(h.filter(k=>k.offset<x).forEach(k=>{k.status=Be.COMPLETE,k.progress=k.size}),N())}):S(x=>{E.aborted||(l(x),E.serverId=x,N())}),{abort:()=>{E.aborted=!0,F()}}},Wv=(e,t,n,i)=>(o,s,r,a,c,l,d)=>{if(!o)return;const h=i.chunkUploads,p=h&&o.size>i.chunkSize,m=h&&(p||i.chunkForce);if(o instanceof Blob&&m)return qv(e,t,n,o,s,r,a,c,l,d,i);const g=t.ondata||(A=>A),y=t.onload||(A=>A),E=t.onerror||(A=>null),v=typeof t.headers=="function"?t.headers(o,s)||{}:{...t.headers},T={...t,headers:v};var I=new FormData;_e(s)&&I.append(n,JSON.stringify(s)),(o instanceof Blob?[{name:null,file:o}]:o).forEach(A=>{I.append(n,A.file,A.name===null?A.file.name:`${A.name}${A.file.name}`)});const S=Bt(g(I),Jn(e,t.url),T);return S.onload=A=>{r(de("load",A.status,y(A.response),A.getAllResponseHeaders()))},S.onerror=A=>{a(de("error",A.status,E(A.response)||A.statusText,A.getAllResponseHeaders()))},S.ontimeout=Ht(a),S.onprogress=c,S.onabort=l,S},$v=(e="",t,n,i)=>typeof t=="function"?(...o)=>t(n,...o,i):!t||!xe(t.url)?null:Wv(e,t,n,i),Vn=(e="",t)=>{if(typeof t=="function")return t;if(!t||!xe(t.url))return(o,s)=>s();const n=t.onload||(o=>o),i=t.onerror||(o=>null);return(o,s,r)=>{const a=Bt(o,e+t.url,t);return a.onload=c=>{s(de("load",c.status,n(c.response),c.getAllResponseHeaders()))},a.onerror=c=>{r(de("error",c.status,i(c.response)||c.statusText,c.getAllResponseHeaders()))},a.ontimeout=Ht(r),a}},jh=(e=0,t=1)=>e+Math.random()*(t-e),Yv=(e,t=1e3,n=0,i=25,o=250)=>{let s=null;const r=Date.now(),a=()=>{let c=Date.now()-r,l=jh(i,o);c+l>t&&(l=c+l-t);let d=c/t;if(d>=1||document.hidden){e(1);return}e(d),s=setTimeout(a,l)};return t>0&&a(),{clear:()=>{clearTimeout(s)}}},zv=(e,t)=>{const n={complete:!1,perceivedProgress:0,perceivedPerformanceUpdater:null,progress:null,timestamp:null,perceivedDuration:0,duration:0,request:null,response:null},{allowMinimumUploadDuration:i}=t,o=(d,h)=>{const p=()=>{n.duration===0||n.progress===null||l.fire("progress",l.getProgress())},m=()=>{n.complete=!0,l.fire("load-perceived",n.response.body)};l.fire("start"),n.timestamp=Date.now(),n.perceivedPerformanceUpdater=Yv(g=>{n.perceivedProgress=g,n.perceivedDuration=Date.now()-n.timestamp,p(),n.response&&n.perceivedProgress===1&&!n.complete&&m()},i?jh(750,1500):0),n.request=e(d,h,g=>{n.response=_e(g)?g:{type:"load",code:200,body:`${g}`,headers:{}},n.duration=Date.now()-n.timestamp,n.progress=1,l.fire("load",n.response.body),(!i||i&&n.perceivedProgress===1)&&m()},g=>{n.perceivedPerformanceUpdater.clear(),l.fire("error",_e(g)?g:{type:"error",code:0,body:`${g}`})},(g,y,E)=>{n.duration=Date.now()-n.timestamp,n.progress=g?y/E:null,p()},()=>{n.perceivedPerformanceUpdater.clear(),l.fire("abort",n.response?n.response.body:null)},g=>{l.fire("transfer",g)})},s=()=>{n.request&&(n.perceivedPerformanceUpdater.clear(),n.request.abort&&n.request.abort(),n.complete=!0)},r=()=>{s(),n.complete=!1,n.perceivedProgress=0,n.progress=0,n.timestamp=null,n.perceivedDuration=0,n.duration=0,n.request=null,n.response=null},a=i?()=>n.progress?Math.min(n.progress,n.perceivedProgress):null:()=>n.progress||null,c=i?()=>Math.min(n.duration,n.perceivedDuration):()=>n.duration,l={...Mo(),process:o,abort:s,getProgress:a,getDuration:c,reset:r};return l},ep=e=>e.substring(0,e.lastIndexOf("."))||e,Jv=e=>{let t=[e.name,e.size,e.type];return e instanceof Blob||Ws(e)?t[0]=e.name||Xh():Ws(e)?(t[1]=e.length,t[2]=Qh(e)):xe(e)&&(t[0]=mi(e),t[1]=0,t[2]="application/octet-stream"),{name:t[0],size:t[1],type:t[2]}},In=e=>!!(e instanceof File||e instanceof Blob&&e.name),tp=e=>{if(!_e(e))return e;const t=Ao(e)?[]:{};for(const n in e){if(!e.hasOwnProperty(n))continue;const i=e[n];t[n]=i&&_e(i)?tp(i):i}return t},Kv=(e=null,t=null,n=null)=>{const i=Zr(),o={archived:!1,frozen:!1,released:!1,source:null,file:n,serverFileReference:t,transferId:null,processingAborted:!1,status:t?Z.PROCESSING_COMPLETE:Z.INIT,activeLoader:null,activeProcessor:null};let s=null;const r={},a=R=>o.status=R,c=(R,...C)=>{o.released||o.frozen||P.fire(R,...C)},l=()=>Po(o.file.name),d=()=>o.file.type,h=()=>o.file.size,p=()=>o.file,m=(R,C,_)=>{if(o.source=R,P.fireSync("init"),o.file){P.fireSync("load-skip");return}o.file=Jv(R),C.on("init",()=>{c("load-init")}),C.on("meta",b=>{o.file.size=b.size,o.file.filename=b.filename,b.source&&(e=Te.LIMBO,o.serverFileReference=b.source,o.status=Z.PROCESSING_COMPLETE),c("load-meta")}),C.on("progress",b=>{a(Z.LOADING),c("load-progress",b)}),C.on("error",b=>{a(Z.LOAD_ERROR),c("load-request-error",b)}),C.on("abort",()=>{a(Z.INIT),c("load-abort")}),C.on("load",b=>{o.activeLoader=null;const N=x=>{o.file=In(x)?x:o.file,e===Te.LIMBO&&o.serverFileReference?a(Z.PROCESSING_COMPLETE):a(Z.IDLE),c("load")},F=x=>{o.file=b,c("load-meta"),a(Z.LOAD_ERROR),c("load-file-error",x)};if(o.serverFileReference){N(b);return}_(b,N,F)}),C.setSource(R),o.activeLoader=C,C.load()},g=()=>{o.activeLoader&&o.activeLoader.load()},y=()=>{if(o.activeLoader){o.activeLoader.abort();return}a(Z.INIT),c("load-abort")},E=(R,C)=>{if(o.processingAborted){o.processingAborted=!1;return}if(a(Z.PROCESSING),s=null,!(o.file instanceof Blob)){P.on("load",()=>{E(R,C)});return}R.on("load",N=>{o.transferId=null,o.serverFileReference=N}),R.on("transfer",N=>{o.transferId=N}),R.on("load-perceived",N=>{o.activeProcessor=null,o.transferId=null,o.serverFileReference=N,a(Z.PROCESSING_COMPLETE),c("process-complete",N)}),R.on("start",()=>{c("process-start")}),R.on("error",N=>{o.activeProcessor=null,a(Z.PROCESSING_ERROR),c("process-error",N)}),R.on("abort",N=>{o.activeProcessor=null,o.serverFileReference=N,a(Z.IDLE),c("process-abort"),s&&s()}),R.on("progress",N=>{c("process-progress",N)});const _=N=>{o.archived||R.process(N,{...r})},b=console.error;C(o.file,_,b),o.activeProcessor=R},v=()=>{o.processingAborted=!1,a(Z.PROCESSING_QUEUED)},T=()=>new Promise(R=>{if(!o.activeProcessor){o.processingAborted=!0,a(Z.IDLE),c("process-abort"),R();return}s=()=>{R()},o.activeProcessor.abort()}),I=(R,C)=>new Promise((_,b)=>{const N=o.serverFileReference!==null?o.serverFileReference:o.transferId;if(N===null){_();return}R(N,()=>{o.serverFileReference=null,o.transferId=null,_()},F=>{if(!C){_();return}a(Z.PROCESSING_REVERT_ERROR),c("process-revert-error"),b(F)}),a(Z.IDLE),c("process-revert")}),S=(R,C,_)=>{const b=R.split("."),N=b[0],F=b.pop();let x=r;b.forEach(k=>x=x[k]),JSON.stringify(x[F])!==JSON.stringify(C)&&(x[F]=C,c("metadata-update",{key:N,value:r[N],silent:_}))},P={id:{get:()=>i},origin:{get:()=>e,set:R=>e=R},serverId:{get:()=>o.serverFileReference},transferId:{get:()=>o.transferId},status:{get:()=>o.status},filename:{get:()=>o.file.name},filenameWithoutExtension:{get:()=>ep(o.file.name)},fileExtension:{get:l},fileType:{get:d},fileSize:{get:h},file:{get:p},relativePath:{get:()=>o.file._relativePath},source:{get:()=>o.source},getMetadata:R=>tp(R?r[R]:r),setMetadata:(R,C,_)=>{if(_e(R)){const b=R;return Object.keys(b).forEach(N=>{S(N,b[N],C)}),R}return S(R,C,_),C},extend:(R,C)=>D[R]=C,abortLoad:y,retryLoad:g,requestProcessing:v,abortProcessing:T,load:m,process:E,revert:I,...Mo(),freeze:()=>o.frozen=!0,release:()=>o.released=!0,released:{get:()=>o.released},archive:()=>o.archived=!0,archived:{get:()=>o.archived}},D=Rt(P);return D},Xv=(e,t)=>mt(t)?0:xe(t)?e.findIndex(n=>n.id===t):-1,uc=(e,t)=>{const n=Xv(e,t);if(!(n<0))return e[n]||null},dc=(e,t,n,i,o,s)=>{const r=Bt(null,e,{method:"GET",responseType:"blob"});return r.onload=a=>{const c=a.getAllResponseHeaders(),l=ea(c).name||mi(e);t(de("load",a.status,Tn(a.response,l),c))},r.onerror=a=>{n(de("error",a.status,a.statusText,a.getAllResponseHeaders()))},r.onheaders=a=>{s(de("headers",a.status,null,a.getAllResponseHeaders()))},r.ontimeout=Ht(n),r.onprogress=i,r.onabort=o,r},fc=e=>(e.indexOf("//")===0&&(e=location.protocol+e),e.toLowerCase().replace("blob:","").replace(/([a-z])?:\/\//,"$1").split("/")[0]),Zv=e=>(e.indexOf(":")>-1||e.indexOf("//")>-1)&&fc(location.href)!==fc(e),Ci=e=>(...t)=>Ft(e)?e(...t):e,Qv=e=>!In(e.file),as=(e,t)=>{clearTimeout(t.listUpdateTimeout),t.listUpdateTimeout=setTimeout(()=>{e("DID_UPDATE_ITEMS",{items:et(t.items)})},0)},hc=(e,...t)=>new Promise(n=>{if(!e)return n(!0);const i=e(...t);if(i==null)return n(!0);if(typeof i=="boolean")return n(i);typeof i.then=="function"&&i.then(n)}),ls=(e,t)=>{e.items.sort((n,i)=>t(Fe(n),Fe(i)))},He=(e,t)=>({query:n,success:i=()=>{},failure:o=()=>{},...s}={})=>{const r=kt(e.items,n);if(!r){o({error:de("error",0,"Item not found"),file:null});return}t(r,i,o,s||{})},jv=(e,t,n)=>({ABORT_ALL:()=>{et(n.items).forEach(i=>{i.freeze(),i.abortLoad(),i.abortProcessing()})},DID_SET_FILES:({value:i=[]})=>{const o=i.map(r=>({source:r.source?r.source:r,options:r.options}));let s=et(n.items);s.forEach(r=>{o.find(a=>a.source===r.source||a.source===r.file)||e("REMOVE_ITEM",{query:r,remove:!1})}),s=et(n.items),o.forEach((r,a)=>{s.find(c=>c.source===r.source||c.file===r.source)||e("ADD_ITEM",{...r,interactionMethod:ze.NONE,index:a})})},DID_UPDATE_ITEM_METADATA:({id:i,action:o,change:s})=>{s.silent||(clearTimeout(n.itemUpdateTimeout),n.itemUpdateTimeout=setTimeout(()=>{const r=uc(n.items,i);if(!t("IS_ASYNC")){je("SHOULD_PREPARE_OUTPUT",!1,{item:r,query:t,action:o,change:s}).then(d=>{const h=t("GET_BEFORE_PREPARE_FILE");h&&(d=h(r,d)),d&&e("REQUEST_PREPARE_OUTPUT",{query:i,item:r,success:p=>{e("DID_PREPARE_OUTPUT",{id:i,file:p})}},!0)});return}r.origin===Te.LOCAL&&e("DID_LOAD_ITEM",{id:r.id,error:null,serverFileReference:r.source});const a=()=>{setTimeout(()=>{e("REQUEST_ITEM_PROCESSING",{query:i})},32)},c=d=>{r.revert(Vn(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")).then(d?a:()=>{}).catch(()=>{})},l=d=>{r.abortProcessing().then(d?a:()=>{})};if(r.status===Z.PROCESSING_COMPLETE)return c(n.options.instantUpload);if(r.status===Z.PROCESSING)return l(n.options.instantUpload);n.options.instantUpload&&a()},0))},MOVE_ITEM:({query:i,index:o})=>{const s=kt(n.items,i);if(!s)return;const r=n.items.indexOf(s);o=Kh(o,0,n.items.length-1),r!==o&&n.items.splice(o,0,n.items.splice(r,1)[0])},SORT:({compare:i})=>{ls(n,i),e("DID_SORT_ITEMS",{items:t("GET_ACTIVE_ITEMS")})},ADD_ITEMS:({items:i,index:o,interactionMethod:s,success:r=()=>{},failure:a=()=>{}})=>{let c=o;if(o===-1||typeof o>"u"){const m=t("GET_ITEM_INSERT_LOCATION"),g=t("GET_TOTAL_ITEMS");c=m==="before"?0:g}const l=t("GET_IGNORED_FILES"),d=m=>In(m)?!l.includes(m.name.toLowerCase()):!mt(m),p=i.filter(d).map(m=>new Promise((g,y)=>{e("ADD_ITEM",{interactionMethod:s,source:m.source||m,success:g,failure:y,index:c++,options:m.options||{}})}));Promise.all(p).then(r).catch(a)},ADD_ITEM:({source:i,index:o=-1,interactionMethod:s,success:r=()=>{},failure:a=()=>{},options:c={}})=>{if(mt(i)){a({error:de("error",0,"No source"),file:null});return}if(In(i)&&n.options.ignoredFiles.includes(i.name.toLowerCase()))return;if(!Pv(n)){if(n.options.allowMultiple||!n.options.allowMultiple&&!n.options.allowReplace){const T=de("warning",0,"Max files");e("DID_THROW_MAX_FILES",{source:i,error:T}),a({error:T,file:null});return}const v=et(n.items)[0];if(v.status===Z.PROCESSING_COMPLETE||v.status===Z.PROCESSING_REVERT_ERROR){const T=t("GET_FORCE_REVERT");if(v.revert(Vn(n.options.server.url,n.options.server.revert),T).then(()=>{T&&e("ADD_ITEM",{source:i,index:o,interactionMethod:s,success:r,failure:a,options:c})}).catch(()=>{}),T)return}e("REMOVE_ITEM",{query:v.id})}const l=c.type==="local"?Te.LOCAL:c.type==="limbo"?Te.LIMBO:Te.INPUT,d=Kv(l,l===Te.INPUT?null:i,c.file);Object.keys(c.metadata||{}).forEach(v=>{d.setMetadata(v,c.metadata[v])}),$t("DID_CREATE_ITEM",d,{query:t,dispatch:e});const h=t("GET_ITEM_INSERT_LOCATION");n.options.itemInsertLocationFreedom||(o=h==="before"?-1:n.items.length),bv(n.items,d,o),Ft(h)&&i&&ls(n,h);const p=d.id;d.on("init",()=>{e("DID_INIT_ITEM",{id:p})}),d.on("load-init",()=>{e("DID_START_ITEM_LOAD",{id:p})}),d.on("load-meta",()=>{e("DID_UPDATE_ITEM_META",{id:p})}),d.on("load-progress",v=>{e("DID_UPDATE_ITEM_LOAD_PROGRESS",{id:p,progress:v})}),d.on("load-request-error",v=>{const T=Ci(n.options.labelFileLoadError)(v);if(v.code>=400&&v.code<500){e("DID_THROW_ITEM_INVALID",{id:p,error:v,status:{main:T,sub:`${v.code} (${v.body})`}}),a({error:v,file:Fe(d)});return}e("DID_THROW_ITEM_LOAD_ERROR",{id:p,error:v,status:{main:T,sub:n.options.labelTapToRetry}})}),d.on("load-file-error",v=>{e("DID_THROW_ITEM_INVALID",{id:p,error:v.status,status:v.status}),a({error:v.status,file:Fe(d)})}),d.on("load-abort",()=>{e("REMOVE_ITEM",{query:p})}),d.on("load-skip",()=>{e("COMPLETE_LOAD_ITEM",{query:p,item:d,data:{source:i,success:r}})}),d.on("load",()=>{const v=T=>{if(!T){e("REMOVE_ITEM",{query:p});return}d.on("metadata-update",I=>{e("DID_UPDATE_ITEM_METADATA",{id:p,change:I})}),je("SHOULD_PREPARE_OUTPUT",!1,{item:d,query:t}).then(I=>{const S=t("GET_BEFORE_PREPARE_FILE");S&&(I=S(d,I));const A=()=>{e("COMPLETE_LOAD_ITEM",{query:p,item:d,data:{source:i,success:r}}),as(e,n)};if(I){e("REQUEST_PREPARE_OUTPUT",{query:p,item:d,success:P=>{e("DID_PREPARE_OUTPUT",{id:p,file:P}),A()}},!0);return}A()})};je("DID_LOAD_ITEM",d,{query:t,dispatch:e}).then(()=>{hc(t("GET_BEFORE_ADD_FILE"),Fe(d)).then(v)}).catch(T=>{if(!T||!T.error||!T.status)return v(!1);e("DID_THROW_ITEM_INVALID",{id:p,error:T.error,status:T.status})})}),d.on("process-start",()=>{e("DID_START_ITEM_PROCESSING",{id:p})}),d.on("process-progress",v=>{e("DID_UPDATE_ITEM_PROCESS_PROGRESS",{id:p,progress:v})}),d.on("process-error",v=>{e("DID_THROW_ITEM_PROCESSING_ERROR",{id:p,error:v,status:{main:Ci(n.options.labelFileProcessingError)(v),sub:n.options.labelTapToRetry}})}),d.on("process-revert-error",v=>{e("DID_THROW_ITEM_PROCESSING_REVERT_ERROR",{id:p,error:v,status:{main:Ci(n.options.labelFileProcessingRevertError)(v),sub:n.options.labelTapToRetry}})}),d.on("process-complete",v=>{e("DID_COMPLETE_ITEM_PROCESSING",{id:p,error:null,serverFileReference:v}),e("DID_DEFINE_VALUE",{id:p,value:v})}),d.on("process-abort",()=>{e("DID_ABORT_ITEM_PROCESSING",{id:p})}),d.on("process-revert",()=>{e("DID_REVERT_ITEM_PROCESSING",{id:p}),e("DID_DEFINE_VALUE",{id:p,value:null})}),e("DID_ADD_ITEM",{id:p,index:o,interactionMethod:s}),as(e,n);const{url:m,load:g,restore:y,fetch:E}=n.options.server||{};d.load(i,Hv(l===Te.INPUT?xe(i)&&Zv(i)&&E?rs(m,E):dc:l===Te.LIMBO?rs(m,y):rs(m,g)),(v,T,I)=>{je("LOAD_FILE",v,{query:t}).then(T).catch(I)})},REQUEST_PREPARE_OUTPUT:({item:i,success:o,failure:s=()=>{}})=>{const r={error:de("error",0,"Item not found"),file:null};if(i.archived)return s(r);je("PREPARE_OUTPUT",i.file,{query:t,item:i}).then(a=>{je("COMPLETE_PREPARE_OUTPUT",a,{query:t,item:i}).then(c=>{if(i.archived)return s(r);o(c)})})},COMPLETE_LOAD_ITEM:({item:i,data:o})=>{const{success:s,source:r}=o,a=t("GET_ITEM_INSERT_LOCATION");if(Ft(a)&&r&&ls(n,a),e("DID_LOAD_ITEM",{id:i.id,error:null,serverFileReference:i.origin===Te.INPUT?null:r}),s(Fe(i)),i.origin===Te.LOCAL){e("DID_LOAD_LOCAL_ITEM",{id:i.id});return}if(i.origin===Te.LIMBO){e("DID_COMPLETE_ITEM_PROCESSING",{id:i.id,error:null,serverFileReference:r}),e("DID_DEFINE_VALUE",{id:i.id,value:i.serverId||r});return}t("IS_ASYNC")&&n.options.instantUpload&&e("REQUEST_ITEM_PROCESSING",{query:i.id})},RETRY_ITEM_LOAD:He(n,i=>{i.retryLoad()}),REQUEST_ITEM_PREPARE:He(n,(i,o,s)=>{e("REQUEST_PREPARE_OUTPUT",{query:i.id,item:i,success:r=>{e("DID_PREPARE_OUTPUT",{id:i.id,file:r}),o({file:i,output:r})},failure:s},!0)}),REQUEST_ITEM_PROCESSING:He(n,(i,o,s)=>{if(!(i.status===Z.IDLE||i.status===Z.PROCESSING_ERROR)){const a=()=>e("REQUEST_ITEM_PROCESSING",{query:i,success:o,failure:s}),c=()=>document.hidden?a():setTimeout(a,32);i.status===Z.PROCESSING_COMPLETE||i.status===Z.PROCESSING_REVERT_ERROR?i.revert(Vn(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")).then(c).catch(()=>{}):i.status===Z.PROCESSING&&i.abortProcessing().then(c);return}i.status!==Z.PROCESSING_QUEUED&&(i.requestProcessing(),e("DID_REQUEST_ITEM_PROCESSING",{id:i.id}),e("PROCESS_ITEM",{query:i,success:o,failure:s},!0))}),PROCESS_ITEM:He(n,(i,o,s)=>{const r=t("GET_MAX_PARALLEL_UPLOADS");if(t("GET_ITEMS_BY_STATUS",Z.PROCESSING).length===r){n.processingQueue.push({id:i.id,success:o,failure:s});return}if(i.status===Z.PROCESSING)return;const c=()=>{const d=n.processingQueue.shift();if(!d)return;const{id:h,success:p,failure:m}=d,g=kt(n.items,h);if(!g||g.archived){c();return}e("PROCESS_ITEM",{query:h,success:p,failure:m},!0)};i.onOnce("process-complete",()=>{o(Fe(i)),c();const d=n.options.server;if(n.options.instantUpload&&i.origin===Te.LOCAL&&Ft(d.remove)){const m=()=>{};i.origin=Te.LIMBO,n.options.server.remove(i.source,m,m)}t("GET_ITEMS_BY_STATUS",Z.PROCESSING_COMPLETE).length===n.items.length&&e("DID_COMPLETE_ITEM_PROCESSING_ALL")}),i.onOnce("process-error",d=>{s({error:d,file:Fe(i)}),c()});const l=n.options;i.process(zv($v(l.server.url,l.server.process,l.name,{chunkTransferId:i.transferId,chunkServer:l.server.patch,chunkUploads:l.chunkUploads,chunkForce:l.chunkForce,chunkSize:l.chunkSize,chunkRetryDelays:l.chunkRetryDelays}),{allowMinimumUploadDuration:t("GET_ALLOW_MINIMUM_UPLOAD_DURATION")}),(d,h,p)=>{je("PREPARE_OUTPUT",d,{query:t,item:i}).then(m=>{e("DID_PREPARE_OUTPUT",{id:i.id,file:m}),h(m)}).catch(p)})}),RETRY_ITEM_PROCESSING:He(n,i=>{e("REQUEST_ITEM_PROCESSING",{query:i})}),REQUEST_REMOVE_ITEM:He(n,i=>{hc(t("GET_BEFORE_REMOVE_FILE"),Fe(i)).then(o=>{o&&e("REMOVE_ITEM",{query:i})})}),RELEASE_ITEM:He(n,i=>{i.release()}),REMOVE_ITEM:He(n,(i,o,s,r)=>{const a=()=>{const l=i.id;uc(n.items,l).archive(),e("DID_REMOVE_ITEM",{error:null,id:l,item:i}),as(e,n),o(Fe(i))},c=n.options.server;i.origin===Te.LOCAL&&c&&Ft(c.remove)&&r.remove!==!1?(e("DID_START_ITEM_REMOVE",{id:i.id}),c.remove(i.source,()=>a(),l=>{e("DID_THROW_ITEM_REMOVE_ERROR",{id:i.id,error:de("error",0,l,null),status:{main:Ci(n.options.labelFileRemoveError)(l),sub:n.options.labelTapToRetry}})})):((r.revert&&i.origin!==Te.LOCAL&&i.serverId!==null||n.options.chunkUploads&&i.file.size>n.options.chunkSize||n.options.chunkUploads&&n.options.chunkForce)&&i.revert(Vn(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")),a())}),ABORT_ITEM_LOAD:He(n,i=>{i.abortLoad()}),ABORT_ITEM_PROCESSING:He(n,i=>{if(i.serverId){e("REVERT_ITEM_PROCESSING",{id:i.id});return}i.abortProcessing().then(()=>{n.options.instantUpload&&e("REMOVE_ITEM",{query:i.id})})}),REQUEST_REVERT_ITEM_PROCESSING:He(n,i=>{if(!n.options.instantUpload){e("REVERT_ITEM_PROCESSING",{query:i});return}const o=a=>{a&&e("REVERT_ITEM_PROCESSING",{query:i})},s=t("GET_BEFORE_REMOVE_FILE");if(!s)return o(!0);const r=s(Fe(i));if(r==null)return o(!0);if(typeof r=="boolean")return o(r);typeof r.then=="function"&&r.then(o)}),REVERT_ITEM_PROCESSING:He(n,i=>{i.revert(Vn(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")).then(()=>{(n.options.instantUpload||Qv(i))&&e("REMOVE_ITEM",{query:i.id})}).catch(()=>{})}),SET_OPTIONS:({options:i})=>{const o=Object.keys(i),s=e_.filter(a=>o.includes(a));[...s,...Object.keys(i).filter(a=>!s.includes(a))].forEach(a=>{e(`SET_${wo(a,"_").toUpperCase()}`,{value:i[a]})})}}),e_=["server"],ta=e=>e,gt=e=>document.createElement(e),fe=(e,t)=>{let n=e.childNodes[0];n?t!==n.nodeValue&&(n.nodeValue=t):(n=document.createTextNode(t),e.appendChild(n))},pc=(e,t,n,i)=>{const o=(i%360-90)*Math.PI/180;return{x:e+n*Math.cos(o),y:t+n*Math.sin(o)}},t_=(e,t,n,i,o,s)=>{const r=pc(e,t,n,o),a=pc(e,t,n,i);return["M",r.x,r.y,"A",n,n,0,s,0,a.x,a.y].join(" ")},n_=(e,t,n,i,o)=>{let s=1;return o>i&&o-i<=.5&&(s=0),i>o&&i-o>=.5&&(s=0),t_(e,t,n,Math.min(.9999,i)*360,Math.min(.9999,o)*360,s)},i_=({root:e,props:t})=>{t.spin=!1,t.progress=0,t.opacity=0;const n=eo("svg");e.ref.path=eo("path",{"stroke-width":2,"stroke-linecap":"round"}),n.appendChild(e.ref.path),e.ref.svg=n,e.appendChild(n)},o_=({root:e,props:t})=>{if(t.opacity===0)return;t.align&&(e.element.dataset.align=t.align);const n=parseInt(ge(e.ref.path,"stroke-width"),10),i=e.rect.element.width*.5;let o=0,s=0;t.spin?(o=0,s=.5):(o=0,s=t.progress);const r=n_(i,i,i-n,o,s);ge(e.ref.path,"d",r),ge(e.ref.path,"stroke-opacity",t.spin||t.progress>0?1:0)},mc=ye({tag:"div",name:"progress-indicator",ignoreRectUpdate:!0,ignoreRect:!0,create:i_,write:o_,mixins:{apis:["progress","spin","align"],styles:["opacity"],animations:{opacity:{type:"tween",duration:500},progress:{type:"spring",stiffness:.95,damping:.65,mass:10}}}}),s_=({root:e,props:t})=>{e.element.innerHTML=(t.icon||"")+`<span>${t.label}</span>`,t.isDisabled=!1},r_=({root:e,props:t})=>{const{isDisabled:n}=t,i=e.query("GET_DISABLED")||t.opacity===0;i&&!n?(t.isDisabled=!0,ge(e.element,"disabled","disabled")):!i&&n&&(t.isDisabled=!1,e.element.removeAttribute("disabled"))},np=ye({tag:"button",attributes:{type:"button"},ignoreRect:!0,ignoreRectUpdate:!0,name:"file-action-button",mixins:{apis:["label"],styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}},listeners:!0},create:s_,write:r_}),ip=(e,t=".",n=1e3,i={})=>{const{labelBytes:o="bytes",labelKilobytes:s="KB",labelMegabytes:r="MB",labelGigabytes:a="GB"}=i;e=Math.round(Math.abs(e));const c=n,l=n*n,d=n*n*n;return e<c?`${e} ${o}`:e<l?`${Math.floor(e/c)} ${s}`:e<d?`${gc(e/l,1,t)} ${r}`:`${gc(e/d,2,t)} ${a}`},gc=(e,t,n)=>e.toFixed(t).split(".").filter(i=>i!=="0").join(n),a_=({root:e,props:t})=>{const n=gt("span");n.className="filepond--file-info-main",ge(n,"aria-hidden","true"),e.appendChild(n),e.ref.fileName=n;const i=gt("span");i.className="filepond--file-info-sub",e.appendChild(i),e.ref.fileSize=i,fe(i,e.query("GET_LABEL_FILE_WAITING_FOR_SIZE")),fe(n,ta(e.query("GET_ITEM_NAME",t.id)))},$s=({root:e,props:t})=>{fe(e.ref.fileSize,ip(e.query("GET_ITEM_SIZE",t.id),".",e.query("GET_FILE_SIZE_BASE"),e.query("GET_FILE_SIZE_LABELS",e.query))),fe(e.ref.fileName,ta(e.query("GET_ITEM_NAME",t.id)))},yc=({root:e,props:t})=>{if(wn(e.query("GET_ITEM_SIZE",t.id))){$s({root:e,props:t});return}fe(e.ref.fileSize,e.query("GET_LABEL_FILE_SIZE_NOT_AVAILABLE"))},l_=ye({name:"file-info",ignoreRect:!0,ignoreRectUpdate:!0,write:Le({DID_LOAD_ITEM:$s,DID_UPDATE_ITEM_META:$s,DID_THROW_ITEM_LOAD_ERROR:yc,DID_THROW_ITEM_INVALID:yc}),didCreateView:e=>{$t("CREATE_VIEW",{...e,view:e})},create:a_,mixins:{styles:["translateX","translateY"],animations:{translateX:"spring",translateY:"spring"}}}),op=e=>Math.round(e*100),c_=({root:e})=>{const t=gt("span");t.className="filepond--file-status-main",e.appendChild(t),e.ref.main=t;const n=gt("span");n.className="filepond--file-status-sub",e.appendChild(n),e.ref.sub=n,sp({root:e,action:{progress:null}})},sp=({root:e,action:t})=>{const n=t.progress===null?e.query("GET_LABEL_FILE_LOADING"):`${e.query("GET_LABEL_FILE_LOADING")} ${op(t.progress)}%`;fe(e.ref.main,n),fe(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},u_=({root:e,action:t})=>{const n=t.progress===null?e.query("GET_LABEL_FILE_PROCESSING"):`${e.query("GET_LABEL_FILE_PROCESSING")} ${op(t.progress)}%`;fe(e.ref.main,n),fe(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},d_=({root:e})=>{fe(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING")),fe(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},f_=({root:e})=>{fe(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING_ABORTED")),fe(e.ref.sub,e.query("GET_LABEL_TAP_TO_RETRY"))},h_=({root:e})=>{fe(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING_COMPLETE")),fe(e.ref.sub,e.query("GET_LABEL_TAP_TO_UNDO"))},Ec=({root:e})=>{fe(e.ref.main,""),fe(e.ref.sub,"")},Un=({root:e,action:t})=>{fe(e.ref.main,t.status.main),fe(e.ref.sub,t.status.sub)},p_=ye({name:"file-status",ignoreRect:!0,ignoreRectUpdate:!0,write:Le({DID_LOAD_ITEM:Ec,DID_REVERT_ITEM_PROCESSING:Ec,DID_REQUEST_ITEM_PROCESSING:d_,DID_ABORT_ITEM_PROCESSING:f_,DID_COMPLETE_ITEM_PROCESSING:h_,DID_UPDATE_ITEM_PROCESS_PROGRESS:u_,DID_UPDATE_ITEM_LOAD_PROGRESS:sp,DID_THROW_ITEM_LOAD_ERROR:Un,DID_THROW_ITEM_INVALID:Un,DID_THROW_ITEM_PROCESSING_ERROR:Un,DID_THROW_ITEM_PROCESSING_REVERT_ERROR:Un,DID_THROW_ITEM_REMOVE_ERROR:Un}),didCreateView:e=>{$t("CREATE_VIEW",{...e,view:e})},create:c_,mixins:{styles:["translateX","translateY","opacity"],animations:{opacity:{type:"tween",duration:250},translateX:"spring",translateY:"spring"}}}),Ys={AbortItemLoad:{label:"GET_LABEL_BUTTON_ABORT_ITEM_LOAD",action:"ABORT_ITEM_LOAD",className:"filepond--action-abort-item-load",align:"LOAD_INDICATOR_POSITION"},RetryItemLoad:{label:"GET_LABEL_BUTTON_RETRY_ITEM_LOAD",action:"RETRY_ITEM_LOAD",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-load",align:"BUTTON_PROCESS_ITEM_POSITION"},RemoveItem:{label:"GET_LABEL_BUTTON_REMOVE_ITEM",action:"REQUEST_REMOVE_ITEM",icon:"GET_ICON_REMOVE",className:"filepond--action-remove-item",align:"BUTTON_REMOVE_ITEM_POSITION"},ProcessItem:{label:"GET_LABEL_BUTTON_PROCESS_ITEM",action:"REQUEST_ITEM_PROCESSING",icon:"GET_ICON_PROCESS",className:"filepond--action-process-item",align:"BUTTON_PROCESS_ITEM_POSITION"},AbortItemProcessing:{label:"GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING",action:"ABORT_ITEM_PROCESSING",className:"filepond--action-abort-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RetryItemProcessing:{label:"GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING",action:"RETRY_ITEM_PROCESSING",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RevertItemProcessing:{label:"GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING",action:"REQUEST_REVERT_ITEM_PROCESSING",icon:"GET_ICON_UNDO",className:"filepond--action-revert-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"}},zs=[];ce(Ys,e=>{zs.push(e)});const Ge=e=>{if(Js(e)==="right")return 0;const t=e.ref.buttonRemoveItem.rect.element;return t.hidden?null:t.width+t.left},m_=e=>e.ref.buttonAbortItemLoad.rect.element.width,Si=e=>Math.floor(e.ref.buttonRemoveItem.rect.element.height/4),g_=e=>Math.floor(e.ref.buttonRemoveItem.rect.element.left/2),y_=e=>e.query("GET_STYLE_LOAD_INDICATOR_POSITION"),E_=e=>e.query("GET_STYLE_PROGRESS_INDICATOR_POSITION"),Js=e=>e.query("GET_STYLE_BUTTON_REMOVE_ITEM_POSITION"),T_={buttonAbortItemLoad:{opacity:0},buttonRetryItemLoad:{opacity:0},buttonRemoveItem:{opacity:0},buttonProcessItem:{opacity:0},buttonAbortItemProcessing:{opacity:0},buttonRetryItemProcessing:{opacity:0},buttonRevertItemProcessing:{opacity:0},loadProgressIndicator:{opacity:0,align:y_},processProgressIndicator:{opacity:0,align:E_},processingCompleteIndicator:{opacity:0,scaleX:.75,scaleY:.75},info:{translateX:0,translateY:0,opacity:0},status:{translateX:0,translateY:0,opacity:0}},Tc={buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:Ge},status:{translateX:Ge}},cs={buttonAbortItemProcessing:{opacity:1},processProgressIndicator:{opacity:1},status:{opacity:1}},rn={DID_THROW_ITEM_INVALID:{buttonRemoveItem:{opacity:1},info:{translateX:Ge},status:{translateX:Ge,opacity:1}},DID_START_ITEM_LOAD:{buttonAbortItemLoad:{opacity:1},loadProgressIndicator:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_LOAD_ERROR:{buttonRetryItemLoad:{opacity:1},buttonRemoveItem:{opacity:1},info:{translateX:Ge},status:{opacity:1}},DID_START_ITEM_REMOVE:{processProgressIndicator:{opacity:1,align:Js},info:{translateX:Ge},status:{opacity:0}},DID_THROW_ITEM_REMOVE_ERROR:{processProgressIndicator:{opacity:0,align:Js},buttonRemoveItem:{opacity:1},info:{translateX:Ge},status:{opacity:1,translateX:Ge}},DID_LOAD_ITEM:Tc,DID_LOAD_LOCAL_ITEM:{buttonRemoveItem:{opacity:1},info:{translateX:Ge},status:{translateX:Ge}},DID_START_ITEM_PROCESSING:cs,DID_REQUEST_ITEM_PROCESSING:cs,DID_UPDATE_ITEM_PROCESS_PROGRESS:cs,DID_COMPLETE_ITEM_PROCESSING:{buttonRevertItemProcessing:{opacity:1},info:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_PROCESSING_ERROR:{buttonRemoveItem:{opacity:1},buttonRetryItemProcessing:{opacity:1},status:{opacity:1},info:{translateX:Ge}},DID_THROW_ITEM_PROCESSING_REVERT_ERROR:{buttonRevertItemProcessing:{opacity:1},status:{opacity:1},info:{opacity:1}},DID_ABORT_ITEM_PROCESSING:{buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:Ge},status:{opacity:1}},DID_REVERT_ITEM_PROCESSING:Tc},I_=ye({create:({root:e})=>{e.element.innerHTML=e.query("GET_ICON_DONE")},name:"processing-complete-indicator",ignoreRect:!0,mixins:{styles:["scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",opacity:{type:"tween",duration:250}}}}),v_=({root:e,props:t})=>{const n=Object.keys(Ys).reduce((g,y)=>(g[y]={...Ys[y]},g),{}),{id:i}=t,o=e.query("GET_ALLOW_REVERT"),s=e.query("GET_ALLOW_REMOVE"),r=e.query("GET_ALLOW_PROCESS"),a=e.query("GET_INSTANT_UPLOAD"),c=e.query("IS_ASYNC"),l=e.query("GET_STYLE_BUTTON_REMOVE_ITEM_ALIGN");let d;c?r&&!o?d=g=>!/RevertItemProcessing/.test(g):!r&&o?d=g=>!/ProcessItem|RetryItemProcessing|AbortItemProcessing/.test(g):!r&&!o&&(d=g=>!/Process/.test(g)):d=g=>!/Process/.test(g);const h=d?zs.filter(d):zs.concat();if(a&&o&&(n.RevertItemProcessing.label="GET_LABEL_BUTTON_REMOVE_ITEM",n.RevertItemProcessing.icon="GET_ICON_REMOVE"),c&&!o){const g=rn.DID_COMPLETE_ITEM_PROCESSING;g.info.translateX=g_,g.info.translateY=Si,g.status.translateY=Si,g.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}if(c&&!r&&(["DID_START_ITEM_PROCESSING","DID_REQUEST_ITEM_PROCESSING","DID_UPDATE_ITEM_PROCESS_PROGRESS","DID_THROW_ITEM_PROCESSING_ERROR"].forEach(g=>{rn[g].status.translateY=Si}),rn.DID_THROW_ITEM_PROCESSING_ERROR.status.translateX=m_),l&&o){n.RevertItemProcessing.align="BUTTON_REMOVE_ITEM_POSITION";const g=rn.DID_COMPLETE_ITEM_PROCESSING;g.info.translateX=Ge,g.status.translateY=Si,g.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}s||(n.RemoveItem.disabled=!0),ce(n,(g,y)=>{const E=e.createChildView(np,{label:e.query(y.label),icon:e.query(y.icon),opacity:0});h.includes(g)&&e.appendChildView(E),y.disabled&&(E.element.setAttribute("disabled","disabled"),E.element.setAttribute("hidden","hidden")),E.element.dataset.align=e.query(`GET_STYLE_${y.align}`),E.element.classList.add(y.className),E.on("click",v=>{v.stopPropagation(),!y.disabled&&e.dispatch(y.action,{query:i})}),e.ref[`button${g}`]=E}),e.ref.processingCompleteIndicator=e.appendChildView(e.createChildView(I_)),e.ref.processingCompleteIndicator.element.dataset.align=e.query("GET_STYLE_BUTTON_PROCESS_ITEM_POSITION"),e.ref.info=e.appendChildView(e.createChildView(l_,{id:i})),e.ref.status=e.appendChildView(e.createChildView(p_,{id:i}));const p=e.appendChildView(e.createChildView(mc,{opacity:0,align:e.query("GET_STYLE_LOAD_INDICATOR_POSITION")}));p.element.classList.add("filepond--load-indicator"),e.ref.loadProgressIndicator=p;const m=e.appendChildView(e.createChildView(mc,{opacity:0,align:e.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")}));m.element.classList.add("filepond--process-indicator"),e.ref.processProgressIndicator=m,e.ref.activeStyles=[]},__=({root:e,actions:t,props:n})=>{C_({root:e,actions:t,props:n});let i=t.concat().filter(o=>/^DID_/.test(o.type)).reverse().find(o=>rn[o.type]);if(i){e.ref.activeStyles=[];const o=rn[i.type];ce(T_,(s,r)=>{const a=e.ref[s];ce(r,(c,l)=>{const d=o[s]&&typeof o[s][c]<"u"?o[s][c]:l;e.ref.activeStyles.push({control:a,key:c,value:d})})})}e.ref.activeStyles.forEach(({control:o,key:s,value:r})=>{o[s]=typeof r=="function"?r(e):r})},C_=Le({DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING:({root:e,action:t})=>{e.ref.buttonAbortItemProcessing.label=t.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD:({root:e,action:t})=>{e.ref.buttonAbortItemLoad.label=t.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL:({root:e,action:t})=>{e.ref.buttonAbortItemRemoval.label=t.value},DID_REQUEST_ITEM_PROCESSING:({root:e})=>{e.ref.processProgressIndicator.spin=!0,e.ref.processProgressIndicator.progress=0},DID_START_ITEM_LOAD:({root:e})=>{e.ref.loadProgressIndicator.spin=!0,e.ref.loadProgressIndicator.progress=0},DID_START_ITEM_REMOVE:({root:e})=>{e.ref.processProgressIndicator.spin=!0,e.ref.processProgressIndicator.progress=0},DID_UPDATE_ITEM_LOAD_PROGRESS:({root:e,action:t})=>{e.ref.loadProgressIndicator.spin=!1,e.ref.loadProgressIndicator.progress=t.progress},DID_UPDATE_ITEM_PROCESS_PROGRESS:({root:e,action:t})=>{e.ref.processProgressIndicator.spin=!1,e.ref.processProgressIndicator.progress=t.progress}}),S_=ye({create:v_,write:__,didCreateView:e=>{$t("CREATE_VIEW",{...e,view:e})},name:"file"}),A_=({root:e,props:t})=>{e.ref.fileName=gt("legend"),e.appendChild(e.ref.fileName),e.ref.file=e.appendChildView(e.createChildView(S_,{id:t.id})),e.ref.data=!1},R_=({root:e,props:t})=>{fe(e.ref.fileName,ta(e.query("GET_ITEM_NAME",t.id)))},w_=ye({create:A_,ignoreRect:!0,write:Le({DID_LOAD_ITEM:R_}),didCreateView:e=>{$t("CREATE_VIEW",{...e,view:e})},tag:"fieldset",name:"file-wrapper"}),Ic={type:"spring",damping:.6,mass:7},M_=({root:e,props:t})=>{[{name:"top"},{name:"center",props:{translateY:null,scaleY:null},mixins:{animations:{scaleY:Ic},styles:["translateY","scaleY"]}},{name:"bottom",props:{translateY:null},mixins:{animations:{translateY:Ic},styles:["translateY"]}}].forEach(n=>{P_(e,n,t.name)}),e.element.classList.add(`filepond--${t.name}`),e.ref.scalable=null},P_=(e,t,n)=>{const i=ye({name:`panel-${t.name} filepond--${n}`,mixins:t.mixins,ignoreRectUpdate:!0}),o=e.createChildView(i,t.props);e.ref[t.name]=e.appendChildView(o)},D_=({root:e,props:t})=>{if((e.ref.scalable===null||t.scalable!==e.ref.scalable)&&(e.ref.scalable=Bh(t.scalable)?t.scalable:!0,e.element.dataset.scalable=e.ref.scalable),!t.height)return;const n=e.ref.top.rect.element,i=e.ref.bottom.rect.element,o=Math.max(n.height+i.height,t.height);e.ref.center.translateY=n.height,e.ref.center.scaleY=(o-n.height-i.height)/100,e.ref.bottom.translateY=o-i.height},rp=ye({name:"panel",read:({root:e,props:t})=>t.heightCurrent=e.ref.bottom.translateY,write:D_,create:M_,ignoreRect:!0,mixins:{apis:["height","heightCurrent","scalable"]}}),b_=e=>{const t=e.map(i=>i.id);let n;return{setIndex:i=>{n=i},getIndex:()=>n,getItemIndex:i=>t.indexOf(i.id)}},vc={type:"spring",stiffness:.75,damping:.45,mass:10},_c="spring",Cc={DID_START_ITEM_LOAD:"busy",DID_UPDATE_ITEM_LOAD_PROGRESS:"loading",DID_THROW_ITEM_INVALID:"load-invalid",DID_THROW_ITEM_LOAD_ERROR:"load-error",DID_LOAD_ITEM:"idle",DID_THROW_ITEM_REMOVE_ERROR:"remove-error",DID_START_ITEM_REMOVE:"busy",DID_START_ITEM_PROCESSING:"busy processing",DID_REQUEST_ITEM_PROCESSING:"busy processing",DID_UPDATE_ITEM_PROCESS_PROGRESS:"processing",DID_COMPLETE_ITEM_PROCESSING:"processing-complete",DID_THROW_ITEM_PROCESSING_ERROR:"processing-error",DID_THROW_ITEM_PROCESSING_REVERT_ERROR:"processing-revert-error",DID_ABORT_ITEM_PROCESSING:"cancelled",DID_REVERT_ITEM_PROCESSING:"idle"},x_=({root:e,props:t})=>{if(e.ref.handleClick=i=>e.dispatch("DID_ACTIVATE_ITEM",{id:t.id}),e.element.id=`filepond--item-${t.id}`,e.element.addEventListener("click",e.ref.handleClick),e.ref.container=e.appendChildView(e.createChildView(w_,{id:t.id})),e.ref.panel=e.appendChildView(e.createChildView(rp,{name:"item-panel"})),e.ref.panel.height=null,t.markedForRemoval=!1,!e.query("GET_ALLOW_REORDER"))return;e.element.dataset.dragState="idle";const n=i=>{if(!i.isPrimary)return;let o=!1;const s={x:i.pageX,y:i.pageY};t.dragOrigin={x:e.translateX,y:e.translateY},t.dragCenter={x:i.offsetX,y:i.offsetY};const r=b_(e.query("GET_ACTIVE_ITEMS"));e.dispatch("DID_GRAB_ITEM",{id:t.id,dragState:r});const a=l=>{if(!l.isPrimary)return;l.stopPropagation(),l.preventDefault(),t.dragOffset={x:l.pageX-s.x,y:l.pageY-s.y},t.dragOffset.x*t.dragOffset.x+t.dragOffset.y*t.dragOffset.y>16&&!o&&(o=!0,e.element.removeEventListener("click",e.ref.handleClick)),e.dispatch("DID_DRAG_ITEM",{id:t.id,dragState:r})},c=l=>{l.isPrimary&&(document.removeEventListener("pointermove",a),document.removeEventListener("pointerup",c),t.dragOffset={x:l.pageX-s.x,y:l.pageY-s.y},e.dispatch("DID_DROP_ITEM",{id:t.id,dragState:r}),o&&setTimeout(()=>e.element.addEventListener("click",e.ref.handleClick),0))};document.addEventListener("pointermove",a),document.addEventListener("pointerup",c)};e.element.addEventListener("pointerdown",n)},N_=Le({DID_UPDATE_PANEL_HEIGHT:({root:e,action:t})=>{e.height=t.height}}),L_=Le({DID_GRAB_ITEM:({root:e,props:t})=>{t.dragOrigin={x:e.translateX,y:e.translateY}},DID_DRAG_ITEM:({root:e})=>{e.element.dataset.dragState="drag"},DID_DROP_ITEM:({root:e,props:t})=>{t.dragOffset=null,t.dragOrigin=null,e.element.dataset.dragState="drop"}},({root:e,actions:t,props:n,shouldOptimize:i})=>{e.element.dataset.dragState==="drop"&&e.scaleX<=1&&(e.element.dataset.dragState="idle");let o=t.concat().filter(r=>/^DID_/.test(r.type)).reverse().find(r=>Cc[r.type]);o&&o.type!==n.currentState&&(n.currentState=o.type,e.element.dataset.filepondItemState=Cc[n.currentState]||"");const s=e.query("GET_ITEM_PANEL_ASPECT_RATIO")||e.query("GET_PANEL_ASPECT_RATIO");s?i||(e.height=e.rect.element.width*s):(N_({root:e,actions:t,props:n}),!e.height&&e.ref.container.rect.element.height>0&&(e.height=e.ref.container.rect.element.height)),i&&(e.ref.panel.height=null),e.ref.panel.height=e.height}),O_=ye({create:x_,write:L_,destroy:({root:e,props:t})=>{e.element.removeEventListener("click",e.ref.handleClick),e.dispatch("RELEASE_ITEM",{query:t.id})},tag:"li",name:"item",mixins:{apis:["id","interactionMethod","markedForRemoval","spawnDate","dragCenter","dragOrigin","dragOffset"],styles:["translateX","translateY","scaleX","scaleY","opacity","height"],animations:{scaleX:_c,scaleY:_c,translateX:vc,translateY:vc,opacity:{type:"tween",duration:150}}}});var na=(e,t)=>Math.max(1,Math.floor((e+1)/t));const ia=(e,t,n)=>{if(!n)return;const i=e.rect.element.width,o=t.length;let s=null;if(o===0||n.top<t[0].rect.element.top)return-1;const a=t[0].rect.element,c=a.marginLeft+a.marginRight,l=a.width+c,d=na(i,l);if(d===1){for(let m=0;m<o;m++){const g=t[m],y=g.rect.outer.top+g.rect.element.height*.5;if(n.top<y)return m}return o}const h=a.marginTop+a.marginBottom,p=a.height+h;for(let m=0;m<o;m++){const g=m%d,y=Math.floor(m/d),E=g*l,v=y*p,T=v-a.marginTop,I=E+l,S=v+p+a.marginBottom;if(n.top<S&&n.top>T){if(n.left<I)return m;m!==o-1?s=m:s=null}}return s!==null?s:o},Ai={height:0,width:0,get getHeight(){return this.height},set setHeight(e){(this.height===0||e===0)&&(this.height=e)},get getWidth(){return this.width},set setWidth(e){(this.width===0||e===0)&&(this.width=e)}},F_=({root:e})=>{ge(e.element,"role","list"),e.ref.lastItemSpanwDate=Date.now()},k_=({root:e,action:t})=>{const{id:n,index:i,interactionMethod:o}=t;e.ref.addIndex=i;const s=Date.now();let r=s,a=1;if(o!==ze.NONE){a=0;const c=e.query("GET_ITEM_INSERT_INTERVAL"),l=s-e.ref.lastItemSpanwDate;r=l<c?s+(c-l):s}e.ref.lastItemSpanwDate=r,e.appendChildView(e.createChildView(O_,{spawnDate:r,id:n,opacity:a,interactionMethod:o}),i)},Sc=(e,t,n,i=0,o=1)=>{e.dragOffset?(e.translateX=null,e.translateY=null,e.translateX=e.dragOrigin.x+e.dragOffset.x,e.translateY=e.dragOrigin.y+e.dragOffset.y,e.scaleX=1.025,e.scaleY=1.025):(e.translateX=t,e.translateY=n,Date.now()>e.spawnDate&&(e.opacity===0&&V_(e,t,n,i,o),e.scaleX=1,e.scaleY=1,e.opacity=1))},V_=(e,t,n,i,o)=>{e.interactionMethod===ze.NONE?(e.translateX=null,e.translateX=t,e.translateY=null,e.translateY=n):e.interactionMethod===ze.DROP?(e.translateX=null,e.translateX=t-i*20,e.translateY=null,e.translateY=n-o*10,e.scaleX=.8,e.scaleY=.8):e.interactionMethod===ze.BROWSE?(e.translateY=null,e.translateY=n-30):e.interactionMethod===ze.API&&(e.translateX=null,e.translateX=t-30,e.translateY=null)},U_=({root:e,action:t})=>{const{id:n}=t,i=e.childViews.find(o=>o.id===n);i&&(i.scaleX=.9,i.scaleY=.9,i.opacity=0,i.markedForRemoval=!0)},us=e=>e.rect.element.height+e.rect.element.marginBottom*.5+e.rect.element.marginTop*.5,G_=e=>e.rect.element.width+e.rect.element.marginLeft*.5+e.rect.element.marginRight*.5,B_=({root:e,action:t})=>{const{id:n,dragState:i}=t,o=e.query("GET_ITEM",{id:n}),s=e.childViews.find(E=>E.id===n),r=e.childViews.length,a=i.getItemIndex(o);if(!s)return;const c={x:s.dragOrigin.x+s.dragOffset.x+s.dragCenter.x,y:s.dragOrigin.y+s.dragOffset.y+s.dragCenter.y},l=us(s),d=G_(s);let h=Math.floor(e.rect.outer.width/d);h>r&&(h=r);const p=Math.floor(r/h+1);Ai.setHeight=l*p,Ai.setWidth=d*h;var m={y:Math.floor(c.y/l),x:Math.floor(c.x/d),getGridIndex:function(){return c.y>Ai.getHeight||c.y<0||c.x>Ai.getWidth||c.x<0?a:this.y*h+this.x},getColIndex:function(){const v=e.query("GET_ACTIVE_ITEMS"),T=e.childViews.filter(b=>b.rect.element.height),I=v.map(b=>T.find(N=>N.id===b.id)),S=I.findIndex(b=>b===s),A=us(s),P=I.length;let D=P,R=0,C=0,_=0;for(let b=0;b<P;b++)if(R=us(I[b]),_=C,C=_+R,c.y<C){if(S>b){if(c.y<_+A){D=b;break}continue}D=b;break}return D}};const g=h>1?m.getGridIndex():m.getColIndex();e.dispatch("MOVE_ITEM",{query:s,index:g});const y=i.getIndex();if(y===void 0||y!==g){if(i.setIndex(g),y===void 0)return;e.dispatch("DID_REORDER_ITEMS",{items:e.query("GET_ACTIVE_ITEMS"),origin:a,target:g})}},H_=Le({DID_ADD_ITEM:k_,DID_REMOVE_ITEM:U_,DID_DRAG_ITEM:B_}),q_=({root:e,props:t,actions:n,shouldOptimize:i})=>{H_({root:e,props:t,actions:n});const{dragCoordinates:o}=t,s=e.rect.element.width,r=e.childViews.filter(I=>I.rect.element.height),a=e.query("GET_ACTIVE_ITEMS").map(I=>r.find(S=>S.id===I.id)).filter(I=>I),c=o?ia(e,a,o):null,l=e.ref.addIndex||null;e.ref.addIndex=null;let d=0,h=0,p=0;if(a.length===0)return;const m=a[0].rect.element,g=m.marginTop+m.marginBottom,y=m.marginLeft+m.marginRight,E=m.width+y,v=m.height+g,T=na(s,E);if(T===1){let I=0,S=0;a.forEach((A,P)=>{if(c){let C=P-c;C===-2?S=-g*.25:C===-1?S=-g*.75:C===0?S=g*.75:C===1?S=g*.25:S=0}i&&(A.translateX=null,A.translateY=null),A.markedForRemoval||Sc(A,0,I+S);let R=(A.rect.element.height+g)*(A.markedForRemoval?A.opacity:1);I+=R})}else{let I=0,S=0;a.forEach((A,P)=>{P===c&&(d=1),P===l&&(p+=1),A.markedForRemoval&&A.opacity<.5&&(h-=1);const D=P+p+d+h,R=D%T,C=Math.floor(D/T),_=R*E,b=C*v,N=Math.sign(_-I),F=Math.sign(b-S);I=_,S=b,!A.markedForRemoval&&(i&&(A.translateX=null,A.translateY=null),Sc(A,_,b,N,F))})}},W_=(e,t)=>t.filter(n=>n.data&&n.data.id?e.id===n.data.id:!0),$_=ye({create:F_,write:q_,tag:"ul",name:"list",didWriteView:({root:e})=>{e.childViews.filter(t=>t.markedForRemoval&&t.opacity===0&&t.resting).forEach(t=>{t._destroy(),e.removeChildView(t)})},filterFrameActionsForChild:W_,mixins:{apis:["dragCoordinates"]}}),Y_=({root:e,props:t})=>{e.ref.list=e.appendChildView(e.createChildView($_)),t.dragCoordinates=null,t.overflowing=!1},z_=({root:e,props:t,action:n})=>{e.query("GET_ITEM_INSERT_LOCATION_FREEDOM")&&(t.dragCoordinates={left:n.position.scopeLeft-e.ref.list.rect.element.left,top:n.position.scopeTop-(e.rect.outer.top+e.rect.element.marginTop+e.rect.element.scrollTop)})},J_=({props:e})=>{e.dragCoordinates=null},K_=Le({DID_DRAG:z_,DID_END_DRAG:J_}),X_=({root:e,props:t,actions:n})=>{if(K_({root:e,props:t,actions:n}),e.ref.list.dragCoordinates=t.dragCoordinates,t.overflowing&&!t.overflow&&(t.overflowing=!1,e.element.dataset.state="",e.height=null),t.overflow){const i=Math.round(t.overflow);i!==e.height&&(t.overflowing=!0,e.element.dataset.state="overflow",e.height=i)}},Z_=ye({create:Y_,write:X_,name:"list-scroller",mixins:{apis:["overflow","dragCoordinates"],styles:["height","translateY"],animations:{translateY:"spring"}}}),nt=(e,t,n,i="")=>{n?ge(e,t,i):e.removeAttribute(t)},Q_=e=>{if(!(!e||e.value==="")){try{e.value=""}catch{}if(e.value){const t=gt("form"),n=e.parentNode,i=e.nextSibling;t.appendChild(e),t.reset(),i?n.insertBefore(e,i):n.appendChild(e)}}},j_=({root:e,props:t})=>{e.element.id=`filepond--browser-${t.id}`,ge(e.element,"name",e.query("GET_NAME")),ge(e.element,"aria-controls",`filepond--assistant-${t.id}`),ge(e.element,"aria-labelledby",`filepond--drop-label-${t.id}`),ap({root:e,action:{value:e.query("GET_ACCEPTED_FILE_TYPES")}}),lp({root:e,action:{value:e.query("GET_ALLOW_MULTIPLE")}}),cp({root:e,action:{value:e.query("GET_ALLOW_DIRECTORIES_ONLY")}}),Ks({root:e}),up({root:e,action:{value:e.query("GET_REQUIRED")}}),dp({root:e,action:{value:e.query("GET_CAPTURE_METHOD")}}),e.ref.handleChange=n=>{if(!e.element.value)return;const i=Array.from(e.element.files).map(o=>(o._relativePath=o.webkitRelativePath,o));setTimeout(()=>{t.onload(i),Q_(e.element)},250)},e.element.addEventListener("change",e.ref.handleChange)},ap=({root:e,action:t})=>{e.query("GET_ALLOW_SYNC_ACCEPT_ATTRIBUTE")&&nt(e.element,"accept",!!t.value,t.value?t.value.join(","):"")},lp=({root:e,action:t})=>{nt(e.element,"multiple",t.value)},cp=({root:e,action:t})=>{nt(e.element,"webkitdirectory",t.value)},Ks=({root:e})=>{const t=e.query("GET_DISABLED"),n=e.query("GET_ALLOW_BROWSE"),i=t||!n;nt(e.element,"disabled",i)},up=({root:e,action:t})=>{t.value?e.query("GET_TOTAL_ITEMS")===0&&nt(e.element,"required",!0):nt(e.element,"required",!1)},dp=({root:e,action:t})=>{nt(e.element,"capture",!!t.value,t.value===!0?"":t.value)},Ac=({root:e})=>{const{element:t}=e;e.query("GET_TOTAL_ITEMS")>0?(nt(t,"required",!1),nt(t,"name",!1)):(nt(t,"name",!0,e.query("GET_NAME")),e.query("GET_CHECK_VALIDITY")&&t.setCustomValidity(""),e.query("GET_REQUIRED")&&nt(t,"required",!0))},eC=({root:e})=>{e.query("GET_CHECK_VALIDITY")&&e.element.setCustomValidity(e.query("GET_LABEL_INVALID_FIELD"))},tC=ye({tag:"input",name:"browser",ignoreRect:!0,ignoreRectUpdate:!0,attributes:{type:"file"},create:j_,destroy:({root:e})=>{e.element.removeEventListener("change",e.ref.handleChange)},write:Le({DID_LOAD_ITEM:Ac,DID_REMOVE_ITEM:Ac,DID_THROW_ITEM_INVALID:eC,DID_SET_DISABLED:Ks,DID_SET_ALLOW_BROWSE:Ks,DID_SET_ALLOW_DIRECTORIES_ONLY:cp,DID_SET_ALLOW_MULTIPLE:lp,DID_SET_ACCEPTED_FILE_TYPES:ap,DID_SET_CAPTURE_METHOD:dp,DID_SET_REQUIRED:up})}),Rc={ENTER:13,SPACE:32},nC=({root:e,props:t})=>{const n=gt("label");ge(n,"for",`filepond--browser-${t.id}`),ge(n,"id",`filepond--drop-label-${t.id}`),ge(n,"aria-hidden","true"),e.ref.handleKeyDown=i=>{(i.keyCode===Rc.ENTER||i.keyCode===Rc.SPACE)&&(i.preventDefault(),e.ref.label.click())},e.ref.handleClick=i=>{i.target===n||n.contains(i.target)||e.ref.label.click()},n.addEventListener("keydown",e.ref.handleKeyDown),e.element.addEventListener("click",e.ref.handleClick),fp(n,t.caption),e.appendChild(n),e.ref.label=n},fp=(e,t)=>{e.innerHTML=t;const n=e.querySelector(".filepond--label-action");return n&&ge(n,"tabindex","0"),t},iC=ye({name:"drop-label",ignoreRect:!0,create:nC,destroy:({root:e})=>{e.ref.label.addEventListener("keydown",e.ref.handleKeyDown),e.element.removeEventListener("click",e.ref.handleClick)},write:Le({DID_SET_LABEL_IDLE:({root:e,action:t})=>{fp(e.ref.label,t.value)}}),mixins:{styles:["opacity","translateX","translateY"],animations:{opacity:{type:"tween",duration:150},translateX:"spring",translateY:"spring"}}}),oC=ye({name:"drip-blob",ignoreRect:!0,mixins:{styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}}}}),sC=({root:e})=>{const t=e.rect.element.width*.5,n=e.rect.element.height*.5;e.ref.blob=e.appendChildView(e.createChildView(oC,{opacity:0,scaleX:2.5,scaleY:2.5,translateX:t,translateY:n}))},rC=({root:e,action:t})=>{if(!e.ref.blob){sC({root:e});return}e.ref.blob.translateX=t.position.scopeLeft,e.ref.blob.translateY=t.position.scopeTop,e.ref.blob.scaleX=1,e.ref.blob.scaleY=1,e.ref.blob.opacity=1},aC=({root:e})=>{e.ref.blob&&(e.ref.blob.opacity=0)},lC=({root:e})=>{e.ref.blob&&(e.ref.blob.scaleX=2.5,e.ref.blob.scaleY=2.5,e.ref.blob.opacity=0)},cC=({root:e,props:t,actions:n})=>{uC({root:e,props:t,actions:n});const{blob:i}=e.ref;n.length===0&&i&&i.opacity===0&&(e.removeChildView(i),e.ref.blob=null)},uC=Le({DID_DRAG:rC,DID_DROP:lC,DID_END_DRAG:aC}),dC=ye({ignoreRect:!0,ignoreRectUpdate:!0,name:"drip",write:cC}),hp=(e,t)=>{try{const n=new DataTransfer;t.forEach(i=>{i instanceof File?n.items.add(i):n.items.add(new File([i],i.name,{type:i.type}))}),e.files=n.files}catch{return!1}return!0},fC=({root:e})=>e.ref.fields={},Do=(e,t)=>e.ref.fields[t],oa=e=>{e.query("GET_ACTIVE_ITEMS").forEach(t=>{e.ref.fields[t.id]&&e.element.appendChild(e.ref.fields[t.id])})},wc=({root:e})=>oa(e),hC=({root:e,action:t})=>{const o=!(e.query("GET_ITEM",t.id).origin===Te.LOCAL)&&e.query("SHOULD_UPDATE_FILE_INPUT"),s=gt("input");s.type=o?"file":"hidden",s.name=e.query("GET_NAME"),s.disabled=e.query("GET_DISABLED"),e.ref.fields[t.id]=s,oa(e)},pC=({root:e,action:t})=>{const n=Do(e,t.id);if(!n||(t.serverFileReference!==null&&(n.value=t.serverFileReference),!e.query("SHOULD_UPDATE_FILE_INPUT")))return;const i=e.query("GET_ITEM",t.id);hp(n,[i.file])},mC=({root:e,action:t})=>{e.query("SHOULD_UPDATE_FILE_INPUT")&&setTimeout(()=>{const n=Do(e,t.id);n&&hp(n,[t.file])},0)},gC=({root:e})=>{e.element.disabled=e.query("GET_DISABLED")},yC=({root:e,action:t})=>{const n=Do(e,t.id);n&&(n.parentNode&&n.parentNode.removeChild(n),delete e.ref.fields[t.id])},EC=({root:e,action:t})=>{const n=Do(e,t.id);n&&(t.value===null?n.removeAttribute("value"):n.type!="file"&&(n.value=t.value),oa(e))},TC=Le({DID_SET_DISABLED:gC,DID_ADD_ITEM:hC,DID_LOAD_ITEM:pC,DID_REMOVE_ITEM:yC,DID_DEFINE_VALUE:EC,DID_PREPARE_OUTPUT:mC,DID_REORDER_ITEMS:wc,DID_SORT_ITEMS:wc}),IC=ye({tag:"fieldset",name:"data",create:fC,write:TC,ignoreRect:!0}),vC=e=>"getRootNode"in e?e.getRootNode():document,_C=["jpg","jpeg","png","gif","bmp","webp","svg","tiff"],CC=["css","csv","html","txt"],SC={zip:"zip|compressed",epub:"application/epub+zip"},pp=(e="")=>(e=e.toLowerCase(),_C.includes(e)?"image/"+(e==="jpg"?"jpeg":e==="svg"?"svg+xml":e):CC.includes(e)?"text/"+e:SC[e]||""),sa=e=>new Promise((t,n)=>{const i=xC(e);if(i.length&&!AC(e))return t(i);RC(e).then(t)}),AC=e=>e.files?e.files.length>0:!1,RC=e=>new Promise((t,n)=>{const i=(e.items?Array.from(e.items):[]).filter(o=>wC(o)).map(o=>MC(o));if(!i.length){t(e.files?Array.from(e.files):[]);return}Promise.all(i).then(o=>{const s=[];o.forEach(r=>{s.push.apply(s,r)}),t(s.filter(r=>r).map(r=>(r._relativePath||(r._relativePath=r.webkitRelativePath),r)))}).catch(console.error)}),wC=e=>{if(mp(e)){const t=ra(e);if(t)return t.isFile||t.isDirectory}return e.kind==="file"},MC=e=>new Promise((t,n)=>{if(bC(e)){PC(ra(e)).then(t).catch(n);return}t([e.getAsFile()])}),PC=e=>new Promise((t,n)=>{const i=[];let o=0,s=0;const r=()=>{s===0&&o===0&&t(i)},a=c=>{o++;const l=c.createReader(),d=()=>{l.readEntries(h=>{if(h.length===0){o--,r();return}h.forEach(p=>{p.isDirectory?a(p):(s++,p.file(m=>{const g=DC(m);p.fullPath&&(g._relativePath=p.fullPath),i.push(g),s--,r()}))}),d()},n)};d()};a(e)}),DC=e=>{if(e.type.length)return e;const t=e.lastModifiedDate,n=e.name,i=pp(Po(e.name));return i.length&&(e=e.slice(0,e.size,i),e.name=n,e.lastModifiedDate=t),e},bC=e=>mp(e)&&(ra(e)||{}).isDirectory,mp=e=>"webkitGetAsEntry"in e,ra=e=>e.webkitGetAsEntry(),xC=e=>{let t=[];try{if(t=LC(e),t.length)return t;t=NC(e)}catch{}return t},NC=e=>{let t=e.getData("url");return typeof t=="string"&&t.length?[t]:[]},LC=e=>{let t=e.getData("text/html");if(typeof t=="string"&&t.length){const n=t.match(/src\s*=\s*"(.+?)"/);if(n)return[n[1]]}return[]},no=[],qt=e=>({pageLeft:e.pageX,pageTop:e.pageY,scopeLeft:e.offsetX||e.layerX,scopeTop:e.offsetY||e.layerY}),OC=(e,t,n)=>{const i=FC(t),o={element:e,filterElement:n,state:null,ondrop:()=>{},onenter:()=>{},ondrag:()=>{},onexit:()=>{},onload:()=>{},allowdrop:()=>{}};return o.destroy=i.addListener(o),o},FC=e=>{const t=no.find(i=>i.element===e);if(t)return t;const n=kC(e);return no.push(n),n},kC=e=>{const t=[],n={dragenter:UC,dragover:GC,dragleave:HC,drop:BC},i={};ce(n,(s,r)=>{i[s]=r(e,t),e.addEventListener(s,i[s],!1)});const o={element:e,addListener:s=>(t.push(s),()=>{t.splice(t.indexOf(s),1),t.length===0&&(no.splice(no.indexOf(o),1),ce(n,r=>{e.removeEventListener(r,i[r],!1)}))})};return o},VC=(e,t)=>("elementFromPoint"in e||(e=document),e.elementFromPoint(t.x,t.y)),aa=(e,t)=>{const n=vC(t),i=VC(n,{x:e.pageX-window.pageXOffset,y:e.pageY-window.pageYOffset});return i===t||t.contains(i)};let gp=null;const Ri=(e,t)=>{try{e.dropEffect=t}catch{}},UC=(e,t)=>n=>{n.preventDefault(),gp=n.target,t.forEach(i=>{const{element:o,onenter:s}=i;aa(n,o)&&(i.state="enter",s(qt(n)))})},GC=(e,t)=>n=>{n.preventDefault();const i=n.dataTransfer;sa(i).then(o=>{let s=!1;t.some(r=>{const{filterElement:a,element:c,onenter:l,onexit:d,ondrag:h,allowdrop:p}=r;Ri(i,"copy");const m=p(o);if(!m){Ri(i,"none");return}if(aa(n,c)){if(s=!0,r.state===null){r.state="enter",l(qt(n));return}if(r.state="over",a&&!m){Ri(i,"none");return}h(qt(n))}else a&&!s&&Ri(i,"none"),r.state&&(r.state=null,d(qt(n)))})})},BC=(e,t)=>n=>{n.preventDefault();const i=n.dataTransfer;sa(i).then(o=>{t.forEach(s=>{const{filterElement:r,element:a,ondrop:c,onexit:l,allowdrop:d}=s;if(s.state=null,!(r&&!aa(n,a))){if(!d(o))return l(qt(n));c(qt(n),o)}})})},HC=(e,t)=>n=>{gp===n.target&&t.forEach(i=>{const{onexit:o}=i;i.state=null,o(qt(n))})},qC=(e,t,n)=>{e.classList.add("filepond--hopper");const{catchesDropsOnPage:i,requiresDropOnElement:o,filterItems:s=d=>d}=n,r=OC(e,i?document.documentElement:e,o);let a="",c="";r.allowdrop=d=>t(s(d)),r.ondrop=(d,h)=>{const p=s(h);if(!t(p)){l.ondragend(d);return}c="drag-drop",l.onload(p,d)},r.ondrag=d=>{l.ondrag(d)},r.onenter=d=>{c="drag-over",l.ondragstart(d)},r.onexit=d=>{c="drag-exit",l.ondragend(d)};const l={updateHopperState:()=>{a!==c&&(e.dataset.hopperState=c,a=c)},onload:()=>{},ondragstart:()=>{},ondrag:()=>{},ondragend:()=>{},destroy:()=>{r.destroy()}};return l};let Xs=!1;const mn=[],yp=e=>{const t=document.activeElement;if(t&&/textarea|input/i.test(t.nodeName)){let n=!1,i=t;for(;i!==document.body;){if(i.classList.contains("filepond--root")){n=!0;break}i=i.parentNode}if(!n)return}sa(e.clipboardData).then(n=>{n.length&&mn.forEach(i=>i(n))})},WC=e=>{mn.includes(e)||(mn.push(e),!Xs&&(Xs=!0,document.addEventListener("paste",yp)))},$C=e=>{Qr(mn,mn.indexOf(e)),mn.length===0&&(document.removeEventListener("paste",yp),Xs=!1)},YC=()=>{const e=n=>{t.onload(n)},t={destroy:()=>{$C(e)},onload:()=>{}};return WC(e),t},zC=({root:e,props:t})=>{e.element.id=`filepond--assistant-${t.id}`,ge(e.element,"role","status"),ge(e.element,"aria-live","polite"),ge(e.element,"aria-relevant","additions")};let Mc=null,Pc=null;const ds=[],bo=(e,t)=>{e.element.textContent=t},JC=e=>{e.element.textContent=""},Ep=(e,t,n)=>{const i=e.query("GET_TOTAL_ITEMS");bo(e,`${n} ${t}, ${i} ${i===1?e.query("GET_LABEL_FILE_COUNT_SINGULAR"):e.query("GET_LABEL_FILE_COUNT_PLURAL")}`),clearTimeout(Pc),Pc=setTimeout(()=>{JC(e)},1500)},Tp=e=>e.element.parentNode.contains(document.activeElement),KC=({root:e,action:t})=>{if(!Tp(e))return;e.element.textContent="";const n=e.query("GET_ITEM",t.id);ds.push(n.filename),clearTimeout(Mc),Mc=setTimeout(()=>{Ep(e,ds.join(", "),e.query("GET_LABEL_FILE_ADDED")),ds.length=0},750)},XC=({root:e,action:t})=>{if(!Tp(e))return;const n=t.item;Ep(e,n.filename,e.query("GET_LABEL_FILE_REMOVED"))},ZC=({root:e,action:t})=>{const i=e.query("GET_ITEM",t.id).filename,o=e.query("GET_LABEL_FILE_PROCESSING_COMPLETE");bo(e,`${i} ${o}`)},Dc=({root:e,action:t})=>{const i=e.query("GET_ITEM",t.id).filename,o=e.query("GET_LABEL_FILE_PROCESSING_ABORTED");bo(e,`${i} ${o}`)},wi=({root:e,action:t})=>{const i=e.query("GET_ITEM",t.id).filename;bo(e,`${t.status.main} ${i} ${t.status.sub}`)},QC=ye({create:zC,ignoreRect:!0,ignoreRectUpdate:!0,write:Le({DID_LOAD_ITEM:KC,DID_REMOVE_ITEM:XC,DID_COMPLETE_ITEM_PROCESSING:ZC,DID_ABORT_ITEM_PROCESSING:Dc,DID_REVERT_ITEM_PROCESSING:Dc,DID_THROW_ITEM_REMOVE_ERROR:wi,DID_THROW_ITEM_LOAD_ERROR:wi,DID_THROW_ITEM_INVALID:wi,DID_THROW_ITEM_PROCESSING_ERROR:wi}),tag:"span",name:"assistant"}),Ip=(e,t="-")=>e.replace(new RegExp(`${t}.`,"g"),n=>n.charAt(1).toUpperCase()),vp=(e,t=16,n=!0)=>{let i=Date.now(),o=null;return(...s)=>{clearTimeout(o);const r=Date.now()-i,a=()=>{i=Date.now(),e(...s)};r<t?n||(o=setTimeout(a,t-r)):a()}},jC=1e6,io=e=>e.preventDefault(),eS=({root:e,props:t})=>{const n=e.query("GET_ID");n&&(e.element.id=n);const i=e.query("GET_CLASS_NAME");i&&i.split(" ").filter(c=>c.length).forEach(c=>{e.element.classList.add(c)}),e.ref.label=e.appendChildView(e.createChildView(iC,{...t,translateY:null,caption:e.query("GET_LABEL_IDLE")})),e.ref.list=e.appendChildView(e.createChildView(Z_,{translateY:null})),e.ref.panel=e.appendChildView(e.createChildView(rp,{name:"panel-root"})),e.ref.assistant=e.appendChildView(e.createChildView(QC,{...t})),e.ref.data=e.appendChildView(e.createChildView(IC,{...t})),e.ref.measure=gt("div"),e.ref.measure.style.height="100%",e.element.appendChild(e.ref.measure),e.ref.bounds=null,e.query("GET_STYLES").filter(c=>!mt(c.value)).map(({name:c,value:l})=>{e.element.dataset[c]=l}),e.ref.widthPrevious=null,e.ref.widthUpdated=vp(()=>{e.ref.updateHistory=[],e.dispatch("DID_RESIZE_ROOT")},250),e.ref.previousAspectRatio=null,e.ref.updateHistory=[];const o=window.matchMedia("(pointer: fine) and (hover: hover)").matches,s="PointerEvent"in window;e.query("GET_ALLOW_REORDER")&&s&&!o&&(e.element.addEventListener("touchmove",io,{passive:!1}),e.element.addEventListener("gesturestart",io));const r=e.query("GET_CREDITS");if(r.length===2){const c=document.createElement("a");c.className="filepond--credits",c.setAttribute("aria-hidden","true"),c.href=r[0],c.tabindex=-1,c.target="_blank",c.rel="noopener noreferrer",c.textContent=r[1],e.element.appendChild(c),e.ref.credits=c}},tS=({root:e,props:t,actions:n})=>{if(rS({root:e,props:t,actions:n}),n.filter(P=>/^DID_SET_STYLE_/.test(P.type)).filter(P=>!mt(P.data.value)).map(({type:P,data:D})=>{const R=Ip(P.substring(8).toLowerCase(),"_");e.element.dataset[R]=D.value,e.invalidateLayout()}),e.rect.element.hidden)return;e.rect.element.width!==e.ref.widthPrevious&&(e.ref.widthPrevious=e.rect.element.width,e.ref.widthUpdated());let i=e.ref.bounds;i||(i=e.ref.bounds=oS(e),e.element.removeChild(e.ref.measure),e.ref.measure=null);const{hopper:o,label:s,list:r,panel:a}=e.ref;o&&o.updateHopperState();const c=e.query("GET_PANEL_ASPECT_RATIO"),l=e.query("GET_ALLOW_MULTIPLE"),d=e.query("GET_TOTAL_ITEMS"),h=l?e.query("GET_MAX_FILES")||jC:1,p=d===h,m=n.find(P=>P.type==="DID_ADD_ITEM");if(p&&m){const P=m.data.interactionMethod;s.opacity=0,l?s.translateY=-40:P===ze.API?s.translateX=40:P===ze.BROWSE?s.translateY=40:s.translateY=30}else p||(s.opacity=1,s.translateX=0,s.translateY=0);const g=nS(e),y=iS(e),E=s.rect.element.height,v=!l||p?0:E,T=p?r.rect.element.marginTop:0,I=d===0?0:r.rect.element.marginBottom,S=v+T+y.visual+I,A=v+T+y.bounds+I;if(r.translateY=Math.max(0,v-r.rect.element.marginTop)-g.top,c){const P=e.rect.element.width,D=P*c;c!==e.ref.previousAspectRatio&&(e.ref.previousAspectRatio=c,e.ref.updateHistory=[]);const R=e.ref.updateHistory;R.push(P);const C=2;if(R.length>C*2){const b=R.length,N=b-10;let F=0;for(let x=b;x>=N;x--)if(R[x]===R[x-2]&&F++,F>=C)return}a.scalable=!1,a.height=D;const _=D-v-(I-g.bottom)-(p?T:0);y.visual>_?r.overflow=_:r.overflow=null,e.height=D}else if(i.fixedHeight){a.scalable=!1;const P=i.fixedHeight-v-(I-g.bottom)-(p?T:0);y.visual>P?r.overflow=P:r.overflow=null}else if(i.cappedHeight){const P=S>=i.cappedHeight,D=Math.min(i.cappedHeight,S);a.scalable=!0,a.height=P?D:D-g.top-g.bottom;const R=D-v-(I-g.bottom)-(p?T:0);S>i.cappedHeight&&y.visual>R?r.overflow=R:r.overflow=null,e.height=Math.min(i.cappedHeight,A-g.top-g.bottom)}else{const P=d>0?g.top+g.bottom:0;a.scalable=!0,a.height=Math.max(E,S-P),e.height=Math.max(E,A-P)}e.ref.credits&&a.heightCurrent&&(e.ref.credits.style.transform=`translateY(${a.heightCurrent}px)`)},nS=e=>{const t=e.ref.list.childViews[0].childViews[0];return t?{top:t.rect.element.marginTop,bottom:t.rect.element.marginBottom}:{top:0,bottom:0}},iS=e=>{let t=0,n=0;const i=e.ref.list,o=i.childViews[0],s=o.childViews.filter(T=>T.rect.element.height),r=e.query("GET_ACTIVE_ITEMS").map(T=>s.find(I=>I.id===T.id)).filter(T=>T);if(r.length===0)return{visual:t,bounds:n};const a=o.rect.element.width,c=ia(o,r,i.dragCoordinates),l=r[0].rect.element,d=l.marginTop+l.marginBottom,h=l.marginLeft+l.marginRight,p=l.width+h,m=l.height+d,g=typeof c<"u"&&c>=0?1:0,y=r.find(T=>T.markedForRemoval&&T.opacity<.45)?-1:0,E=r.length+g+y,v=na(a,p);return v===1?r.forEach(T=>{const I=T.rect.element.height+d;n+=I,t+=I*T.opacity}):(n=Math.ceil(E/v)*m,t=n),{visual:t,bounds:n}},oS=e=>{const t=e.ref.measureHeight||null;return{cappedHeight:parseInt(e.style.maxHeight,10)||null,fixedHeight:t===0?null:t}},la=(e,t)=>{const n=e.query("GET_ALLOW_REPLACE"),i=e.query("GET_ALLOW_MULTIPLE"),o=e.query("GET_TOTAL_ITEMS");let s=e.query("GET_MAX_FILES");const r=t.length;return!i&&r>1?(e.dispatch("DID_THROW_MAX_FILES",{source:t,error:de("warning",0,"Max files")}),!0):(s=i?s:1,!i&&n?!1:wn(s)&&o+r>s?(e.dispatch("DID_THROW_MAX_FILES",{source:t,error:de("warning",0,"Max files")}),!0):!1)},sS=(e,t,n)=>{const i=e.childViews[0];return ia(i,t,{left:n.scopeLeft-i.rect.element.left,top:n.scopeTop-(e.rect.outer.top+e.rect.element.marginTop+e.rect.element.scrollTop)})},bc=e=>{const t=e.query("GET_ALLOW_DROP"),n=e.query("GET_DISABLED"),i=t&&!n;if(i&&!e.ref.hopper){const o=qC(e.element,s=>{const r=e.query("GET_BEFORE_DROP_FILE")||(()=>!0);return e.query("GET_DROP_VALIDATION")?s.every(c=>$t("ALLOW_HOPPER_ITEM",c,{query:e.query}).every(l=>l===!0)&&r(c)):!0},{filterItems:s=>{const r=e.query("GET_IGNORED_FILES");return s.filter(a=>In(a)?!r.includes(a.name.toLowerCase()):!0)},catchesDropsOnPage:e.query("GET_DROP_ON_PAGE"),requiresDropOnElement:e.query("GET_DROP_ON_ELEMENT")});o.onload=(s,r)=>{const c=e.ref.list.childViews[0].childViews.filter(d=>d.rect.element.height),l=e.query("GET_ACTIVE_ITEMS").map(d=>c.find(h=>h.id===d.id)).filter(d=>d);je("ADD_ITEMS",s,{dispatch:e.dispatch}).then(d=>{if(la(e,d))return!1;e.dispatch("ADD_ITEMS",{items:d,index:sS(e.ref.list,l,r),interactionMethod:ze.DROP})}),e.dispatch("DID_DROP",{position:r}),e.dispatch("DID_END_DRAG",{position:r})},o.ondragstart=s=>{e.dispatch("DID_START_DRAG",{position:s})},o.ondrag=vp(s=>{e.dispatch("DID_DRAG",{position:s})}),o.ondragend=s=>{e.dispatch("DID_END_DRAG",{position:s})},e.ref.hopper=o,e.ref.drip=e.appendChildView(e.createChildView(dC))}else!i&&e.ref.hopper&&(e.ref.hopper.destroy(),e.ref.hopper=null,e.removeChildView(e.ref.drip))},xc=(e,t)=>{const n=e.query("GET_ALLOW_BROWSE"),i=e.query("GET_DISABLED"),o=n&&!i;o&&!e.ref.browser?e.ref.browser=e.appendChildView(e.createChildView(tC,{...t,onload:s=>{je("ADD_ITEMS",s,{dispatch:e.dispatch}).then(r=>{if(la(e,r))return!1;e.dispatch("ADD_ITEMS",{items:r,index:-1,interactionMethod:ze.BROWSE})})}}),0):!o&&e.ref.browser&&(e.removeChildView(e.ref.browser),e.ref.browser=null)},Nc=e=>{const t=e.query("GET_ALLOW_PASTE"),n=e.query("GET_DISABLED"),i=t&&!n;i&&!e.ref.paster?(e.ref.paster=YC(),e.ref.paster.onload=o=>{je("ADD_ITEMS",o,{dispatch:e.dispatch}).then(s=>{if(la(e,s))return!1;e.dispatch("ADD_ITEMS",{items:s,index:-1,interactionMethod:ze.PASTE})})}):!i&&e.ref.paster&&(e.ref.paster.destroy(),e.ref.paster=null)},rS=Le({DID_SET_ALLOW_BROWSE:({root:e,props:t})=>{xc(e,t)},DID_SET_ALLOW_DROP:({root:e})=>{bc(e)},DID_SET_ALLOW_PASTE:({root:e})=>{Nc(e)},DID_SET_DISABLED:({root:e,props:t})=>{bc(e),Nc(e),xc(e,t),e.query("GET_DISABLED")?e.element.dataset.disabled="disabled":e.element.removeAttribute("data-disabled")}}),aS=ye({name:"root",read:({root:e})=>{e.ref.measure&&(e.ref.measureHeight=e.ref.measure.offsetHeight)},create:eS,write:tS,destroy:({root:e})=>{e.ref.paster&&e.ref.paster.destroy(),e.ref.hopper&&e.ref.hopper.destroy(),e.element.removeEventListener("touchmove",io),e.element.removeEventListener("gesturestart",io)},mixins:{styles:["height"]}}),lS=(e={})=>{let t=null;const n=to(),i=S0(cv(n),[Mv,fv(n)],[jv,dv(n)]);i.dispatch("SET_OPTIONS",{options:e});const o=()=>{document.hidden||i.dispatch("KICK")};document.addEventListener("visibilitychange",o);let s=null,r=!1,a=!1,c=null,l=null;const d=()=>{r||(r=!0),clearTimeout(s),s=setTimeout(()=>{r=!1,c=null,l=null,a&&(a=!1,i.dispatch("DID_STOP_RESIZE"))},500)};window.addEventListener("resize",d);const h=aS(i,{id:Zr()});let p=!1,m=!1;const g={_read:()=>{r&&(l=window.innerWidth,c||(c=l),!a&&l!==c&&(i.dispatch("DID_START_RESIZE"),a=!0)),m&&p&&(p=h.element.offsetParent===null),!p&&(h._read(),m=h.rect.element.hidden)},_write:w=>{const M=i.processActionQueue().filter(L=>!/^SET_/.test(L.type));p&&!M.length||(T(M),p=h._write(w,M,a),mv(i.query("GET_ITEMS")),p&&i.processDispatchQueue())}},y=w=>M=>{const L={type:w};if(!M)return L;if(M.hasOwnProperty("error")&&(L.error=M.error?{...M.error}:null),M.status&&(L.status={...M.status}),M.file&&(L.output=M.file),M.source)L.file=M.source;else if(M.item||M.id){const O=M.item?M.item:i.query("GET_ITEM",M.id);L.file=O?Fe(O):null}return M.items&&(L.items=M.items.map(Fe)),/progress/.test(w)&&(L.progress=M.progress),M.hasOwnProperty("origin")&&M.hasOwnProperty("target")&&(L.origin=M.origin,L.target=M.target),L},E={DID_DESTROY:y("destroy"),DID_INIT:y("init"),DID_THROW_MAX_FILES:y("warning"),DID_INIT_ITEM:y("initfile"),DID_START_ITEM_LOAD:y("addfilestart"),DID_UPDATE_ITEM_LOAD_PROGRESS:y("addfileprogress"),DID_LOAD_ITEM:y("addfile"),DID_THROW_ITEM_INVALID:[y("error"),y("addfile")],DID_THROW_ITEM_LOAD_ERROR:[y("error"),y("addfile")],DID_THROW_ITEM_REMOVE_ERROR:[y("error"),y("removefile")],DID_PREPARE_OUTPUT:y("preparefile"),DID_START_ITEM_PROCESSING:y("processfilestart"),DID_UPDATE_ITEM_PROCESS_PROGRESS:y("processfileprogress"),DID_ABORT_ITEM_PROCESSING:y("processfileabort"),DID_COMPLETE_ITEM_PROCESSING:y("processfile"),DID_COMPLETE_ITEM_PROCESSING_ALL:y("processfiles"),DID_REVERT_ITEM_PROCESSING:y("processfilerevert"),DID_THROW_ITEM_PROCESSING_ERROR:[y("error"),y("processfile")],DID_REMOVE_ITEM:y("removefile"),DID_UPDATE_ITEMS:y("updatefiles"),DID_ACTIVATE_ITEM:y("activatefile"),DID_REORDER_ITEMS:y("reorderfiles")},v=w=>{const M={pond:k,...w};delete M.type,h.element.dispatchEvent(new CustomEvent(`FilePond:${w.type}`,{detail:M,bubbles:!0,cancelable:!0,composed:!0}));const L=[];w.hasOwnProperty("error")&&L.push(w.error),w.hasOwnProperty("file")&&L.push(w.file);const O=["type","error","file"];Object.keys(w).filter(B=>!O.includes(B)).forEach(B=>L.push(w[B])),k.fire(w.type,...L);const U=i.query(`GET_ON${w.type.toUpperCase()}`);U&&U(...L)},T=w=>{w.length&&w.filter(M=>E[M.type]).forEach(M=>{const L=E[M.type];(Array.isArray(L)?L:[L]).forEach(O=>{M.type==="DID_INIT_ITEM"?v(O(M.data)):setTimeout(()=>{v(O(M.data))},0)})})},I=w=>i.dispatch("SET_OPTIONS",{options:w}),S=w=>i.query("GET_ACTIVE_ITEM",w),A=w=>new Promise((M,L)=>{i.dispatch("REQUEST_ITEM_PREPARE",{query:w,success:O=>{M(O)},failure:O=>{L(O)}})}),P=(w,M={})=>new Promise((L,O)=>{C([{source:w,options:M}],{index:M.index}).then(U=>L(U&&U[0])).catch(O)}),D=w=>w.file&&w.id,R=(w,M)=>(typeof w=="object"&&!D(w)&&!M&&(M=w,w=void 0),i.dispatch("REMOVE_ITEM",{...M,query:w}),i.query("GET_ACTIVE_ITEM",w)===null),C=(...w)=>new Promise((M,L)=>{const O=[],U={};if(Ao(w[0]))O.push.apply(O,w[0]),Object.assign(U,w[1]||{});else{const B=w[w.length-1];typeof B=="object"&&!(B instanceof Blob)&&Object.assign(U,w.pop()),O.push(...w)}i.dispatch("ADD_ITEMS",{items:O,index:U.index,interactionMethod:ze.API,success:M,failure:L})}),_=()=>i.query("GET_ACTIVE_ITEMS"),b=w=>new Promise((M,L)=>{i.dispatch("REQUEST_ITEM_PROCESSING",{query:w,success:O=>{M(O)},failure:O=>{L(O)}})}),N=(...w)=>{const M=Array.isArray(w[0])?w[0]:w,L=M.length?M:_();return Promise.all(L.map(A))},F=(...w)=>{const M=Array.isArray(w[0])?w[0]:w;if(!M.length){const L=_().filter(O=>!(O.status===Z.IDLE&&O.origin===Te.LOCAL)&&O.status!==Z.PROCESSING&&O.status!==Z.PROCESSING_COMPLETE&&O.status!==Z.PROCESSING_REVERT_ERROR);return Promise.all(L.map(b))}return Promise.all(M.map(b))},x=(...w)=>{const M=Array.isArray(w[0])?w[0]:w;let L;typeof M[M.length-1]=="object"?L=M.pop():Array.isArray(w[0])&&(L=w[1]);const O=_();return M.length?M.map(B=>Ot(B)?O[B]?O[B].id:null:B).filter(B=>B).map(B=>R(B,L)):Promise.all(O.map(B=>R(B,L)))},k={...Mo(),...g,...uv(i,n),setOptions:I,addFile:P,addFiles:C,getFile:S,processFile:b,prepareFile:A,removeFile:R,moveFile:(w,M)=>i.dispatch("MOVE_ITEM",{query:w,index:M}),getFiles:_,processFiles:F,removeFiles:x,prepareFiles:N,sort:w=>i.dispatch("SORT",{compare:w}),browse:()=>{var w=h.element.querySelector("input[type=file]");w&&w.click()},destroy:()=>{k.fire("destroy",h.element),i.dispatch("ABORT_ALL"),h._destroy(),window.removeEventListener("resize",d),document.removeEventListener("visibilitychange",o),i.dispatch("DID_DESTROY")},insertBefore:w=>nc(h.element,w),insertAfter:w=>ic(h.element,w),appendTo:w=>w.appendChild(h.element),replaceElement:w=>{nc(h.element,w),w.parentNode.removeChild(w),t=w},restoreElement:()=>{t&&(ic(t,h.element),h.element.parentNode.removeChild(h.element),t=null)},isAttachedTo:w=>h.element===w||t===w,element:{get:()=>h.element},status:{get:()=>i.query("GET_STATUS")}};return i.dispatch("DID_INIT"),Rt(k)},_p=(e={})=>{const t={};return ce(to(),(i,o)=>{t[i]=o[0]}),lS({...t,...e})},cS=e=>e.charAt(0).toLowerCase()+e.slice(1),uS=e=>Ip(e.replace(/^data-/,"")),Cp=(e,t)=>{ce(t,(n,i)=>{ce(e,(o,s)=>{const r=new RegExp(n);if(!r.test(o)||(delete e[o],i===!1))return;if(xe(i)){e[i]=s;return}const c=i.group;_e(i)&&!e[c]&&(e[c]={}),e[c][cS(o.replace(r,""))]=s}),i.mapping&&Cp(e[i.group],i.mapping)})},dS=(e,t={})=>{const n=[];ce(e.attributes,o=>{n.push(e.attributes[o])});const i=n.filter(o=>o.name).reduce((o,s)=>{const r=ge(e,s.name);return o[uS(s.name)]=r===s.name?!0:r,o},{});return Cp(i,t),i},fS=(e,t={})=>{const n={"^class$":"className","^multiple$":"allowMultiple","^capture$":"captureMethod","^webkitdirectory$":"allowDirectoriesOnly","^server":{group:"server",mapping:{"^process":{group:"process"},"^revert":{group:"revert"},"^fetch":{group:"fetch"},"^restore":{group:"restore"},"^load":{group:"load"}}},"^type$":!1,"^files$":!1};$t("SET_ATTRIBUTE_TO_OPTION_MAP",n);const i={...t},o=dS(e.nodeName==="FIELDSET"?e.querySelector("input[type=file]"):e,n);Object.keys(o).forEach(r=>{_e(o[r])?(_e(i[r])||(i[r]={}),Object.assign(i[r],o[r])):i[r]=o[r]}),i.files=(t.files||[]).concat(Array.from(e.querySelectorAll("input:not([type=file])")).map(r=>({source:r.value,options:{type:r.dataset.type}})));const s=_p(i);return e.files&&Array.from(e.files).forEach(r=>{s.addFile(r)}),s.replaceElement(e),s},hS=(...e)=>C0(e[0])?fS(...e):_p(...e),pS=["fire","_read","_write"],Lc=e=>{const t={};return $h(e,t,pS),t},mS=(e,t)=>e.replace(/(?:{([a-zA-Z]+)})/g,(n,i)=>t[i]),gS=e=>{const t=new Blob(["(",e.toString(),")()"],{type:"application/javascript"}),n=URL.createObjectURL(t),i=new Worker(n);return{transfer:(o,s)=>{},post:(o,s,r)=>{const a=Zr();i.onmessage=c=>{c.data.id===a&&s(c.data.message)},i.postMessage({id:a,message:o},r)},terminate:()=>{i.terminate(),URL.revokeObjectURL(n)}}},yS=e=>new Promise((t,n)=>{const i=new Image;i.onload=()=>{t(i)},i.onerror=o=>{n(o)},i.src=e}),Sp=(e,t)=>{const n=e.slice(0,e.size,e.type);return n.lastModifiedDate=e.lastModifiedDate,n.name=t,n},ES=e=>Sp(e,e.name),Oc=[],TS=e=>{if(Oc.includes(e))return;Oc.push(e);const t=e({addFilter:yv,utils:{Type:V,forin:ce,isString:xe,isFile:In,toNaturalFileSize:ip,replaceInString:mS,getExtensionFromFilename:Po,getFilenameWithoutExtension:ep,guesstimateMimeType:pp,getFileFromBlob:Tn,getFilenameFromURL:mi,createRoute:Le,createWorker:gS,createView:ye,createItemAPI:Fe,loadImage:yS,copyFile:ES,renameFile:Sp,createBlob:Zh,applyFilterChain:je,text:fe,getNumericAspectRatioFromString:Jh},views:{fileActionButton:np}});Ev(t.options)},IS=()=>Object.prototype.toString.call(window.operamini)==="[object OperaMini]",vS=()=>"Promise"in window,_S=()=>"slice"in Blob.prototype,CS=()=>"URL"in window&&"createObjectURL"in window.URL,SS=()=>"visibilityState"in document,AS=()=>"performance"in window,RS=()=>"supports"in(window.CSS||{}),wS=()=>/MSIE|Trident/.test(window.navigator.userAgent),Fc=(()=>{const e=Uh()&&!IS()&&SS()&&vS()&&_S()&&CS()&&AS()&&(RS()||wS());return()=>e})(),It={apps:[]},MS="filepond",Yt=()=>{};let kc={},fs=Yt,hs=Yt,Vc=Yt,Uc=Yt,Gc=Yt,Bc=Yt,Hc=Yt;if(Fc()){K0(()=>{It.apps.forEach(n=>n._read())},n=>{It.apps.forEach(i=>i._write(n))});const e=()=>{document.dispatchEvent(new CustomEvent("FilePond:loaded",{detail:{supported:Fc,create:fs,destroy:hs,parse:Vc,find:Uc,registerPlugin:Gc,setOptions:Hc}})),document.removeEventListener("DOMContentLoaded",e)};document.readyState!=="loading"?setTimeout(()=>e(),0):document.addEventListener("DOMContentLoaded",e);const t=()=>ce(to(),(n,i)=>{kc[n]=i[1]});kc={},t(),fs=(...n)=>{const i=hS(...n);return i.on("destroy",hs),It.apps.push(i),Lc(i)},hs=n=>{const i=It.apps.findIndex(o=>o.isAttachedTo(n));return i>=0?(It.apps.splice(i,1)[0].restoreElement(),!0):!1},Vc=n=>Array.from(n.querySelectorAll(`.${MS}`)).filter(s=>!It.apps.find(r=>r.isAttachedTo(s))).map(s=>fs(s)),Uc=n=>{const i=It.apps.find(o=>o.isAttachedTo(n));return i?Lc(i):null},Gc=(...n)=>{n.forEach(TS),t()},Bc=()=>{const n={};return ce(to(),(i,o)=>{n[i]=o[0]}),n},Hc=n=>(_e(n)&&(It.apps.forEach(i=>{i.setOptions(n)}),Tv(n)),Bc())}/*!
 * FilePondPluginImagePreview 4.6.11
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const PS=e=>/^image/.test(e.type),qc=(e,t)=>ri(e.x*t,e.y*t),Wc=(e,t)=>ri(e.x+t.x,e.y+t.y),DS=e=>{const t=Math.sqrt(e.x*e.x+e.y*e.y);return t===0?{x:0,y:0}:ri(e.x/t,e.y/t)},Mi=(e,t,n)=>{const i=Math.cos(t),o=Math.sin(t),s=ri(e.x-n.x,e.y-n.y);return ri(n.x+i*s.x-o*s.y,n.y+o*s.x+i*s.y)},ri=(e=0,t=0)=>({x:e,y:t}),ke=(e,t,n=1,i)=>{if(typeof e=="string")return parseFloat(e)*n;if(typeof e=="number")return e*(i?t[i]:Math.min(t.width,t.height))},bS=(e,t,n)=>{const i=e.borderStyle||e.lineStyle||"solid",o=e.backgroundColor||e.fontColor||"transparent",s=e.borderColor||e.lineColor||"transparent",r=ke(e.borderWidth||e.lineWidth,t,n),a=e.lineCap||"round",c=e.lineJoin||"round",l=typeof i=="string"?"":i.map(h=>ke(h,t,n)).join(","),d=e.opacity||1;return{"stroke-linecap":a,"stroke-linejoin":c,"stroke-width":r||0,"stroke-dasharray":l,stroke:s,fill:o,opacity:d}},qe=e=>e!=null,xS=(e,t,n=1)=>{let i=ke(e.x,t,n,"width")||ke(e.left,t,n,"width"),o=ke(e.y,t,n,"height")||ke(e.top,t,n,"height"),s=ke(e.width,t,n,"width"),r=ke(e.height,t,n,"height"),a=ke(e.right,t,n,"width"),c=ke(e.bottom,t,n,"height");return qe(o)||(qe(r)&&qe(c)?o=t.height-r-c:o=c),qe(i)||(qe(s)&&qe(a)?i=t.width-s-a:i=a),qe(s)||(qe(i)&&qe(a)?s=t.width-i-a:s=0),qe(r)||(qe(o)&&qe(c)?r=t.height-o-c:r=0),{x:i||0,y:o||0,width:s||0,height:r||0}},NS=e=>e.map((t,n)=>`${n===0?"M":"L"} ${t.x} ${t.y}`).join(" "),ct=(e,t)=>Object.keys(t).forEach(n=>e.setAttribute(n,t[n])),LS="http://www.w3.org/2000/svg",an=(e,t)=>{const n=document.createElementNS(LS,e);return t&&ct(n,t),n},OS=e=>ct(e,{...e.rect,...e.styles}),FS=e=>{const t=e.rect.x+e.rect.width*.5,n=e.rect.y+e.rect.height*.5,i=e.rect.width*.5,o=e.rect.height*.5;return ct(e,{cx:t,cy:n,rx:i,ry:o,...e.styles})},kS={contain:"xMidYMid meet",cover:"xMidYMid slice"},VS=(e,t)=>{ct(e,{...e.rect,...e.styles,preserveAspectRatio:kS[t.fit]||"none"})},US={left:"start",center:"middle",right:"end"},GS=(e,t,n,i)=>{const o=ke(t.fontSize,n,i),s=t.fontFamily||"sans-serif",r=t.fontWeight||"normal",a=US[t.textAlign]||"start";ct(e,{...e.rect,...e.styles,"stroke-width":0,"font-weight":r,"font-size":o,"font-family":s,"text-anchor":a}),e.text!==t.text&&(e.text=t.text,e.textContent=t.text.length?t.text:" ")},BS=(e,t,n,i)=>{ct(e,{...e.rect,...e.styles,fill:"none"});const o=e.childNodes[0],s=e.childNodes[1],r=e.childNodes[2],a=e.rect,c={x:e.rect.x+e.rect.width,y:e.rect.y+e.rect.height};if(ct(o,{x1:a.x,y1:a.y,x2:c.x,y2:c.y}),!t.lineDecoration)return;s.style.display="none",r.style.display="none";const l=DS({x:c.x-a.x,y:c.y-a.y}),d=ke(.05,n,i);if(t.lineDecoration.indexOf("arrow-begin")!==-1){const h=qc(l,d),p=Wc(a,h),m=Mi(a,2,p),g=Mi(a,-2,p);ct(s,{style:"display:block;",d:`M${m.x},${m.y} L${a.x},${a.y} L${g.x},${g.y}`})}if(t.lineDecoration.indexOf("arrow-end")!==-1){const h=qc(l,-d),p=Wc(c,h),m=Mi(c,2,p),g=Mi(c,-2,p);ct(r,{style:"display:block;",d:`M${m.x},${m.y} L${c.x},${c.y} L${g.x},${g.y}`})}},HS=(e,t,n,i)=>{ct(e,{...e.styles,fill:"none",d:NS(t.points.map(o=>({x:ke(o.x,n,i,"width"),y:ke(o.y,n,i,"height")})))})},Pi=e=>t=>an(e,{id:t.id}),qS=e=>{const t=an("image",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round",opacity:"0"});return t.onload=()=>{t.setAttribute("opacity",e.opacity||1)},t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.src),t},WS=e=>{const t=an("g",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round"}),n=an("line");t.appendChild(n);const i=an("path");t.appendChild(i);const o=an("path");return t.appendChild(o),t},$S={image:qS,rect:Pi("rect"),ellipse:Pi("ellipse"),text:Pi("text"),path:Pi("path"),line:WS},YS={rect:OS,ellipse:FS,image:VS,text:GS,path:HS,line:BS},zS=(e,t)=>$S[e](t),JS=(e,t,n,i,o)=>{t!=="path"&&(e.rect=xS(n,i,o)),e.styles=bS(n,i,o),YS[t](e,n,i,o)},KS=["x","y","left","top","right","bottom","width","height"],XS=e=>typeof e=="string"&&/%/.test(e)?parseFloat(e)/100:e,ZS=e=>{const[t,n]=e,i=n.points?{}:KS.reduce((o,s)=>(o[s]=XS(n[s]),o),{});return[t,{zIndex:0,...n,...i}]},QS=(e,t)=>e[1].zIndex>t[1].zIndex?1:e[1].zIndex<t[1].zIndex?-1:0,jS=e=>e.utils.createView({name:"image-preview-markup",tag:"svg",ignoreRect:!0,mixins:{apis:["width","height","crop","markup","resize","dirty"]},write:({root:t,props:n})=>{if(!n.dirty)return;const{crop:i,resize:o,markup:s}=n,r=n.width,a=n.height;let c=i.width,l=i.height;if(o){const{size:m}=o;let g=m&&m.width,y=m&&m.height;const E=o.mode,v=o.upscale;g&&!y&&(y=g),y&&!g&&(g=y);const T=c<g&&l<y;if(!T||T&&v){let I=g/c,S=y/l;if(E==="force")c=g,l=y;else{let A;E==="cover"?A=Math.max(I,S):E==="contain"&&(A=Math.min(I,S)),c=c*A,l=l*A}}}const d={width:r,height:a};t.element.setAttribute("width",d.width),t.element.setAttribute("height",d.height);const h=Math.min(r/c,a/l);t.element.innerHTML="";const p=t.query("GET_IMAGE_PREVIEW_MARKUP_FILTER");s.filter(p).map(ZS).sort(QS).forEach(m=>{const[g,y]=m,E=zS(g,y);JS(E,g,y,d,h),t.element.appendChild(E)})}}),Kn=(e,t)=>({x:e,y:t}),eA=(e,t)=>e.x*t.x+e.y*t.y,$c=(e,t)=>Kn(e.x-t.x,e.y-t.y),tA=(e,t)=>eA($c(e,t),$c(e,t)),Yc=(e,t)=>Math.sqrt(tA(e,t)),zc=(e,t)=>{const n=e,i=1.5707963267948966,o=t,s=1.5707963267948966-t,r=Math.sin(i),a=Math.sin(o),c=Math.sin(s),l=Math.cos(s),d=n/r,h=d*a,p=d*c;return Kn(l*h,l*p)},nA=(e,t)=>{const n=e.width,i=e.height,o=zc(n,t),s=zc(i,t),r=Kn(e.x+Math.abs(o.x),e.y-Math.abs(o.y)),a=Kn(e.x+e.width+Math.abs(s.y),e.y+Math.abs(s.x)),c=Kn(e.x-Math.abs(s.y),e.y+e.height-Math.abs(s.x));return{width:Yc(r,a),height:Yc(r,c)}},iA=(e,t,n=1)=>{const i=e.height/e.width;let o=1,s=t,r=1,a=i;a>s&&(a=s,r=a/i);const c=Math.max(o/r,s/a),l=e.width/(n*c*r),d=l*t;return{width:l,height:d}},Ap=(e,t,n,i)=>{const o=i.x>.5?1-i.x:i.x,s=i.y>.5?1-i.y:i.y,r=o*2*e.width,a=s*2*e.height,c=nA(t,n);return Math.max(c.width/r,c.height/a)},Rp=(e,t)=>{let n=e.width,i=n*t;i>e.height&&(i=e.height,n=i/t);const o=(e.width-n)*.5,s=(e.height-i)*.5;return{x:o,y:s,width:n,height:i}},oA=(e,t={})=>{let{zoom:n,rotation:i,center:o,aspectRatio:s}=t;s||(s=e.height/e.width);const r=iA(e,s,n),a={width:r.width,height:r.height},c=typeof t.scaleToFit>"u"||t.scaleToFit,l=Ap(e,Rp(a,s),i,c?o:{x:.5,y:.5}),d=n*l;return{widthFloat:r.width/d,heightFloat:r.height/d,width:Math.round(r.width/d),height:Math.round(r.height/d)}},lt={type:"spring",stiffness:.5,damping:.45,mass:10},sA=e=>e.utils.createView({name:"image-bitmap",ignoreRect:!0,mixins:{styles:["scaleX","scaleY"]},create:({root:t,props:n})=>{t.appendChild(n.image)}}),rA=e=>e.utils.createView({name:"image-canvas-wrapper",tag:"div",ignoreRect:!0,mixins:{apis:["crop","width","height"],styles:["originX","originY","translateX","translateY","scaleX","scaleY","rotateZ"],animations:{originX:lt,originY:lt,scaleX:lt,scaleY:lt,translateX:lt,translateY:lt,rotateZ:lt}},create:({root:t,props:n})=>{n.width=n.image.width,n.height=n.image.height,t.ref.bitmap=t.appendChildView(t.createChildView(sA(e),{image:n.image}))},write:({root:t,props:n})=>{const{flip:i}=n.crop,{bitmap:o}=t.ref;o.scaleX=i.horizontal?-1:1,o.scaleY=i.vertical?-1:1}}),aA=e=>e.utils.createView({name:"image-clip",tag:"div",ignoreRect:!0,mixins:{apis:["crop","markup","resize","width","height","dirty","background"],styles:["width","height","opacity"],animations:{opacity:{type:"tween",duration:250}}},didWriteView:function({root:t,props:n}){n.background&&(t.element.style.backgroundColor=n.background)},create:({root:t,props:n})=>{t.ref.image=t.appendChildView(t.createChildView(rA(e),Object.assign({},n))),t.ref.createMarkup=()=>{t.ref.markup||(t.ref.markup=t.appendChildView(t.createChildView(jS(e),Object.assign({},n))))},t.ref.destroyMarkup=()=>{t.ref.markup&&(t.removeChildView(t.ref.markup),t.ref.markup=null)};const i=t.query("GET_IMAGE_PREVIEW_TRANSPARENCY_INDICATOR");i!==null&&(i==="grid"?t.element.dataset.transparencyIndicator=i:t.element.dataset.transparencyIndicator="color")},write:({root:t,props:n,shouldOptimize:i})=>{const{crop:o,markup:s,resize:r,dirty:a,width:c,height:l}=n;t.ref.image.crop=o;const d={width:c,height:l,center:{x:c*.5,y:l*.5}},h={width:t.ref.image.width,height:t.ref.image.height},p={x:o.center.x*h.width,y:o.center.y*h.height},m={x:d.center.x-h.width*o.center.x,y:d.center.y-h.height*o.center.y},g=Math.PI*2+o.rotation%(Math.PI*2),y=o.aspectRatio||h.height/h.width,E=typeof o.scaleToFit>"u"||o.scaleToFit,v=Ap(h,Rp(d,y),g,E?o.center:{x:.5,y:.5}),T=o.zoom*v;s&&s.length?(t.ref.createMarkup(),t.ref.markup.width=c,t.ref.markup.height=l,t.ref.markup.resize=r,t.ref.markup.dirty=a,t.ref.markup.markup=s,t.ref.markup.crop=oA(h,o)):t.ref.markup&&t.ref.destroyMarkup();const I=t.ref.image;if(i){I.originX=null,I.originY=null,I.translateX=null,I.translateY=null,I.rotateZ=null,I.scaleX=null,I.scaleY=null;return}I.originX=p.x,I.originY=p.y,I.translateX=m.x,I.translateY=m.y,I.rotateZ=g,I.scaleX=T,I.scaleY=T}}),lA=e=>e.utils.createView({name:"image-preview",tag:"div",ignoreRect:!0,mixins:{apis:["image","crop","markup","resize","dirty","background"],styles:["translateY","scaleX","scaleY","opacity"],animations:{scaleX:lt,scaleY:lt,translateY:lt,opacity:{type:"tween",duration:400}}},create:({root:t,props:n})=>{t.ref.clip=t.appendChildView(t.createChildView(aA(e),{id:n.id,image:n.image,crop:n.crop,markup:n.markup,resize:n.resize,dirty:n.dirty,background:n.background}))},write:({root:t,props:n,shouldOptimize:i})=>{const{clip:o}=t.ref,{image:s,crop:r,markup:a,resize:c,dirty:l}=n;if(o.crop=r,o.markup=a,o.resize=c,o.dirty=l,o.opacity=i?0:1,i||t.rect.element.hidden)return;const d=s.height/s.width;let h=r.aspectRatio||d;const p=t.rect.inner.width,m=t.rect.inner.height;let g=t.query("GET_IMAGE_PREVIEW_HEIGHT");const y=t.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),E=t.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),v=t.query("GET_PANEL_ASPECT_RATIO"),T=t.query("GET_ALLOW_MULTIPLE");v&&!T&&(g=p*v,h=v);let I=g!==null?g:Math.max(y,Math.min(p*h,E)),S=I/h;S>p&&(S=p,I=S*h),I>m&&(I=m,S=m/h),o.width=S,o.height=I}});let cA=`<svg width="500" height="200" viewBox="0 0 500 200" preserveAspectRatio="none">
    <defs>
        <radialGradient id="gradient-__UID__" cx=".5" cy="1.25" r="1.15">
            <stop offset='50%' stop-color='#000000'/>
            <stop offset='56%' stop-color='#0a0a0a'/>
            <stop offset='63%' stop-color='#262626'/>
            <stop offset='69%' stop-color='#4f4f4f'/>
            <stop offset='75%' stop-color='#808080'/>
            <stop offset='81%' stop-color='#b1b1b1'/>
            <stop offset='88%' stop-color='#dadada'/>
            <stop offset='94%' stop-color='#f6f6f6'/>
            <stop offset='100%' stop-color='#ffffff'/>
        </radialGradient>
        <mask id="mask-__UID__">
            <rect x="0" y="0" width="500" height="200" fill="url(#gradient-__UID__)"></rect>
        </mask>
    </defs>
    <rect x="0" width="500" height="200" fill="currentColor" mask="url(#mask-__UID__)"></rect>
</svg>`,Jc=0;const uA=e=>e.utils.createView({name:"image-preview-overlay",tag:"div",ignoreRect:!0,create:({root:t,props:n})=>{let i=cA;if(document.querySelector("base")){const o=new URL(window.location.href.replace(window.location.hash,"")).href;i=i.replace(/url\(\#/g,"url("+o+"#")}Jc++,t.element.classList.add(`filepond--image-preview-overlay-${n.status}`),t.element.innerHTML=i.replace(/__UID__/g,Jc)},mixins:{styles:["opacity"],animations:{opacity:{type:"spring",mass:25}}}}),dA=function(){self.onmessage=e=>{createImageBitmap(e.data.message.file).then(t=>{self.postMessage({id:e.data.id,message:t},[t])})}},fA=function(){self.onmessage=e=>{const t=e.data.message.imageData,n=e.data.message.colorMatrix,i=t.data,o=i.length,s=n[0],r=n[1],a=n[2],c=n[3],l=n[4],d=n[5],h=n[6],p=n[7],m=n[8],g=n[9],y=n[10],E=n[11],v=n[12],T=n[13],I=n[14],S=n[15],A=n[16],P=n[17],D=n[18],R=n[19];let C=0,_=0,b=0,N=0,F=0;for(;C<o;C+=4)_=i[C]/255,b=i[C+1]/255,N=i[C+2]/255,F=i[C+3]/255,i[C]=Math.max(0,Math.min((_*s+b*r+N*a+F*c+l)*255,255)),i[C+1]=Math.max(0,Math.min((_*d+b*h+N*p+F*m+g)*255,255)),i[C+2]=Math.max(0,Math.min((_*y+b*E+N*v+F*T+I)*255,255)),i[C+3]=Math.max(0,Math.min((_*S+b*A+N*P+F*D+R)*255,255));self.postMessage({id:e.data.id,message:t},[t.data.buffer])}},hA=(e,t)=>{let n=new Image;n.onload=()=>{const i=n.naturalWidth,o=n.naturalHeight;n=null,t(i,o)},n.src=e},pA={1:()=>[1,0,0,1,0,0],2:e=>[-1,0,0,1,e,0],3:(e,t)=>[-1,0,0,-1,e,t],4:(e,t)=>[1,0,0,-1,0,t],5:()=>[0,1,1,0,0,0],6:(e,t)=>[0,1,-1,0,t,0],7:(e,t)=>[0,-1,-1,0,t,e],8:e=>[0,-1,1,0,0,e]},mA=(e,t,n,i)=>{i!==-1&&e.transform.apply(e,pA[i](t,n))},gA=(e,t,n,i)=>{t=Math.round(t),n=Math.round(n);const o=document.createElement("canvas");o.width=t,o.height=n;const s=o.getContext("2d");return i>=5&&i<=8&&([t,n]=[n,t]),mA(s,t,n,i),s.drawImage(e,0,0,t,n),o},wp=e=>/^image/.test(e.type)&&!/svg/.test(e.type),yA=10,EA=10,TA=e=>{const t=Math.min(yA/e.width,EA/e.height),n=document.createElement("canvas"),i=n.getContext("2d"),o=n.width=Math.ceil(e.width*t),s=n.height=Math.ceil(e.height*t);i.drawImage(e,0,0,o,s);let r=null;try{r=i.getImageData(0,0,o,s).data}catch{return null}const a=r.length;let c=0,l=0,d=0,h=0;for(;h<a;h+=4)c+=r[h]*r[h],l+=r[h+1]*r[h+1],d+=r[h+2]*r[h+2];return c=ps(c,a),l=ps(l,a),d=ps(d,a),{r:c,g:l,b:d}},ps=(e,t)=>Math.floor(Math.sqrt(e/(t/4))),IA=(e,t)=>(t=t||document.createElement("canvas"),t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),t),vA=e=>{let t;try{t=new ImageData(e.width,e.height)}catch{t=document.createElement("canvas").getContext("2d").createImageData(e.width,e.height)}return t.data.set(new Uint8ClampedArray(e.data)),t},_A=e=>new Promise((t,n)=>{const i=new Image;i.crossOrigin="Anonymous",i.onload=()=>{t(i)},i.onerror=o=>{n(o)},i.src=e}),CA=e=>{const t=uA(e),n=lA(e),{createWorker:i}=e.utils,o=(T,I,S)=>new Promise(A=>{T.ref.imageData||(T.ref.imageData=S.getContext("2d").getImageData(0,0,S.width,S.height));const P=vA(T.ref.imageData);if(!I||I.length!==20)return S.getContext("2d").putImageData(P,0,0),A();const D=i(fA);D.post({imageData:P,colorMatrix:I},R=>{S.getContext("2d").putImageData(R,0,0),D.terminate(),A()},[P.data.buffer])}),s=(T,I)=>{T.removeChildView(I),I.image.width=1,I.image.height=1,I._destroy()},r=({root:T})=>{const I=T.ref.images.shift();return I.opacity=0,I.translateY=-15,T.ref.imageViewBin.push(I),I},a=({root:T,props:I,image:S})=>{const A=I.id,P=T.query("GET_ITEM",{id:A});if(!P)return;const D=P.getMetadata("crop")||{center:{x:.5,y:.5},flip:{horizontal:!1,vertical:!1},zoom:1,rotation:0,aspectRatio:null},R=T.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR");let C,_,b=!1;T.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(C=P.getMetadata("markup")||[],_=P.getMetadata("resize"),b=!0);const N=T.appendChildView(T.createChildView(n,{id:A,image:S,crop:D,resize:_,markup:C,dirty:b,background:R,opacity:0,scaleX:1.15,scaleY:1.15,translateY:15}),T.childViews.length);T.ref.images.push(N),N.opacity=1,N.scaleX=1,N.scaleY=1,N.translateY=0,setTimeout(()=>{T.dispatch("DID_IMAGE_PREVIEW_SHOW",{id:A})},250)},c=({root:T,props:I})=>{const S=T.query("GET_ITEM",{id:I.id});if(!S)return;const A=T.ref.images[T.ref.images.length-1];A.crop=S.getMetadata("crop"),A.background=T.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR"),T.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(A.dirty=!0,A.resize=S.getMetadata("resize"),A.markup=S.getMetadata("markup"))},l=({root:T,props:I,action:S})=>{if(!/crop|filter|markup|resize/.test(S.change.key)||!T.ref.images.length)return;const A=T.query("GET_ITEM",{id:I.id});if(A){if(/filter/.test(S.change.key)){const P=T.ref.images[T.ref.images.length-1];o(T,S.change.value,P.image);return}if(/crop|markup|resize/.test(S.change.key)){const P=A.getMetadata("crop"),D=T.ref.images[T.ref.images.length-1];if(P&&P.aspectRatio&&D.crop&&D.crop.aspectRatio&&Math.abs(P.aspectRatio-D.crop.aspectRatio)>1e-5){const R=r({root:T});a({root:T,props:I,image:IA(R.image)})}else c({root:T,props:I})}}},d=T=>{const S=window.navigator.userAgent.match(/Firefox\/([0-9]+)\./);return(S?parseInt(S[1]):null)<=58?!1:"createImageBitmap"in window&&wp(T)},h=({root:T,props:I})=>{const{id:S}=I,A=T.query("GET_ITEM",S);if(!A)return;const P=URL.createObjectURL(A.file);hA(P,(D,R)=>{T.dispatch("DID_IMAGE_PREVIEW_CALCULATE_SIZE",{id:S,width:D,height:R})})},p=({root:T,props:I})=>{const{id:S}=I,A=T.query("GET_ITEM",S);if(!A)return;const P=URL.createObjectURL(A.file),D=()=>{_A(P).then(R)},R=C=>{URL.revokeObjectURL(P);const b=(A.getMetadata("exif")||{}).orientation||-1;let{width:N,height:F}=C;if(!N||!F)return;b>=5&&b<=8&&([N,F]=[F,N]);const x=Math.max(1,window.devicePixelRatio*.75),w=T.query("GET_IMAGE_PREVIEW_ZOOM_FACTOR")*x,M=F/N,L=T.rect.element.width,O=T.rect.element.height;let U=L,B=U*M;M>1?(U=Math.min(N,L*w),B=U*M):(B=Math.min(F,O*w),U=B/M);const $=gA(C,U,B,b),X=()=>{const te=T.query("GET_IMAGE_PREVIEW_CALCULATE_AVERAGE_IMAGE_COLOR")?TA(data):null;A.setMetadata("color",te,!0),"close"in C&&C.close(),T.ref.overlayShadow.opacity=1,a({root:T,props:I,image:$})},Y=A.getMetadata("filter");Y?o(T,Y,$).then(X):X()};if(d(A.file)){const C=i(dA);C.post({file:A.file},_=>{if(C.terminate(),!_){D();return}R(_)})}else D()},m=({root:T})=>{const I=T.ref.images[T.ref.images.length-1];I.translateY=0,I.scaleX=1,I.scaleY=1,I.opacity=1},g=({root:T})=>{T.ref.overlayShadow.opacity=1,T.ref.overlayError.opacity=0,T.ref.overlaySuccess.opacity=0},y=({root:T})=>{T.ref.overlayShadow.opacity=.25,T.ref.overlayError.opacity=1},E=({root:T})=>{T.ref.overlayShadow.opacity=.25,T.ref.overlaySuccess.opacity=1},v=({root:T})=>{T.ref.images=[],T.ref.imageData=null,T.ref.imageViewBin=[],T.ref.overlayShadow=T.appendChildView(T.createChildView(t,{opacity:0,status:"idle"})),T.ref.overlaySuccess=T.appendChildView(T.createChildView(t,{opacity:0,status:"success"})),T.ref.overlayError=T.appendChildView(T.createChildView(t,{opacity:0,status:"failure"}))};return e.utils.createView({name:"image-preview-wrapper",create:v,styles:["height"],apis:["height"],destroy:({root:T})=>{T.ref.images.forEach(I=>{I.image.width=1,I.image.height=1})},didWriteView:({root:T})=>{T.ref.images.forEach(I=>{I.dirty=!1})},write:e.utils.createRoute({DID_IMAGE_PREVIEW_DRAW:m,DID_IMAGE_PREVIEW_CONTAINER_CREATE:h,DID_FINISH_CALCULATE_PREVIEWSIZE:p,DID_UPDATE_ITEM_METADATA:l,DID_THROW_ITEM_LOAD_ERROR:y,DID_THROW_ITEM_PROCESSING_ERROR:y,DID_THROW_ITEM_INVALID:y,DID_COMPLETE_ITEM_PROCESSING:E,DID_START_ITEM_PROCESSING:g,DID_REVERT_ITEM_PROCESSING:g},({root:T})=>{const I=T.ref.imageViewBin.filter(S=>S.opacity===0);T.ref.imageViewBin=T.ref.imageViewBin.filter(S=>S.opacity>0),I.forEach(S=>s(T,S)),I.length=0})})},SA=e=>{const{addFilter:t,utils:n}=e,{Type:i,createRoute:o,isFile:s}=n,r=CA(e);return t("CREATE_VIEW",a=>{const{is:c,view:l,query:d}=a;if(!c("file")||!d("GET_ALLOW_IMAGE_PREVIEW"))return;const h=({root:E,props:v})=>{const{id:T}=v,I=d("GET_ITEM",T);if(!I||!s(I.file)||I.archived)return;const S=I.file;if(!PS(S)||!d("GET_IMAGE_PREVIEW_FILTER_ITEM")(I))return;const A="createImageBitmap"in(window||{}),P=d("GET_IMAGE_PREVIEW_MAX_FILE_SIZE");if(!A&&P&&S.size>P)return;E.ref.imagePreview=l.appendChildView(l.createChildView(r,{id:T}));const D=E.query("GET_IMAGE_PREVIEW_HEIGHT");D&&E.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:I.id,height:D});const R=!A&&S.size>d("GET_IMAGE_PREVIEW_MAX_INSTANT_PREVIEW_FILE_SIZE");E.dispatch("DID_IMAGE_PREVIEW_CONTAINER_CREATE",{id:T},R)},p=(E,v)=>{if(!E.ref.imagePreview)return;let{id:T}=v;const I=E.query("GET_ITEM",{id:T});if(!I)return;const S=E.query("GET_PANEL_ASPECT_RATIO"),A=E.query("GET_ITEM_PANEL_ASPECT_RATIO"),P=E.query("GET_IMAGE_PREVIEW_HEIGHT");if(S||A||P)return;let{imageWidth:D,imageHeight:R}=E.ref;if(!D||!R)return;const C=E.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),_=E.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),N=(I.getMetadata("exif")||{}).orientation||-1;if(N>=5&&N<=8&&([D,R]=[R,D]),!wp(I.file)||E.query("GET_IMAGE_PREVIEW_UPSCALE")){const L=2048/D;D*=L,R*=L}const F=R/D,x=(I.getMetadata("crop")||{}).aspectRatio||F;let k=Math.max(C,Math.min(R,_));const w=E.rect.element.width,M=Math.min(w*x,k);E.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:I.id,height:M})},m=({root:E})=>{E.ref.shouldRescale=!0},g=({root:E,action:v})=>{v.change.key==="crop"&&(E.ref.shouldRescale=!0)},y=({root:E,action:v})=>{E.ref.imageWidth=v.width,E.ref.imageHeight=v.height,E.ref.shouldRescale=!0,E.ref.shouldDrawPreview=!0,E.dispatch("KICK")};l.registerWriter(o({DID_RESIZE_ROOT:m,DID_STOP_RESIZE:m,DID_LOAD_ITEM:h,DID_IMAGE_PREVIEW_CALCULATE_SIZE:y,DID_UPDATE_ITEM_METADATA:g},({root:E,props:v})=>{E.ref.imagePreview&&(E.rect.element.hidden||(E.ref.shouldRescale&&(p(E,v),E.ref.shouldRescale=!1),E.ref.shouldDrawPreview&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{E.dispatch("DID_FINISH_CALCULATE_PREVIEWSIZE",{id:v.id})})}),E.ref.shouldDrawPreview=!1)))}))}),{options:{allowImagePreview:[!0,i.BOOLEAN],imagePreviewFilterItem:[()=>!0,i.FUNCTION],imagePreviewHeight:[null,i.INT],imagePreviewMinHeight:[44,i.INT],imagePreviewMaxHeight:[256,i.INT],imagePreviewMaxFileSize:[null,i.INT],imagePreviewZoomFactor:[2,i.INT],imagePreviewUpscale:[!1,i.BOOLEAN],imagePreviewMaxInstantPreviewFileSize:[1e6,i.INT],imagePreviewTransparencyIndicator:[null,i.STRING],imagePreviewCalculateAverageImageColor:[!1,i.BOOLEAN],imagePreviewMarkupShow:[!0,i.BOOLEAN],imagePreviewMarkupFilter:[()=>!0,i.FUNCTION]}}},AA=typeof window<"u"&&typeof window.document<"u";AA&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:SA}));/*!
 * FilePondPluginFileValidateType 1.2.9
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const RA=({addFilter:e,utils:t})=>{const{Type:n,isString:i,replaceInString:o,guesstimateMimeType:s,getExtensionFromFilename:r,getFilenameFromURL:a}=t,c=(m,g)=>{const y=(/^[^/]+/.exec(m)||[]).pop(),E=g.slice(0,-2);return y===E},l=(m,g)=>m.some(y=>/\*$/.test(y)?c(g,y):y===g),d=m=>{let g="";if(i(m)){const y=a(m),E=r(y);E&&(g=s(E))}else g=m.type;return g},h=(m,g,y)=>{if(g.length===0)return!0;const E=d(m);return y?new Promise((v,T)=>{y(m,E).then(I=>{l(g,I)?v():T()}).catch(T)}):l(g,E)},p=m=>g=>m[g]===null?!1:m[g]||g;return e("SET_ATTRIBUTE_TO_OPTION_MAP",m=>Object.assign(m,{accept:"acceptedFileTypes"})),e("ALLOW_HOPPER_ITEM",(m,{query:g})=>g("GET_ALLOW_FILE_TYPE_VALIDATION")?h(m,g("GET_ACCEPTED_FILE_TYPES")):!0),e("LOAD_FILE",(m,{query:g})=>new Promise((y,E)=>{if(!g("GET_ALLOW_FILE_TYPE_VALIDATION")){y(m);return}const v=g("GET_ACCEPTED_FILE_TYPES"),T=g("GET_FILE_VALIDATE_TYPE_DETECT_TYPE"),I=h(m,v,T),S=()=>{const A=v.map(p(g("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES_MAP"))).filter(D=>D!==!1),P=A.filter((D,R)=>A.indexOf(D)===R);E({status:{main:g("GET_LABEL_FILE_TYPE_NOT_ALLOWED"),sub:o(g("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES"),{allTypes:P.join(", "),allButLastType:P.slice(0,-1).join(", "),lastType:P[P.length-1]})}})};if(typeof I=="boolean")return I?y(m):S();I.then(()=>{y(m)}).catch(S)})),{options:{allowFileTypeValidation:[!0,n.BOOLEAN],acceptedFileTypes:[[],n.ARRAY],labelFileTypeNotAllowed:["File is of invalid type",n.STRING],fileValidateTypeLabelExpectedTypes:["Expects {allButLastType} or {lastType}",n.STRING],fileValidateTypeLabelExpectedTypesMap:[{},n.OBJECT],fileValidateTypeDetectType:[null,n.FUNCTION]}}},wA=typeof window<"u"&&typeof window.document<"u";wA&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:RA}));/*!
 * FilePondPluginImageCrop 2.0.6
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const Kc=e=>/^image/.test(e.type),MA=({addFilter:e,utils:t})=>{const{Type:n,isFile:i,getNumericAspectRatioFromString:o}=t,s=(l,d)=>!(!Kc(l.file)||!d("GET_ALLOW_IMAGE_CROP")),r=l=>typeof l=="object",a=l=>typeof l=="number",c=(l,d)=>l.setMetadata("crop",Object.assign({},l.getMetadata("crop"),d));return e("DID_CREATE_ITEM",(l,{query:d})=>{l.extend("setImageCrop",h=>{if(!(!s(l,d)||!r(center)))return l.setMetadata("crop",h),h}),l.extend("setImageCropCenter",h=>{if(!(!s(l,d)||!r(h)))return c(l,{center:h})}),l.extend("setImageCropZoom",h=>{if(!(!s(l,d)||!a(h)))return c(l,{zoom:Math.max(1,h)})}),l.extend("setImageCropRotation",h=>{if(!(!s(l,d)||!a(h)))return c(l,{rotation:h})}),l.extend("setImageCropFlip",h=>{if(!(!s(l,d)||!r(h)))return c(l,{flip:h})}),l.extend("setImageCropAspectRatio",h=>{if(!s(l,d)||typeof h>"u")return;const p=l.getMetadata("crop"),m=o(h),g={center:{x:.5,y:.5},flip:p?Object.assign({},p.flip):{horizontal:!1,vertical:!1},rotation:0,zoom:1,aspectRatio:m};return l.setMetadata("crop",g),g})}),e("DID_LOAD_ITEM",(l,{query:d})=>new Promise((h,p)=>{const m=l.file;if(!i(m)||!Kc(m)||!d("GET_ALLOW_IMAGE_CROP")||l.getMetadata("crop"))return h(l);const y=d("GET_IMAGE_CROP_ASPECT_RATIO");l.setMetadata("crop",{center:{x:.5,y:.5},flip:{horizontal:!1,vertical:!1},rotation:0,zoom:1,aspectRatio:y?o(y):null}),h(l)})),{options:{allowImageCrop:[!0,n.BOOLEAN],imageCropAspectRatio:[null,n.STRING]}}},PA=typeof window<"u"&&typeof window.document<"u";PA&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:MA}));/*!
 * FilePondPluginImageResize 2.0.10
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const DA=e=>/^image/.test(e.type),bA=(e,t)=>{let n=new Image;n.onload=()=>{const i=n.naturalWidth,o=n.naturalHeight;n=null,t({width:i,height:o})},n.onerror=()=>t(null),n.src=e},xA=({addFilter:e,utils:t})=>{const{Type:n}=t;return e("DID_LOAD_ITEM",(i,{query:o})=>new Promise((s,r)=>{const a=i.file;if(!DA(a)||!o("GET_ALLOW_IMAGE_RESIZE"))return s(i);const c=o("GET_IMAGE_RESIZE_MODE"),l=o("GET_IMAGE_RESIZE_TARGET_WIDTH"),d=o("GET_IMAGE_RESIZE_TARGET_HEIGHT"),h=o("GET_IMAGE_RESIZE_UPSCALE");if(l===null&&d===null)return s(i);const p=l===null?d:l,m=d===null?p:d,g=URL.createObjectURL(a);bA(g,y=>{if(URL.revokeObjectURL(g),!y)return s(i);let{width:E,height:v}=y;const T=(i.getMetadata("exif")||{}).orientation||-1;if(T>=5&&T<=8&&([E,v]=[v,E]),E===p&&v===m)return s(i);if(!h){if(c==="cover"){if(E<=p||v<=m)return s(i)}else if(E<=p&&v<=p)return s(i)}i.setMetadata("resize",{mode:c,upscale:h,size:{width:p,height:m}}),s(i)})})),{options:{allowImageResize:[!0,n.BOOLEAN],imageResizeMode:["cover",n.STRING],imageResizeUpscale:[!0,n.BOOLEAN],imageResizeTargetWidth:[null,n.INT],imageResizeTargetHeight:[null,n.INT]}}},NA=typeof window<"u"&&typeof window.document<"u";NA&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:xA}));/*!
 * FilePondPluginImageTransform 3.8.7
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const LA=e=>/^image/.test(e.type),OA=e=>e.substr(0,e.lastIndexOf("."))||e,FA={jpeg:"jpg","svg+xml":"svg"},kA=(e,t)=>{const n=OA(e),i=t.split("/")[1],o=FA[i]||i;return`${n}.${o}`},VA=e=>/jpeg|png|svg\+xml/.test(e)?e:"image/jpeg",UA=e=>/^image/.test(e.type),GA={1:()=>[1,0,0,1,0,0],2:e=>[-1,0,0,1,e,0],3:(e,t)=>[-1,0,0,-1,e,t],4:(e,t)=>[1,0,0,-1,0,t],5:()=>[0,1,1,0,0,0],6:(e,t)=>[0,1,-1,0,t,0],7:(e,t)=>[0,-1,-1,0,t,e],8:e=>[0,-1,1,0,0,e]},BA=(e,t,n)=>(n===-1&&(n=1),GA[n](e,t)),Xn=(e,t)=>({x:e,y:t}),HA=(e,t)=>e.x*t.x+e.y*t.y,Xc=(e,t)=>Xn(e.x-t.x,e.y-t.y),qA=(e,t)=>HA(Xc(e,t),Xc(e,t)),Zc=(e,t)=>Math.sqrt(qA(e,t)),Qc=(e,t)=>{const n=e,i=1.5707963267948966,o=t,s=1.5707963267948966-t,r=Math.sin(i),a=Math.sin(o),c=Math.sin(s),l=Math.cos(s),d=n/r,h=d*a,p=d*c;return Xn(l*h,l*p)},WA=(e,t)=>{const n=e.width,i=e.height,o=Qc(n,t),s=Qc(i,t),r=Xn(e.x+Math.abs(o.x),e.y-Math.abs(o.y)),a=Xn(e.x+e.width+Math.abs(s.y),e.y+Math.abs(s.x)),c=Xn(e.x-Math.abs(s.y),e.y+e.height-Math.abs(s.x));return{width:Zc(r,a),height:Zc(r,c)}},Mp=(e,t,n=0,i={x:.5,y:.5})=>{const o=i.x>.5?1-i.x:i.x,s=i.y>.5?1-i.y:i.y,r=o*2*e.width,a=s*2*e.height,c=WA(t,n);return Math.max(c.width/r,c.height/a)},Pp=(e,t)=>{let n=e.width,i=n*t;i>e.height&&(i=e.height,n=i/t);const o=(e.width-n)*.5,s=(e.height-i)*.5;return{x:o,y:s,width:n,height:i}},jc=(e,t,n=1)=>{const i=e.height/e.width;let o=1,s=t,r=1,a=i;a>s&&(a=s,r=a/i);const c=Math.max(o/r,s/a),l=e.width/(n*c*r),d=l*t;return{width:l,height:d}},Dp=e=>{e.width=1,e.height=1,e.getContext("2d").clearRect(0,0,1,1)},eu=e=>e&&(e.horizontal||e.vertical),$A=(e,t,n)=>{if(t<=1&&!eu(n))return e.width=e.naturalWidth,e.height=e.naturalHeight,e;const i=document.createElement("canvas"),o=e.naturalWidth,s=e.naturalHeight,r=t>=5&&t<=8;r?(i.width=s,i.height=o):(i.width=o,i.height=s);const a=i.getContext("2d");if(t&&a.transform.apply(a,BA(o,s,t)),eu(n)){const c=[1,0,0,1,0,0];(!r&&n.horizontal||r&n.vertical)&&(c[0]=-1,c[4]=o),(!r&&n.vertical||r&&n.horizontal)&&(c[3]=-1,c[5]=s),a.transform(...c)}return a.drawImage(e,0,0,o,s),i},YA=(e,t,n={},i={})=>{const{canvasMemoryLimit:o,background:s=null}=i,r=n.zoom||1,a=$A(e,t,n.flip),c={width:a.width,height:a.height},l=n.aspectRatio||c.height/c.width;let d=jc(c,l,r);if(o){const I=d.width*d.height;if(I>o){const S=Math.sqrt(o)/Math.sqrt(I);c.width=Math.floor(c.width*S),c.height=Math.floor(c.height*S),d=jc(c,l,r)}}const h=document.createElement("canvas"),p={x:d.width*.5,y:d.height*.5},m={width:d.width,height:d.height},g=typeof n.scaleToFit>"u"||n.scaleToFit,y=r*Mp(c,Pp(m,l),n.rotation,g?n.center:{x:.5,y:.5});h.width=Math.round(d.width/y),h.height=Math.round(d.height/y),p.x/=y,p.y/=y;const E={x:p.x-c.width*(n.center?n.center.x:.5),y:p.y-c.height*(n.center?n.center.y:.5)},v=h.getContext("2d");s&&(v.fillStyle=s,v.fillRect(0,0,h.width,h.height)),v.translate(p.x,p.y),v.rotate(n.rotation||0),v.drawImage(a,E.x-p.x,E.y-p.y,c.width,c.height);const T=v.getImageData(0,0,h.width,h.height);return Dp(h),T},zA=typeof window<"u"&&typeof window.document<"u";zA&&(HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){var i=this.toDataURL(t,n).split(",")[1];setTimeout(function(){for(var o=atob(i),s=o.length,r=new Uint8Array(s),a=0;a<s;a++)r[a]=o.charCodeAt(a);e(new Blob([r],{type:t||"image/png"}))})}}));const JA=(e,t,n=null)=>new Promise(i=>{const o=n?n(e):e;Promise.resolve(o).then(s=>{s.toBlob(i,t.type,t.quality)})}),oo=(e,t)=>ai(e.x*t,e.y*t),so=(e,t)=>ai(e.x+t.x,e.y+t.y),bp=e=>{const t=Math.sqrt(e.x*e.x+e.y*e.y);return t===0?{x:0,y:0}:ai(e.x/t,e.y/t)},St=(e,t,n)=>{const i=Math.cos(t),o=Math.sin(t),s=ai(e.x-n.x,e.y-n.y);return ai(n.x+i*s.x-o*s.y,n.y+o*s.x+i*s.y)},ai=(e=0,t=0)=>({x:e,y:t}),Se=(e,t,n=1,i)=>{if(typeof e=="string")return parseFloat(e)*n;if(typeof e=="number")return e*(i?t[i]:Math.min(t.width,t.height))},zt=(e,t,n)=>{const i=e.borderStyle||e.lineStyle||"solid",o=e.backgroundColor||e.fontColor||"transparent",s=e.borderColor||e.lineColor||"transparent",r=Se(e.borderWidth||e.lineWidth,t,n),a=e.lineCap||"round",c=e.lineJoin||"round",l=typeof i=="string"?"":i.map(h=>Se(h,t,n)).join(","),d=e.opacity||1;return{"stroke-linecap":a,"stroke-linejoin":c,"stroke-width":r||0,"stroke-dasharray":l,stroke:s,fill:o,opacity:d}},We=e=>e!=null,Mn=(e,t,n=1)=>{let i=Se(e.x,t,n,"width")||Se(e.left,t,n,"width"),o=Se(e.y,t,n,"height")||Se(e.top,t,n,"height"),s=Se(e.width,t,n,"width"),r=Se(e.height,t,n,"height"),a=Se(e.right,t,n,"width"),c=Se(e.bottom,t,n,"height");return We(o)||(We(r)&&We(c)?o=t.height-r-c:o=c),We(i)||(We(s)&&We(a)?i=t.width-s-a:i=a),We(s)||(We(i)&&We(a)?s=t.width-i-a:s=0),We(r)||(We(o)&&We(c)?r=t.height-o-c:r=0),{x:i||0,y:o||0,width:s||0,height:r||0}},KA=e=>e.map((t,n)=>`${n===0?"M":"L"} ${t.x} ${t.y}`).join(" "),ut=(e,t)=>Object.keys(t).forEach(n=>e.setAttribute(n,t[n])),XA="http://www.w3.org/2000/svg",ln=(e,t)=>{const n=document.createElementNS(XA,e);return t&&ut(n,t),n},ZA=e=>ut(e,{...e.rect,...e.styles}),QA=e=>{const t=e.rect.x+e.rect.width*.5,n=e.rect.y+e.rect.height*.5,i=e.rect.width*.5,o=e.rect.height*.5;return ut(e,{cx:t,cy:n,rx:i,ry:o,...e.styles})},jA={contain:"xMidYMid meet",cover:"xMidYMid slice"},eR=(e,t)=>{ut(e,{...e.rect,...e.styles,preserveAspectRatio:jA[t.fit]||"none"})},tR={left:"start",center:"middle",right:"end"},nR=(e,t,n,i)=>{const o=Se(t.fontSize,n,i),s=t.fontFamily||"sans-serif",r=t.fontWeight||"normal",a=tR[t.textAlign]||"start";ut(e,{...e.rect,...e.styles,"stroke-width":0,"font-weight":r,"font-size":o,"font-family":s,"text-anchor":a}),e.text!==t.text&&(e.text=t.text,e.textContent=t.text.length?t.text:" ")},iR=(e,t,n,i)=>{ut(e,{...e.rect,...e.styles,fill:"none"});const o=e.childNodes[0],s=e.childNodes[1],r=e.childNodes[2],a=e.rect,c={x:e.rect.x+e.rect.width,y:e.rect.y+e.rect.height};if(ut(o,{x1:a.x,y1:a.y,x2:c.x,y2:c.y}),!t.lineDecoration)return;s.style.display="none",r.style.display="none";const l=bp({x:c.x-a.x,y:c.y-a.y}),d=Se(.05,n,i);if(t.lineDecoration.indexOf("arrow-begin")!==-1){const h=oo(l,d),p=so(a,h),m=St(a,2,p),g=St(a,-2,p);ut(s,{style:"display:block;",d:`M${m.x},${m.y} L${a.x},${a.y} L${g.x},${g.y}`})}if(t.lineDecoration.indexOf("arrow-end")!==-1){const h=oo(l,-d),p=so(c,h),m=St(c,2,p),g=St(c,-2,p);ut(r,{style:"display:block;",d:`M${m.x},${m.y} L${c.x},${c.y} L${g.x},${g.y}`})}},oR=(e,t,n,i)=>{ut(e,{...e.styles,fill:"none",d:KA(t.points.map(o=>({x:Se(o.x,n,i,"width"),y:Se(o.y,n,i,"height")})))})},Di=e=>t=>ln(e,{id:t.id}),sR=e=>{const t=ln("image",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round",opacity:"0"});return t.onload=()=>{t.setAttribute("opacity",e.opacity||1)},t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.src),t},rR=e=>{const t=ln("g",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round"}),n=ln("line");t.appendChild(n);const i=ln("path");t.appendChild(i);const o=ln("path");return t.appendChild(o),t},aR={image:sR,rect:Di("rect"),ellipse:Di("ellipse"),text:Di("text"),path:Di("path"),line:rR},lR={rect:ZA,ellipse:QA,image:eR,text:nR,path:oR,line:iR},cR=(e,t)=>aR[e](t),uR=(e,t,n,i,o)=>{t!=="path"&&(e.rect=Mn(n,i,o)),e.styles=zt(n,i,o),lR[t](e,n,i,o)},xp=(e,t)=>e[1].zIndex>t[1].zIndex?1:e[1].zIndex<t[1].zIndex?-1:0,dR=(e,t={},n,i)=>new Promise(o=>{const{background:s=null}=i,r=new FileReader;r.onloadend=()=>{const a=r.result,c=document.createElement("div");c.style.cssText="position:absolute;pointer-events:none;width:0;height:0;visibility:hidden;",c.innerHTML=a;const l=c.querySelector("svg");document.body.appendChild(c);const d=l.getBBox();c.parentNode.removeChild(c);const h=c.querySelector("title"),p=l.getAttribute("viewBox")||"",m=l.getAttribute("width")||"",g=l.getAttribute("height")||"";let y=parseFloat(m)||null,E=parseFloat(g)||null;const v=(m.match(/[a-z]+/)||[])[0]||"",T=(g.match(/[a-z]+/)||[])[0]||"",I=p.split(" ").map(parseFloat),S=I.length?{x:I[0],y:I[1],width:I[2],height:I[3]}:d;let A=y??S.width,P=E??S.height;l.style.overflow="visible",l.setAttribute("width",A),l.setAttribute("height",P);let D="";if(n&&n.length){const Y={width:A,height:P};D=n.sort(xp).reduce((te,G)=>{const W=cR(G[0],G[1]);return uR(W,G[0],G[1],Y),W.removeAttribute("id"),W.getAttribute("opacity")===1&&W.removeAttribute("opacity"),te+`
`+W.outerHTML+`
`},""),D=`

<g>${D.replace(/&nbsp;/g," ")}</g>

`}const R=t.aspectRatio||P/A,C=A,_=C*R,b=typeof t.scaleToFit>"u"||t.scaleToFit,N=t.center?t.center.x:.5,F=t.center?t.center.y:.5,x=Mp({width:A,height:P},Pp({width:C,height:_},R),t.rotation,b?{x:N,y:F}:{x:.5,y:.5}),k=t.zoom*x,w=t.rotation*(180/Math.PI),M={x:C*.5,y:_*.5},L={x:M.x-A*N,y:M.y-P*F},O=[`rotate(${w} ${M.x} ${M.y})`,`translate(${M.x} ${M.y})`,`scale(${k})`,`translate(${-M.x} ${-M.y})`,`translate(${L.x} ${L.y})`],U=t.flip&&t.flip.horizontal,B=t.flip&&t.flip.vertical,$=[`scale(${U?-1:1} ${B?-1:1})`,`translate(${U?-A:0} ${B?-P:0})`],X=`<?xml version="1.0" encoding="UTF-8"?>
<svg width="${C}${v}" height="${_}${T}" 
viewBox="0 0 ${C} ${_}" ${s?'style="background:'+s+'" ':""}
preserveAspectRatio="xMinYMin"
xmlns:xlink="http://www.w3.org/1999/xlink"
xmlns="http://www.w3.org/2000/svg">
<!-- Generated by PQINA - https://pqina.nl/ -->
<title>${h?h.textContent:""}</title>
<g transform="${O.join(" ")}">
<g transform="${$.join(" ")}">
${l.outerHTML}${D}
</g>
</g>
</svg>`;o(X)},r.readAsText(e)}),fR=e=>{let t;try{t=new ImageData(e.width,e.height)}catch{t=document.createElement("canvas").getContext("2d").createImageData(e.width,e.height)}return t.data.set(e.data),t},hR=()=>{const e={resize:d,filter:l},t=(h,p)=>(h.forEach(m=>{p=e[m.type](p,m.data)}),p),n=(h,p)=>{let m=h.transforms,g=null;if(m.forEach(y=>{y.type==="filter"&&(g=y)}),g){let y=null;m.forEach(E=>{E.type==="resize"&&(y=E)}),y&&(y.data.matrix=g.data,m=m.filter(E=>E.type!=="filter"))}p(t(m,h.imageData))};self.onmessage=h=>{n(h.data.message,p=>{self.postMessage({id:h.data.id,message:p},[p.data.buffer])})};const i=1,o=1,s=1;function r(h,p,m){const g=p[h]/255,y=p[h+1]/255,E=p[h+2]/255,v=p[h+3]/255,T=g*m[0]+y*m[1]+E*m[2]+v*m[3]+m[4],I=g*m[5]+y*m[6]+E*m[7]+v*m[8]+m[9],S=g*m[10]+y*m[11]+E*m[12]+v*m[13]+m[14],A=g*m[15]+y*m[16]+E*m[17]+v*m[18]+m[19],P=Math.max(0,T*A)+i*(1-A),D=Math.max(0,I*A)+o*(1-A),R=Math.max(0,S*A)+s*(1-A);p[h]=Math.max(0,Math.min(1,P))*255,p[h+1]=Math.max(0,Math.min(1,D))*255,p[h+2]=Math.max(0,Math.min(1,R))*255}const a=self.JSON.stringify([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]);function c(h){return self.JSON.stringify(h||[])===a}function l(h,p){if(!p||c(p))return h;const m=h.data,g=m.length,y=p[0],E=p[1],v=p[2],T=p[3],I=p[4],S=p[5],A=p[6],P=p[7],D=p[8],R=p[9],C=p[10],_=p[11],b=p[12],N=p[13],F=p[14],x=p[15],k=p[16],w=p[17],M=p[18],L=p[19];let O=0,U=0,B=0,$=0,X=0,Y=0,te=0,G=0,W=0,Q=0,J=0,j=0;for(;O<g;O+=4)U=m[O]/255,B=m[O+1]/255,$=m[O+2]/255,X=m[O+3]/255,Y=U*y+B*E+$*v+X*T+I,te=U*S+B*A+$*P+X*D+R,G=U*C+B*_+$*b+X*N+F,W=U*x+B*k+$*w+X*M+L,Q=Math.max(0,Y*W)+i*(1-W),J=Math.max(0,te*W)+o*(1-W),j=Math.max(0,G*W)+s*(1-W),m[O]=Math.max(0,Math.min(1,Q))*255,m[O+1]=Math.max(0,Math.min(1,J))*255,m[O+2]=Math.max(0,Math.min(1,j))*255;return h}function d(h,p){let{mode:m="contain",upscale:g=!1,width:y,height:E,matrix:v}=p;if(v=!v||c(v)?null:v,!y&&!E)return l(h,v);if(y===null?y=E:E===null&&(E=y),m!=="force"){let N=y/h.width,F=E/h.height,x=1;if(m==="cover"?x=Math.max(N,F):m==="contain"&&(x=Math.min(N,F)),x>1&&g===!1)return l(h,v);y=h.width*x,E=h.height*x}const T=h.width,I=h.height,S=Math.round(y),A=Math.round(E),P=h.data,D=new Uint8ClampedArray(S*A*4),R=T/S,C=I/A,_=Math.ceil(R*.5),b=Math.ceil(C*.5);for(let N=0;N<A;N++)for(let F=0;F<S;F++){let x=(F+N*S)*4,k=0,w=0,M=0,L=0,O=0,U=0,B=0,$=(N+.5)*C;for(let X=Math.floor(N*C);X<(N+1)*C;X++){let Y=Math.abs($-(X+.5))/b,te=(F+.5)*R,G=Y*Y;for(let W=Math.floor(F*R);W<(F+1)*R;W++){let Q=Math.abs(te-(W+.5))/_,J=Math.sqrt(G+Q*Q);if(J>=-1&&J<=1&&(k=2*J*J*J-3*J*J+1,k>0)){Q=4*(W+X*T);let j=P[Q+3];B+=k*j,M+=k,j<255&&(k=k*j/250),L+=k*P[Q],O+=k*P[Q+1],U+=k*P[Q+2],w+=k}}}D[x]=L/w,D[x+1]=O/w,D[x+2]=U/w,D[x+3]=B/M,v&&r(x,D,v)}return{data:D,width:S,height:A}}},pR=(e,t)=>{if(e.getUint32(t+4,!1)!==1165519206)return;t+=4;const n=e.getUint16(t+=6,!1)===18761;t+=e.getUint32(t+4,n);const i=e.getUint16(t,n);t+=2;for(let o=0;o<i;o++)if(e.getUint16(t+o*12,n)===274)return e.setUint16(t+o*12+8,1,n),!0;return!1},mR=e=>{const t=new DataView(e);if(t.getUint16(0)!==65496)return null;let n=2,i,o,s=!1;for(;n<t.byteLength&&(i=t.getUint16(n,!1),o=t.getUint16(n+2,!1)+2,!(!(i>=65504&&i<=65519||i===65534)||(s||(s=pR(t,n)),n+o>t.byteLength)));)n+=o;return e.slice(0,n)},gR=e=>new Promise(t=>{const n=new FileReader;n.onload=()=>t(mR(n.result)||null),n.readAsArrayBuffer(e.slice(0,256*1024))}),yR=()=>window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,ER=(e,t)=>{const n=yR();if(n){const i=new n;return i.append(e),i.getBlob(t)}return new Blob([e],{type:t})},TR=()=>Math.random().toString(36).substr(2,9),IR=e=>{const t=new Blob(["(",e.toString(),")()"],{type:"application/javascript"}),n=URL.createObjectURL(t),i=new Worker(n),o=[];return{transfer:()=>{},post:(s,r,a)=>{const c=TR();o[c]=r,i.onmessage=l=>{const d=o[l.data.id];d&&(d(l.data.message),delete o[l.data.id])},i.postMessage({id:c,message:s},a)},terminate:()=>{i.terminate(),URL.revokeObjectURL(n)}}},vR=e=>new Promise((t,n)=>{const i=new Image;i.onload=()=>{t(i)},i.onerror=o=>{n(o)},i.src=e}),_R=e=>e.reduce((t,n)=>t.then(i=>n().then(Array.prototype.concat.bind(i))),Promise.resolve([])),CR=(e,t)=>new Promise(n=>{const i={width:e.width,height:e.height},o=e.getContext("2d"),s=t.sort(xp).map(r=>()=>new Promise(a=>{DR[r[0]](o,i,r[1],a)&&a()}));_R(s).then(()=>n(e))}),Pn=(e,t)=>{e.beginPath(),e.lineCap=t["stroke-linecap"],e.lineJoin=t["stroke-linejoin"],e.lineWidth=t["stroke-width"],t["stroke-dasharray"].length&&e.setLineDash(t["stroke-dasharray"].split(",")),e.fillStyle=t.fill,e.strokeStyle=t.stroke,e.globalAlpha=t.opacity||1},Dn=e=>{e.fill(),e.stroke(),e.globalAlpha=1},SR=(e,t,n)=>{const i=Mn(n,t),o=zt(n,t);return Pn(e,o),e.rect(i.x,i.y,i.width,i.height),Dn(e),!0},AR=(e,t,n)=>{const i=Mn(n,t),o=zt(n,t);Pn(e,o);const s=i.x,r=i.y,a=i.width,c=i.height,l=.5522848,d=a/2*l,h=c/2*l,p=s+a,m=r+c,g=s+a/2,y=r+c/2;return e.moveTo(s,y),e.bezierCurveTo(s,y-h,g-d,r,g,r),e.bezierCurveTo(g+d,r,p,y-h,p,y),e.bezierCurveTo(p,y+h,g+d,m,g,m),e.bezierCurveTo(g-d,m,s,y+h,s,y),Dn(e),!0},RR=(e,t,n,i)=>{const o=Mn(n,t),s=zt(n,t);Pn(e,s);const r=new Image;new URL(n.src,window.location.href).origin!==window.location.origin&&(r.crossOrigin=""),r.onload=()=>{if(n.fit==="cover"){const c=o.width/o.height,l=c>1?r.width:r.height*c,d=c>1?r.width/c:r.height,h=r.width*.5-l*.5,p=r.height*.5-d*.5;e.drawImage(r,h,p,l,d,o.x,o.y,o.width,o.height)}else if(n.fit==="contain"){const c=Math.min(o.width/r.width,o.height/r.height),l=c*r.width,d=c*r.height,h=o.x+o.width*.5-l*.5,p=o.y+o.height*.5-d*.5;e.drawImage(r,0,0,r.width,r.height,h,p,l,d)}else e.drawImage(r,0,0,r.width,r.height,o.x,o.y,o.width,o.height);Dn(e),i()},r.src=n.src},wR=(e,t,n)=>{const i=Mn(n,t),o=zt(n,t);Pn(e,o);const s=Se(n.fontSize,t),r=n.fontFamily||"sans-serif",a=n.fontWeight||"normal",c=n.textAlign||"left";return e.font=`${a} ${s}px ${r}`,e.textAlign=c,e.fillText(n.text,i.x,i.y),Dn(e),!0},MR=(e,t,n)=>{const i=zt(n,t);Pn(e,i),e.beginPath();const o=n.points.map(r=>({x:Se(r.x,t,1,"width"),y:Se(r.y,t,1,"height")}));e.moveTo(o[0].x,o[0].y);const s=o.length;for(let r=1;r<s;r++)e.lineTo(o[r].x,o[r].y);return Dn(e),!0},PR=(e,t,n)=>{const i=Mn(n,t),o=zt(n,t);Pn(e,o),e.beginPath();const s={x:i.x,y:i.y},r={x:i.x+i.width,y:i.y+i.height};e.moveTo(s.x,s.y),e.lineTo(r.x,r.y);const a=bp({x:r.x-s.x,y:r.y-s.y}),c=.04*Math.min(t.width,t.height);if(n.lineDecoration.indexOf("arrow-begin")!==-1){const l=oo(a,c),d=so(s,l),h=St(s,2,d),p=St(s,-2,d);e.moveTo(h.x,h.y),e.lineTo(s.x,s.y),e.lineTo(p.x,p.y)}if(n.lineDecoration.indexOf("arrow-end")!==-1){const l=oo(a,-c),d=so(r,l),h=St(r,2,d),p=St(r,-2,d);e.moveTo(h.x,h.y),e.lineTo(r.x,r.y),e.lineTo(p.x,p.y)}return Dn(e),!0},DR={rect:SR,ellipse:AR,image:RR,text:wR,line:PR,path:MR},bR=e=>{const t=document.createElement("canvas");return t.width=e.width,t.height=e.height,t.getContext("2d").putImageData(e,0,0),t},xR=(e,t,n={})=>new Promise((i,o)=>{if(!e||!UA(e))return o({status:"not an image file",file:e});const{stripImageHead:s,beforeCreateBlob:r,afterCreateBlob:a,canvasMemoryLimit:c}=n,{crop:l,size:d,filter:h,markup:p,output:m}=t,g=t.image&&t.image.orientation?Math.max(1,Math.min(8,t.image.orientation)):null,y=m&&m.quality,E=y===null?null:y/100,v=m&&m.type||null,T=m&&m.background||null,I=[];d&&(typeof d.width=="number"||typeof d.height=="number")&&I.push({type:"resize",data:d}),h&&h.length===20&&I.push({type:"filter",data:h});const S=D=>{const R=a?a(D):D;Promise.resolve(R).then(i)},A=(D,R)=>{const C=bR(D),_=p.length?CR(C,p):C;Promise.resolve(_).then(b=>{JA(b,R,r).then(N=>{if(Dp(b),s)return S(N);gR(e).then(F=>{F!==null&&(N=new Blob([F,N.slice(20)],{type:N.type})),S(N)})}).catch(o)})};if(/svg/.test(e.type)&&v===null)return dR(e,l,p,{background:T}).then(D=>{i(ER(D,"image/svg+xml"))});const P=URL.createObjectURL(e);vR(P).then(D=>{URL.revokeObjectURL(P);const R=YA(D,g,l,{canvasMemoryLimit:c,background:T}),C={quality:E,type:v||e.type};if(!I.length)return A(R,C);const _=IR(hR);_.post({transforms:I,imageData:R},b=>{A(fR(b),C),_.terminate()},[R.data.buffer])}).catch(o)}),NR=["x","y","left","top","right","bottom","width","height"],LR=e=>typeof e=="string"&&/%/.test(e)?parseFloat(e)/100:e,OR=e=>{const[t,n]=e,i=n.points?{}:NR.reduce((o,s)=>(o[s]=LR(n[s]),o),{});return[t,{zIndex:0,...n,...i}]},FR=e=>new Promise((t,n)=>{const i=new Image;i.src=URL.createObjectURL(e);const o=()=>{const r=i.naturalWidth,a=i.naturalHeight;r&&a&&(URL.revokeObjectURL(i.src),clearInterval(s),t({width:r,height:a}))};i.onerror=r=>{URL.revokeObjectURL(i.src),clearInterval(s),n(r)};const s=setInterval(o,1);o()});typeof window<"u"&&typeof window.document<"u"&&(HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){const i=this;setTimeout(()=>{const o=i.toDataURL(t,n).split(",")[1],s=atob(o);let r=s.length;const a=new Uint8Array(r);for(;r--;)a[r]=s.charCodeAt(r);e(new Blob([a],{type:t||"image/png"}))})}}));const ca=typeof window<"u"&&typeof window.document<"u",kR=ca&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,VR=({addFilter:e,utils:t})=>{const{Type:n,forin:i,getFileFromBlob:o,isFile:s}=t,r=["crop","resize","filter","markup","output"],a=d=>(h,p,m)=>h(p,d?d(m):m),c=d=>d.aspectRatio===null&&d.rotation===0&&d.zoom===1&&d.center&&d.center.x===.5&&d.center.y===.5&&d.flip&&d.flip.horizontal===!1&&d.flip.vertical===!1;e("SHOULD_PREPARE_OUTPUT",(d,{query:h})=>new Promise(p=>{p(!h("IS_ASYNC"))}));const l=(d,h,p)=>new Promise(m=>{if(!d("GET_ALLOW_IMAGE_TRANSFORM")||p.archived||!s(h)||!LA(h))return m(!1);FR(h).then(()=>{const g=d("GET_IMAGE_TRANSFORM_IMAGE_FILTER");if(g){const y=g(h);if(y==null)return handleRevert(!0);if(typeof y=="boolean")return m(y);if(typeof y.then=="function")return y.then(m)}m(!0)}).catch(g=>{m(!1)})});return e("DID_CREATE_ITEM",(d,{query:h,dispatch:p})=>{h("GET_ALLOW_IMAGE_TRANSFORM")&&d.extend("requestPrepare",()=>new Promise((m,g)=>{p("REQUEST_PREPARE_OUTPUT",{query:d.id,item:d,success:m,failure:g},!0)}))}),e("PREPARE_OUTPUT",(d,{query:h,item:p})=>new Promise(m=>{l(h,d,p).then(g=>{if(!g)return m(d);const y=[];h("GET_IMAGE_TRANSFORM_VARIANTS_INCLUDE_ORIGINAL")&&y.push(()=>new Promise(R=>{R({name:h("GET_IMAGE_TRANSFORM_VARIANTS_ORIGINAL_NAME"),file:d})})),h("GET_IMAGE_TRANSFORM_VARIANTS_INCLUDE_DEFAULT")&&y.push((R,C,_)=>new Promise(b=>{R(C,_).then(N=>b({name:h("GET_IMAGE_TRANSFORM_VARIANTS_DEFAULT_NAME"),file:N}))}));const E=h("GET_IMAGE_TRANSFORM_VARIANTS")||{};i(E,(R,C)=>{const _=a(C);y.push((b,N,F)=>new Promise(x=>{_(b,N,F).then(k=>x({name:R,file:k}))}))});const v=h("GET_IMAGE_TRANSFORM_OUTPUT_QUALITY"),T=h("GET_IMAGE_TRANSFORM_OUTPUT_QUALITY_MODE"),I=v===null?null:v/100,S=h("GET_IMAGE_TRANSFORM_OUTPUT_MIME_TYPE"),A=h("GET_IMAGE_TRANSFORM_CLIENT_TRANSFORMS")||r;p.setMetadata("output",{type:S,quality:I,client:A},!0);const P=(R,C)=>new Promise((_,b)=>{const N={...C};Object.keys(N).filter(B=>B!=="exif").forEach(B=>{A.indexOf(B)===-1&&delete N[B]});const{resize:F,exif:x,output:k,crop:w,filter:M,markup:L}=N,O={image:{orientation:x?x.orientation:null},output:k&&(k.type||typeof k.quality=="number"||k.background)?{type:k.type,quality:typeof k.quality=="number"?k.quality*100:null,background:k.background||h("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR")||null}:void 0,size:F&&(F.size.width||F.size.height)?{mode:F.mode,upscale:F.upscale,...F.size}:void 0,crop:w&&!c(w)?{...w}:void 0,markup:L&&L.length?L.map(OR):[],filter:M};if(O.output){const B=k.type?k.type!==R.type:!1,$=/\/jpe?g$/.test(R.type),X=k.quality!==null?$&&T==="always":!1;if(!!!(O.size||O.crop||O.filter||B||X))return _(R)}const U={beforeCreateBlob:h("GET_IMAGE_TRANSFORM_BEFORE_CREATE_BLOB"),afterCreateBlob:h("GET_IMAGE_TRANSFORM_AFTER_CREATE_BLOB"),canvasMemoryLimit:h("GET_IMAGE_TRANSFORM_CANVAS_MEMORY_LIMIT"),stripImageHead:h("GET_IMAGE_TRANSFORM_OUTPUT_STRIP_IMAGE_HEAD")};xR(R,O,U).then(B=>{const $=o(B,kA(R.name,VA(B.type)));_($)}).catch(b)}),D=y.map(R=>R(P,d,p.getMetadata()));Promise.all(D).then(R=>{m(R.length===1&&R[0].name===null?R[0].file:R)})})})),{options:{allowImageTransform:[!0,n.BOOLEAN],imageTransformImageFilter:[null,n.FUNCTION],imageTransformOutputMimeType:[null,n.STRING],imageTransformOutputQuality:[null,n.INT],imageTransformOutputStripImageHead:[!0,n.BOOLEAN],imageTransformClientTransforms:[null,n.ARRAY],imageTransformOutputQualityMode:["always",n.STRING],imageTransformVariants:[null,n.OBJECT],imageTransformVariantsIncludeDefault:[!0,n.BOOLEAN],imageTransformVariantsDefaultName:[null,n.STRING],imageTransformVariantsIncludeOriginal:[!1,n.BOOLEAN],imageTransformVariantsOriginalName:["original_",n.STRING],imageTransformBeforeCreateBlob:[null,n.FUNCTION],imageTransformAfterCreateBlob:[null,n.FUNCTION],imageTransformCanvasMemoryLimit:[ca&&kR?4096*4096:null,n.INT],imageTransformCanvasBackgroundColor:[null,n.STRING]}}};ca&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:VR}));var UR={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let GR,BR;function HR(){return{geminiUrl:GR,vertexUrl:BR}}function qR(e,t,n,i){var o,s;if(!(e!=null&&e.baseUrl)){const r=HR();return t?(o=r.vertexUrl)!==null&&o!==void 0?o:n:(s=r.geminiUrl)!==null&&s!==void 0?s:i}return e.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Et{}function H(e,t){const n=/\{([^}]+)\}/g;return e.replace(n,(i,o)=>{if(Object.prototype.hasOwnProperty.call(t,o)){const s=t[o];return s!=null?String(s):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function f(e,t,n){for(let s=0;s<t.length-1;s++){const r=t[s];if(r.endsWith("[]")){const a=r.slice(0,-2);if(!(a in e))if(Array.isArray(n))e[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${r}`);if(Array.isArray(e[a])){const c=e[a];if(Array.isArray(n))for(let l=0;l<c.length;l++){const d=c[l];f(d,t.slice(s+1),n[l])}else for(const l of c)f(l,t.slice(s+1),n)}return}else if(r.endsWith("[0]")){const a=r.slice(0,-3);a in e||(e[a]=[{}]);const c=e[a];f(c[0],t.slice(s+1),n);return}(!e[r]||typeof e[r]!="object")&&(e[r]={}),e=e[r]}const i=t[t.length-1],o=e[i];if(o!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===o)return;if(typeof o=="object"&&typeof n=="object"&&o!==null&&n!==null)Object.assign(o,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(e,n):e[i]=n}function u(e,t,n=void 0){try{if(t.length===1&&t[0]==="_self")return e;for(let i=0;i<t.length;i++){if(typeof e!="object"||e===null)return n;const o=t[i];if(o.endsWith("[]")){const s=o.slice(0,-2);if(s in e){const r=e[s];return Array.isArray(r)?r.map(a=>u(a,t.slice(i+1),n)):n}else return n}else e=e[o]}return e}catch(i){if(i instanceof TypeError)return n;throw i}}function WR(e,t){for(const[n,i]of Object.entries(t)){const o=n.split("."),s=i.split("."),r=new Set;let a=-1;for(let c=0;c<o.length;c++)if(o[c]==="*"){a=c;break}if(a!==-1&&s.length>a)for(let c=a;c<s.length;c++){const l=s[c];l!=="*"&&!l.endsWith("[]")&&!l.endsWith("[0]")&&r.add(l)}Zs(e,o,s,0,r)}}function Zs(e,t,n,i,o){if(i>=t.length||typeof e!="object"||e===null)return;const s=t[i];if(s.endsWith("[]")){const r=s.slice(0,-2),a=e;if(r in a&&Array.isArray(a[r]))for(const c of a[r])Zs(c,t,n,i+1,o)}else if(s==="*"){if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const r=e,a=Object.keys(r).filter(l=>!l.startsWith("_")&&!o.has(l)),c={};for(const l of a)c[l]=r[l];for(const[l,d]of Object.entries(c)){const h=[];for(const p of n.slice(i))p==="*"?h.push(l):h.push(p);f(r,h,d)}for(const l of a)delete r[l]}}else{const r=e;s in r&&Zs(r[s],t,n,i+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ua(e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $R(e){const t={},n=u(e,["operationName"]);n!=null&&f(t,["operationName"],n);const i=u(e,["resourceName"]);return i!=null&&f(t,["_url","resourceName"],i),t}function YR(e){const t={},n=u(e,["name"]);n!=null&&f(t,["name"],n);const i=u(e,["metadata"]);i!=null&&f(t,["metadata"],i);const o=u(e,["done"]);o!=null&&f(t,["done"],o);const s=u(e,["error"]);s!=null&&f(t,["error"],s);const r=u(e,["response","generateVideoResponse"]);return r!=null&&f(t,["response"],JR(r)),t}function zR(e){const t={},n=u(e,["name"]);n!=null&&f(t,["name"],n);const i=u(e,["metadata"]);i!=null&&f(t,["metadata"],i);const o=u(e,["done"]);o!=null&&f(t,["done"],o);const s=u(e,["error"]);s!=null&&f(t,["error"],s);const r=u(e,["response"]);return r!=null&&f(t,["response"],KR(r)),t}function JR(e){const t={},n=u(e,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>XR(r))),f(t,["generatedVideos"],s)}const i=u(e,["raiMediaFilteredCount"]);i!=null&&f(t,["raiMediaFilteredCount"],i);const o=u(e,["raiMediaFilteredReasons"]);return o!=null&&f(t,["raiMediaFilteredReasons"],o),t}function KR(e){const t={},n=u(e,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>ZR(r))),f(t,["generatedVideos"],s)}const i=u(e,["raiMediaFilteredCount"]);i!=null&&f(t,["raiMediaFilteredCount"],i);const o=u(e,["raiMediaFilteredReasons"]);return o!=null&&f(t,["raiMediaFilteredReasons"],o),t}function XR(e){const t={},n=u(e,["video"]);return n!=null&&f(t,["video"],iw(n)),t}function ZR(e){const t={},n=u(e,["_self"]);return n!=null&&f(t,["video"],ow(n)),t}function QR(e){const t={},n=u(e,["operationName"]);return n!=null&&f(t,["_url","operationName"],n),t}function jR(e){const t={},n=u(e,["operationName"]);return n!=null&&f(t,["_url","operationName"],n),t}function ew(e){const t={},n=u(e,["name"]);n!=null&&f(t,["name"],n);const i=u(e,["metadata"]);i!=null&&f(t,["metadata"],i);const o=u(e,["done"]);o!=null&&f(t,["done"],o);const s=u(e,["error"]);s!=null&&f(t,["error"],s);const r=u(e,["response"]);return r!=null&&f(t,["response"],tw(r)),t}function tw(e){const t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const i=u(e,["parent"]);i!=null&&f(t,["parent"],i);const o=u(e,["documentName"]);return o!=null&&f(t,["documentName"],o),t}function Np(e){const t={},n=u(e,["name"]);n!=null&&f(t,["name"],n);const i=u(e,["metadata"]);i!=null&&f(t,["metadata"],i);const o=u(e,["done"]);o!=null&&f(t,["done"],o);const s=u(e,["error"]);s!=null&&f(t,["error"],s);const r=u(e,["response"]);return r!=null&&f(t,["response"],nw(r)),t}function nw(e){const t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const i=u(e,["parent"]);i!=null&&f(t,["parent"],i);const o=u(e,["documentName"]);return o!=null&&f(t,["documentName"],o),t}function iw(e){const t={},n=u(e,["uri"]);n!=null&&f(t,["uri"],n);const i=u(e,["encodedVideo"]);i!=null&&f(t,["videoBytes"],ua(i));const o=u(e,["encoding"]);return o!=null&&f(t,["mimeType"],o),t}function ow(e){const t={},n=u(e,["gcsUri"]);n!=null&&f(t,["uri"],n);const i=u(e,["bytesBase64Encoded"]);i!=null&&f(t,["videoBytes"],ua(i));const o=u(e,["mimeType"]);return o!=null&&f(t,["mimeType"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var tu;(function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(tu||(tu={}));var nu;(function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"})(nu||(nu={}));var iu;(function(e){e.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",e.SILENT="SILENT",e.WHEN_IDLE="WHEN_IDLE",e.INTERRUPT="INTERRUPT"})(iu||(iu={}));var At;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL"})(At||(At={}));var ou;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(ou||(ou={}));var su;(function(e){e.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",e.SIMPLE_SEARCH="SIMPLE_SEARCH",e.ELASTIC_SEARCH="ELASTIC_SEARCH"})(su||(su={}));var ru;(function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"})(ru||(ru={}));var au;(function(e){e.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",e.HTTP_IN_QUERY="HTTP_IN_QUERY",e.HTTP_IN_HEADER="HTTP_IN_HEADER",e.HTTP_IN_PATH="HTTP_IN_PATH",e.HTTP_IN_BODY="HTTP_IN_BODY",e.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(au||(au={}));var lu;(function(e){e.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",e.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",e.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",e.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(lu||(lu={}));var cu;(function(e){e.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",e.LOW="LOW",e.HIGH="HIGH"})(cu||(cu={}));var uu;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",e.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",e.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",e.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",e.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(uu||(uu={}));var du;(function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"})(du||(du={}));var fu;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"})(fu||(fu={}));var hu;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY",e.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",e.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",e.NO_IMAGE="NO_IMAGE",e.IMAGE_RECITATION="IMAGE_RECITATION",e.IMAGE_OTHER="IMAGE_OTHER"})(hu||(hu={}));var pu;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(pu||(pu={}));var mu;(function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(mu||(mu={}));var gu;(function(e){e.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",e.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",e.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",e.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",e.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(gu||(gu={}));var yu;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.IMAGE_SAFETY="IMAGE_SAFETY",e.MODEL_ARMOR="MODEL_ARMOR",e.JAILBREAK="JAILBREAK"})(yu||(yu={}));var Eu;(function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Eu||(Eu={}));var ro;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"})(ro||(ro={}));var Tu;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Tu||(Tu={}));var Iu;(function(e){e.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",e.TUNING_MODE_FULL="TUNING_MODE_FULL",e.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Iu||(Iu={}));var vu;(function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(vu||(vu={}));var Qs;(function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Qs||(Qs={}));var _u;(function(e){e.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",e.TUNING_TASK_I2V="TUNING_TASK_I2V",e.TUNING_TASK_T2V="TUNING_TASK_T2V",e.TUNING_TASK_R2V="TUNING_TASK_R2V"})(_u||(_u={}));var Cu;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Cu||(Cu={}));var Su;(function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"})(Su||(Su={}));var Au;(function(e){e.UNSPECIFIED="UNSPECIFIED",e.BLOCKING="BLOCKING",e.NON_BLOCKING="NON_BLOCKING"})(Au||(Au={}));var Ru;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(Ru||(Ru={}));var wu;(function(e){e.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",e.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(wu||(wu={}));var Mu;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE",e.VALIDATED="VALIDATED"})(Mu||(Mu={}));var Pu;(function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(Pu||(Pu={}));var Du;(function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"})(Du||(Du={}));var bu;(function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi",e.zh="zh",e.pt="pt",e.es="es"})(bu||(bu={}));var xu;(function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(xu||(xu={}));var Nu;(function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Nu||(Nu={}));var Lu;(function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Lu||(Lu={}));var Ou;(function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Ou||(Ou={}));var Fu;(function(e){e.FOREGROUND="FOREGROUND",e.BACKGROUND="BACKGROUND",e.PROMPT="PROMPT",e.SEMANTIC="SEMANTIC",e.INTERACTIVE="INTERACTIVE"})(Fu||(Fu={}));var ku;(function(e){e.ASSET="ASSET",e.STYLE="STYLE"})(ku||(ku={}));var Vu;(function(e){e.INSERT="INSERT",e.REMOVE="REMOVE",e.REMOVE_STATIC="REMOVE_STATIC",e.OUTPAINT="OUTPAINT"})(Vu||(Vu={}));var Uu;(function(e){e.OPTIMIZED="OPTIMIZED",e.LOSSLESS="LOSSLESS"})(Uu||(Uu={}));var Gu;(function(e){e.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",e.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Gu||(Gu={}));var Bu;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.STATE_PENDING="STATE_PENDING",e.STATE_ACTIVE="STATE_ACTIVE",e.STATE_FAILED="STATE_FAILED"})(Bu||(Bu={}));var Hu;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"})(Hu||(Hu={}));var qu;(function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED"})(qu||(qu={}));var Wu;(function(e){e.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.RESPONSE_REJECTED="RESPONSE_REJECTED",e.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Wu||(Wu={}));var $u;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"})($u||($u={}));var Yu;(function(e){e.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",e.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",e.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Yu||(Yu={}));var zu;(function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(zu||(zu={}));var Ju;(function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Ju||(Ju={}));var Ku;(function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"})(Ku||(Ku={}));var Xu;(function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Xu||(Xu={}));var Zu;(function(e){e.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",e.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",e.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",e.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",e.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",e.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",e.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",e.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",e.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",e.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",e.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",e.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",e.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Zu||(Zu={}));var Qu;(function(e){e.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",e.QUALITY="QUALITY",e.DIVERSITY="DIVERSITY",e.VOCALIZATION="VOCALIZATION"})(Qu||(Qu={}));var cn;(function(e){e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT"})(cn||(cn={}));class js{constructor(t){const n={};for(const i of t.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=t}json(){return this.responseInternal.json()}}class Gn{get text(){var t,n,i,o,s,r,a,c;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let l="",d=!1;const h=[];for(const p of(c=(a=(r=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content)===null||a===void 0?void 0:a.parts)!==null&&c!==void 0?c:[]){for(const[m,g]of Object.entries(p))m!=="text"&&m!=="thought"&&m!=="thoughtSignature"&&(g!==null||g!==void 0)&&h.push(m);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;d=!0,l+=p.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?l:void 0}get data(){var t,n,i,o,s,r,a,c;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let l="";const d=[];for(const h of(c=(a=(r=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content)===null||a===void 0?void 0:a.parts)!==null&&c!==void 0?c:[]){for(const[p,m]of Object.entries(h))p!=="inlineData"&&(m!==null||m!==void 0)&&d.push(p);h.inlineData&&typeof h.inlineData.data=="string"&&(l+=atob(h.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),l.length>0?btoa(l):void 0}get functionCalls(){var t,n,i,o,s,r,a,c;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const l=(c=(a=(r=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if((l==null?void 0:l.length)!==0)return l}get executableCode(){var t,n,i,o,s,r,a,c,l;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const d=(c=(a=(r=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(h=>h.executableCode).map(h=>h.executableCode).filter(h=>h!==void 0);if((d==null?void 0:d.length)!==0)return(l=d==null?void 0:d[0])===null||l===void 0?void 0:l.code}get codeExecutionResult(){var t,n,i,o,s,r,a,c,l;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const d=(c=(a=(r=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(h=>h.codeExecutionResult).map(h=>h.codeExecutionResult).filter(h=>h!==void 0);if((d==null?void 0:d.length)!==0)return(l=d==null?void 0:d[0])===null||l===void 0?void 0:l.output}}class ju{}class ed{}class sw{}class rw{}class aw{}class lw{}class td{}class nd{}class id{}class cw{}class ao{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const i=new ao;let o;const s=t;return n?o=zR(s):o=YR(s),Object.assign(i,o),i}}class od{}class sd{}class rd{}class ad{}class uw{}class dw{}class fw{}class da{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const i=new da,s=ew(t);return Object.assign(i,s),i}}class hw{}class pw{}class mw{}class ld{}class gw{get text(){var t,n,i;let o="",s=!1;const r=[];for(const a of(i=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[c,l]of Object.entries(a))c!=="text"&&c!=="thought"&&l!==null&&r.push(c);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;s=!0,o+=a.text}}return r.length>0&&console.warn(`there are non-text parts ${r} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?o:void 0}get data(){var t,n,i;let o="";const s=[];for(const r of(i=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[a,c]of Object.entries(r))a!=="inlineData"&&c!==null&&s.push(a);r.inlineData&&typeof r.inlineData.data=="string"&&(o+=atob(r.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class yw{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class fa{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const i=new fa,s=Np(t);return Object.assign(i,s),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oe(e,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const n=t.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function Lp(e,t){const n=oe(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function Op(e){return Array.isArray(e)?e.map(t=>lo(t)):[lo(e)]}function lo(e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function Fp(e){const t=lo(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function kp(e){const t=lo(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function cd(e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function Vp(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>cd(t)):[cd(e)]}function er(e){return e!=null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)}function ud(e){return e!=null&&typeof e=="object"&&"functionCall"in e}function dd(e){return e!=null&&typeof e=="object"&&"functionResponse"in e}function Ae(e){if(e==null)throw new Error("ContentUnion is required");return er(e)?e:{role:"user",parts:Vp(e)}}function ha(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(n=>{const i=Ae(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(e.isVertexAI()){const n=Ae(t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(t)?t.map(n=>Ae(n)):[Ae(t)]}function Je(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(ud(e)||dd(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Ae(e)]}const t=[],n=[],i=er(e[0]);for(const o of e){const s=er(o);if(s!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)t.push(o);else{if(ud(o)||dd(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(o)}}return i||t.push({role:"user",parts:Vp(n)}),t}function Ew(e,t){e.includes("null")&&(t.nullable=!0);const n=e.filter(i=>i!=="null");if(n.length===1)t.type=Object.values(At).includes(n[0].toUpperCase())?n[0].toUpperCase():At.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const i of n)t.anyOf.push({type:Object.values(At).includes(i.toUpperCase())?i.toUpperCase():At.TYPE_UNSPECIFIED})}}function gn(e){const t={},n=["items"],i=["anyOf"],o=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=e.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(t.nullable=!0,e=s[1]):s[1].type==="null"&&(t.nullable=!0,e=s[0])),e.type instanceof Array&&Ew(e.type,t);for(const[r,a]of Object.entries(e))if(a!=null)if(r=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;t.type=Object.values(At).includes(a.toUpperCase())?a.toUpperCase():At.TYPE_UNSPECIFIED}else if(n.includes(r))t[r]=gn(a);else if(i.includes(r)){const c=[];for(const l of a){if(l.type=="null"){t.nullable=!0;continue}c.push(gn(l))}t[r]=c}else if(o.includes(r)){const c={};for(const[l,d]of Object.entries(a))c[l]=gn(d);t[r]=c}else{if(r==="additionalProperties")continue;t[r]=a}return t}function pa(e){return gn(e)}function ma(e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function ga(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function bn(e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=gn(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=gn(t.response));return e}function xn(e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function Tw(e,t,n,i=1){const o=!t.startsWith(`${n}/`)&&t.split("/").length===i;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${n}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:o?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`:t:o?`${n}/${t}`:t}function Tt(e,t){if(typeof t!="string")throw new Error("name must be a string");return Tw(e,t,"cachedContents")}function Up(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function Pt(e){return ua(e)}function Iw(e){return e!=null&&typeof e=="object"&&"name"in e}function vw(e){return e!=null&&typeof e=="object"&&"video"in e}function _w(e){return e!=null&&typeof e=="object"&&"uri"in e}function Gp(e){var t;let n;if(Iw(e)&&(n=e.name),!(_w(e)&&(n=e.uri,n===void 0))&&!(vw(e)&&(n=(t=e.video)===null||t===void 0?void 0:t.uri,n===void 0))){if(typeof e=="string"&&(n=e),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const o=n.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${n}`);n=o[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Bp(e,t){let n;return e.isVertexAI()?n=t?"publishers/google/models":"models":n=t?"models":"tunedModels",n}function Hp(e){for(const t of["models","tunedModels","publisherModels"])if(Cw(e,t))return e[t];return[]}function Cw(e,t){return e!==null&&typeof e=="object"&&t in e}function Sw(e,t={}){const n=e,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),t.behavior&&(i.behavior=t.behavior),{functionDeclarations:[i]}}function Aw(e,t={}){const n=[],i=new Set;for(const o of e){const s=o.name;if(i.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);i.add(s);const r=Sw(o,t);r.functionDeclarations&&n.push(...r.functionDeclarations)}return{functionDeclarations:n}}function qp(e,t){let n;if(typeof t=="string")if(e.isVertexAI())if(t.startsWith("gs://"))n={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))n={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))n={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(e.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:t}}else n=t;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,o=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(e.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function Rw(e){if(typeof e!="string")return e;const t=e;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function Wp(e){if(typeof e!="object"||e===null)return{};const t=e,n=t.inlinedResponses;if(typeof n!="object"||n===null)return e;const o=n.inlinedResponses;if(!Array.isArray(o)||o.length===0)return e;let s=!1;for(const r of o){if(typeof r!="object"||r===null)continue;const c=r.response;if(typeof c!="object"||c===null)continue;if(c.embedding!==void 0){s=!0;break}}return s&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),e}function Nn(e,t){const n=t;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function $p(e){const t=e;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ww(e){const t={},n=u(e,["responsesFile"]);n!=null&&f(t,["fileName"],n);const i=u(e,["inlinedResponses","inlinedResponses"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>aM(r))),f(t,["inlinedResponses"],s)}const o=u(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),f(t,["inlinedEmbedContentResponses"],s)}return t}function Mw(e){const t={},n=u(e,["predictionsFormat"]);n!=null&&f(t,["format"],n);const i=u(e,["gcsDestination","outputUriPrefix"]);i!=null&&f(t,["gcsUri"],i);const o=u(e,["bigqueryDestination","outputUri"]);return o!=null&&f(t,["bigqueryUri"],o),t}function Pw(e){const t={},n=u(e,["format"]);n!=null&&f(t,["predictionsFormat"],n);const i=u(e,["gcsUri"]);i!=null&&f(t,["gcsDestination","outputUriPrefix"],i);const o=u(e,["bigqueryUri"]);if(o!=null&&f(t,["bigqueryDestination","outputUri"],o),u(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(e,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(u(e,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function $i(e){const t={},n=u(e,["name"]);n!=null&&f(t,["name"],n);const i=u(e,["metadata","displayName"]);i!=null&&f(t,["displayName"],i);const o=u(e,["metadata","state"]);o!=null&&f(t,["state"],$p(o));const s=u(e,["metadata","createTime"]);s!=null&&f(t,["createTime"],s);const r=u(e,["metadata","endTime"]);r!=null&&f(t,["endTime"],r);const a=u(e,["metadata","updateTime"]);a!=null&&f(t,["updateTime"],a);const c=u(e,["metadata","model"]);c!=null&&f(t,["model"],c);const l=u(e,["metadata","output"]);return l!=null&&f(t,["dest"],ww(Wp(l))),t}function tr(e){const t={},n=u(e,["name"]);n!=null&&f(t,["name"],n);const i=u(e,["displayName"]);i!=null&&f(t,["displayName"],i);const o=u(e,["state"]);o!=null&&f(t,["state"],$p(o));const s=u(e,["error"]);s!=null&&f(t,["error"],s);const r=u(e,["createTime"]);r!=null&&f(t,["createTime"],r);const a=u(e,["startTime"]);a!=null&&f(t,["startTime"],a);const c=u(e,["endTime"]);c!=null&&f(t,["endTime"],c);const l=u(e,["updateTime"]);l!=null&&f(t,["updateTime"],l);const d=u(e,["model"]);d!=null&&f(t,["model"],d);const h=u(e,["inputConfig"]);h!=null&&f(t,["src"],Dw(h));const p=u(e,["outputConfig"]);p!=null&&f(t,["dest"],Mw(Wp(p)));const m=u(e,["completionStats"]);return m!=null&&f(t,["completionStats"],m),t}function Dw(e){const t={},n=u(e,["instancesFormat"]);n!=null&&f(t,["format"],n);const i=u(e,["gcsSource","uris"]);i!=null&&f(t,["gcsUri"],i);const o=u(e,["bigquerySource","inputUri"]);return o!=null&&f(t,["bigqueryUri"],o),t}function bw(e,t){const n={};if(u(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=u(t,["fileName"]);i!=null&&f(n,["fileName"],i);const o=u(t,["inlinedRequests"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>rM(e,r))),f(n,["requests","requests"],s)}return n}function xw(e){const t={},n=u(e,["format"]);n!=null&&f(t,["instancesFormat"],n);const i=u(e,["gcsUri"]);i!=null&&f(t,["gcsSource","uris"],i);const o=u(e,["bigqueryUri"]);if(o!=null&&f(t,["bigquerySource","inputUri"],o),u(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(e,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function Nw(e){const t={},n=u(e,["data"]);if(n!=null&&f(t,["data"],n),u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function Lw(e,t){const n={},i=u(t,["name"]);return i!=null&&f(n,["_url","name"],Nn(e,i)),n}function Ow(e,t){const n={},i=u(t,["name"]);return i!=null&&f(n,["_url","name"],Nn(e,i)),n}function Fw(e){const t={},n=u(e,["content"]);n!=null&&f(t,["content"],n);const i=u(e,["citationMetadata"]);i!=null&&f(t,["citationMetadata"],kw(i));const o=u(e,["tokenCount"]);o!=null&&f(t,["tokenCount"],o);const s=u(e,["finishReason"]);s!=null&&f(t,["finishReason"],s);const r=u(e,["avgLogprobs"]);r!=null&&f(t,["avgLogprobs"],r);const a=u(e,["groundingMetadata"]);a!=null&&f(t,["groundingMetadata"],a);const c=u(e,["index"]);c!=null&&f(t,["index"],c);const l=u(e,["logprobsResult"]);l!=null&&f(t,["logprobsResult"],l);const d=u(e,["safetyRatings"]);if(d!=null){let p=d;Array.isArray(p)&&(p=p.map(m=>m)),f(t,["safetyRatings"],p)}const h=u(e,["urlContextMetadata"]);return h!=null&&f(t,["urlContextMetadata"],h),t}function kw(e){const t={},n=u(e,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),f(t,["citations"],i)}return t}function Yp(e){const t={},n=u(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>pM(s))),f(t,["parts"],o)}const i=u(e,["role"]);return i!=null&&f(t,["role"],i),t}function Vw(e,t){const n={},i=u(e,["displayName"]);if(t!==void 0&&i!=null&&f(t,["batch","displayName"],i),u(e,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Uw(e,t){const n={},i=u(e,["displayName"]);t!==void 0&&i!=null&&f(t,["displayName"],i);const o=u(e,["dest"]);return t!==void 0&&o!=null&&f(t,["outputConfig"],Pw(Rw(o))),n}function fd(e,t){const n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],oe(e,i));const o=u(t,["src"]);o!=null&&f(n,["batch","inputConfig"],bw(e,qp(e,o)));const s=u(t,["config"]);return s!=null&&Vw(s,n),n}function Gw(e,t){const n={},i=u(t,["model"]);i!=null&&f(n,["model"],oe(e,i));const o=u(t,["src"]);o!=null&&f(n,["inputConfig"],xw(qp(e,o)));const s=u(t,["config"]);return s!=null&&Uw(s,n),n}function Bw(e,t){const n={},i=u(e,["displayName"]);return t!==void 0&&i!=null&&f(t,["batch","displayName"],i),n}function Hw(e,t){const n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],oe(e,i));const o=u(t,["src"]);o!=null&&f(n,["batch","inputConfig"],Kw(e,o));const s=u(t,["config"]);return s!=null&&Bw(s,n),n}function qw(e,t){const n={},i=u(t,["name"]);return i!=null&&f(n,["_url","name"],Nn(e,i)),n}function Ww(e,t){const n={},i=u(t,["name"]);return i!=null&&f(n,["_url","name"],Nn(e,i)),n}function $w(e){const t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const i=u(e,["name"]);i!=null&&f(t,["name"],i);const o=u(e,["done"]);o!=null&&f(t,["done"],o);const s=u(e,["error"]);return s!=null&&f(t,["error"],s),t}function Yw(e){const t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const i=u(e,["name"]);i!=null&&f(t,["name"],i);const o=u(e,["done"]);o!=null&&f(t,["done"],o);const s=u(e,["error"]);return s!=null&&f(t,["error"],s),t}function zw(e,t){const n={},i=u(t,["contents"]);if(i!=null){let s=ha(e,i);Array.isArray(s)&&(s=s.map(r=>r)),f(n,["requests[]","request","content"],s)}const o=u(t,["config"]);return o!=null&&(f(n,["_self"],Jw(o,n)),WR(n,{"requests[].*":"requests[].request.*"})),n}function Jw(e,t){const n={},i=u(e,["taskType"]);t!==void 0&&i!=null&&f(t,["requests[]","taskType"],i);const o=u(e,["title"]);t!==void 0&&o!=null&&f(t,["requests[]","title"],o);const s=u(e,["outputDimensionality"]);if(t!==void 0&&s!=null&&f(t,["requests[]","outputDimensionality"],s),u(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Kw(e,t){const n={},i=u(t,["fileName"]);i!=null&&f(n,["file_name"],i);const o=u(t,["inlinedRequests"]);return o!=null&&f(n,["requests"],zw(e,o)),n}function Xw(e){const t={};if(u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(e,["fileUri"]);n!=null&&f(t,["fileUri"],n);const i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function Zw(e){const t={},n=u(e,["id"]);n!=null&&f(t,["id"],n);const i=u(e,["args"]);i!=null&&f(t,["args"],i);const o=u(e,["name"]);if(o!=null&&f(t,["name"],o),u(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function Qw(e){const t={},n=u(e,["mode"]);n!=null&&f(t,["mode"],n);const i=u(e,["allowedFunctionNames"]);if(i!=null&&f(t,["allowedFunctionNames"],i),u(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function jw(e,t,n){const i={},o=u(t,["systemInstruction"]);n!==void 0&&o!=null&&f(n,["systemInstruction"],Yp(Ae(o)));const s=u(t,["temperature"]);s!=null&&f(i,["temperature"],s);const r=u(t,["topP"]);r!=null&&f(i,["topP"],r);const a=u(t,["topK"]);a!=null&&f(i,["topK"],a);const c=u(t,["candidateCount"]);c!=null&&f(i,["candidateCount"],c);const l=u(t,["maxOutputTokens"]);l!=null&&f(i,["maxOutputTokens"],l);const d=u(t,["stopSequences"]);d!=null&&f(i,["stopSequences"],d);const h=u(t,["responseLogprobs"]);h!=null&&f(i,["responseLogprobs"],h);const p=u(t,["logprobs"]);p!=null&&f(i,["logprobs"],p);const m=u(t,["presencePenalty"]);m!=null&&f(i,["presencePenalty"],m);const g=u(t,["frequencyPenalty"]);g!=null&&f(i,["frequencyPenalty"],g);const y=u(t,["seed"]);y!=null&&f(i,["seed"],y);const E=u(t,["responseMimeType"]);E!=null&&f(i,["responseMimeType"],E);const v=u(t,["responseSchema"]);v!=null&&f(i,["responseSchema"],pa(v));const T=u(t,["responseJsonSchema"]);if(T!=null&&f(i,["responseJsonSchema"],T),u(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const I=u(t,["safetySettings"]);if(n!==void 0&&I!=null){let F=I;Array.isArray(F)&&(F=F.map(x=>mM(x))),f(n,["safetySettings"],F)}const S=u(t,["tools"]);if(n!==void 0&&S!=null){let F=xn(S);Array.isArray(F)&&(F=F.map(x=>yM(bn(x)))),f(n,["tools"],F)}const A=u(t,["toolConfig"]);if(n!==void 0&&A!=null&&f(n,["toolConfig"],gM(A)),u(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const P=u(t,["cachedContent"]);n!==void 0&&P!=null&&f(n,["cachedContent"],Tt(e,P));const D=u(t,["responseModalities"]);D!=null&&f(i,["responseModalities"],D);const R=u(t,["mediaResolution"]);R!=null&&f(i,["mediaResolution"],R);const C=u(t,["speechConfig"]);if(C!=null&&f(i,["speechConfig"],ma(C)),u(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const _=u(t,["thinkingConfig"]);_!=null&&f(i,["thinkingConfig"],_);const b=u(t,["imageConfig"]);b!=null&&f(i,["imageConfig"],sM(b));const N=u(t,["enableEnhancedCivicAnswers"]);return N!=null&&f(i,["enableEnhancedCivicAnswers"],N),i}function eM(e){const t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const i=u(e,["candidates"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(l=>Fw(l))),f(t,["candidates"],c)}const o=u(e,["modelVersion"]);o!=null&&f(t,["modelVersion"],o);const s=u(e,["promptFeedback"]);s!=null&&f(t,["promptFeedback"],s);const r=u(e,["responseId"]);r!=null&&f(t,["responseId"],r);const a=u(e,["usageMetadata"]);return a!=null&&f(t,["usageMetadata"],a),t}function tM(e,t){const n={},i=u(t,["name"]);return i!=null&&f(n,["_url","name"],Nn(e,i)),n}function nM(e,t){const n={},i=u(t,["name"]);return i!=null&&f(n,["_url","name"],Nn(e,i)),n}function iM(e){const t={};if(u(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(e,["enableWidget"]);return n!=null&&f(t,["enableWidget"],n),t}function oM(e){const t={};if(u(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(e,["timeRangeFilter"]);return n!=null&&f(t,["timeRangeFilter"],n),t}function sM(e){const t={},n=u(e,["aspectRatio"]);n!=null&&f(t,["aspectRatio"],n);const i=u(e,["imageSize"]);if(i!=null&&f(t,["imageSize"],i),u(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(u(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function rM(e,t){const n={},i=u(t,["model"]);i!=null&&f(n,["request","model"],oe(e,i));const o=u(t,["contents"]);if(o!=null){let a=Je(o);Array.isArray(a)&&(a=a.map(c=>Yp(c))),f(n,["request","contents"],a)}const s=u(t,["metadata"]);s!=null&&f(n,["metadata"],s);const r=u(t,["config"]);return r!=null&&f(n,["request","generationConfig"],jw(e,r,u(n,["request"],{}))),n}function aM(e){const t={},n=u(e,["response"]);n!=null&&f(t,["response"],eM(n));const i=u(e,["error"]);return i!=null&&f(t,["error"],i),t}function lM(e,t){const n={},i=u(e,["pageSize"]);t!==void 0&&i!=null&&f(t,["_query","pageSize"],i);const o=u(e,["pageToken"]);if(t!==void 0&&o!=null&&f(t,["_query","pageToken"],o),u(e,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function cM(e,t){const n={},i=u(e,["pageSize"]);t!==void 0&&i!=null&&f(t,["_query","pageSize"],i);const o=u(e,["pageToken"]);t!==void 0&&o!=null&&f(t,["_query","pageToken"],o);const s=u(e,["filter"]);return t!==void 0&&s!=null&&f(t,["_query","filter"],s),n}function uM(e){const t={},n=u(e,["config"]);return n!=null&&lM(n,t),t}function dM(e){const t={},n=u(e,["config"]);return n!=null&&cM(n,t),t}function fM(e){const t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const i=u(e,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);const o=u(e,["operations"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>$i(r))),f(t,["batchJobs"],s)}return t}function hM(e){const t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const i=u(e,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);const o=u(e,["batchPredictionJobs"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>tr(r))),f(t,["batchJobs"],s)}return t}function pM(e){const t={},n=u(e,["mediaResolution"]);n!=null&&f(t,["mediaResolution"],n);const i=u(e,["codeExecutionResult"]);i!=null&&f(t,["codeExecutionResult"],i);const o=u(e,["executableCode"]);o!=null&&f(t,["executableCode"],o);const s=u(e,["fileData"]);s!=null&&f(t,["fileData"],Xw(s));const r=u(e,["functionCall"]);r!=null&&f(t,["functionCall"],Zw(r));const a=u(e,["functionResponse"]);a!=null&&f(t,["functionResponse"],a);const c=u(e,["inlineData"]);c!=null&&f(t,["inlineData"],Nw(c));const l=u(e,["text"]);l!=null&&f(t,["text"],l);const d=u(e,["thought"]);d!=null&&f(t,["thought"],d);const h=u(e,["thoughtSignature"]);h!=null&&f(t,["thoughtSignature"],h);const p=u(e,["videoMetadata"]);return p!=null&&f(t,["videoMetadata"],p),t}function mM(e){const t={},n=u(e,["category"]);if(n!=null&&f(t,["category"],n),u(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=u(e,["threshold"]);return i!=null&&f(t,["threshold"],i),t}function gM(e){const t={},n=u(e,["functionCallingConfig"]);n!=null&&f(t,["functionCallingConfig"],Qw(n));const i=u(e,["retrievalConfig"]);return i!=null&&f(t,["retrievalConfig"],i),t}function yM(e){const t={},n=u(e,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(h=>h)),f(t,["functionDeclarations"],d)}if(u(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(e,["googleSearchRetrieval"]);i!=null&&f(t,["googleSearchRetrieval"],i);const o=u(e,["computerUse"]);o!=null&&f(t,["computerUse"],o);const s=u(e,["fileSearch"]);s!=null&&f(t,["fileSearch"],s);const r=u(e,["codeExecution"]);if(r!=null&&f(t,["codeExecution"],r),u(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=u(e,["googleMaps"]);a!=null&&f(t,["googleMaps"],iM(a));const c=u(e,["googleSearch"]);c!=null&&f(t,["googleSearch"],oM(c));const l=u(e,["urlContext"]);return l!=null&&f(t,["urlContext"],l),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var yt;(function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents",e.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",e.PAGED_ITEM_DOCUMENTS="documents"})(yt||(yt={}));class Jt{constructor(t,n,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(t,i,o)}init(t,n,i){var o,s;this.nameInternal=t,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let r={config:{}};!i||Object.keys(i).length===0?r={config:{}}:typeof i=="object"?r=Object.assign({},i):r=i,r.config&&(r.config.pageToken=n.nextPageToken),this.paramsInternal=r,this.pageInternalSize=(s=(o=r.config)===null||o===void 0?void 0:o.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class EM extends Et{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Jt(yt.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(t){const n=fd(this.apiClient,t),i=n._url,o=H("{model}:batchGenerateContent",i),a=n.batch.inputConfig.requests,c=a.requests,l=[];for(const d of c){const h=Object.assign({},d);if(h.systemInstruction){const p=h.systemInstruction;delete h.systemInstruction;const m=h.request;m.systemInstruction=p,h.request=m}l.push(h)}return a.requests=l,delete n.config,delete n._url,delete n._query,{path:o,body:n}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,n){const i=n?Object.assign({},n):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){const s=this.getGcsUri(t),r=this.getBigqueryUri(t);if(s)s.endsWith(".jsonl")?i.dest=`${s.slice(0,-6)}/dest`:i.dest=`${s}_dest_${o}`;else if(r)i.dest=`${r}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(t){var n,i,o,s;let r,a="",c={};if(this.apiClient.isVertexAI()){const l=Gw(this.apiClient,t);return a=H("batchPredictionJobs",l._url),c=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>tr(d))}else{const l=fd(this.apiClient,t);return a=H("{model}:batchGenerateContent",l._url),c=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),r.then(d=>$i(d))}}async createEmbeddingsInternal(t){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Hw(this.apiClient,t);return s=H("{model}:asyncBatchEmbedContent",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>$i(c))}}async get(t){var n,i,o,s;let r,a="",c={};if(this.apiClient.isVertexAI()){const l=nM(this.apiClient,t);return a=H("batchPredictionJobs/{name}",l._url),c=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>tr(d))}else{const l=tM(this.apiClient,t);return a=H("batches/{name}",l._url),c=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),r.then(d=>$i(d))}}async cancel(t){var n,i,o,s;let r="",a={};if(this.apiClient.isVertexAI()){const c=Ow(this.apiClient,t);r=H("batchPredictionJobs/{name}:cancel",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}else{const c=Lw(this.apiClient,t);r=H("batches/{name}:cancel",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(t){var n,i,o,s;let r,a="",c={};if(this.apiClient.isVertexAI()){const l=dM(t);return a=H("batchPredictionJobs",l._url),c=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const h=hM(d),p=new ld;return Object.assign(p,h),p})}else{const l=uM(t);return a=H("batches",l._url),c=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const h=fM(d),p=new ld;return Object.assign(p,h),p})}}async delete(t){var n,i,o,s;let r,a="",c={};if(this.apiClient.isVertexAI()){const l=Ww(this.apiClient,t);return a=H("batchPredictionJobs/{name}",l._url),c=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>Yw(d))}else{const l=qw(this.apiClient,t);return a=H("batches/{name}",l._url),c=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>$w(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TM(e){const t={},n=u(e,["data"]);if(n!=null&&f(t,["data"],n),u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function hd(e){const t={},n=u(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>HM(s))),f(t,["parts"],o)}const i=u(e,["role"]);return i!=null&&f(t,["role"],i),t}function IM(e,t){const n={},i=u(e,["ttl"]);t!==void 0&&i!=null&&f(t,["ttl"],i);const o=u(e,["expireTime"]);t!==void 0&&o!=null&&f(t,["expireTime"],o);const s=u(e,["displayName"]);t!==void 0&&s!=null&&f(t,["displayName"],s);const r=u(e,["contents"]);if(t!==void 0&&r!=null){let d=Je(r);Array.isArray(d)&&(d=d.map(h=>hd(h))),f(t,["contents"],d)}const a=u(e,["systemInstruction"]);t!==void 0&&a!=null&&f(t,["systemInstruction"],hd(Ae(a)));const c=u(e,["tools"]);if(t!==void 0&&c!=null){let d=c;Array.isArray(d)&&(d=d.map(h=>WM(h))),f(t,["tools"],d)}const l=u(e,["toolConfig"]);if(t!==void 0&&l!=null&&f(t,["toolConfig"],qM(l)),u(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function vM(e,t){const n={},i=u(e,["ttl"]);t!==void 0&&i!=null&&f(t,["ttl"],i);const o=u(e,["expireTime"]);t!==void 0&&o!=null&&f(t,["expireTime"],o);const s=u(e,["displayName"]);t!==void 0&&s!=null&&f(t,["displayName"],s);const r=u(e,["contents"]);if(t!==void 0&&r!=null){let h=Je(r);Array.isArray(h)&&(h=h.map(p=>p)),f(t,["contents"],h)}const a=u(e,["systemInstruction"]);t!==void 0&&a!=null&&f(t,["systemInstruction"],Ae(a));const c=u(e,["tools"]);if(t!==void 0&&c!=null){let h=c;Array.isArray(h)&&(h=h.map(p=>$M(p))),f(t,["tools"],h)}const l=u(e,["toolConfig"]);t!==void 0&&l!=null&&f(t,["toolConfig"],l);const d=u(e,["kmsKeyName"]);return t!==void 0&&d!=null&&f(t,["encryption_spec","kmsKeyName"],d),n}function _M(e,t){const n={},i=u(t,["model"]);i!=null&&f(n,["model"],Lp(e,i));const o=u(t,["config"]);return o!=null&&IM(o,n),n}function CM(e,t){const n={},i=u(t,["model"]);i!=null&&f(n,["model"],Lp(e,i));const o=u(t,["config"]);return o!=null&&vM(o,n),n}function SM(e,t){const n={},i=u(t,["name"]);return i!=null&&f(n,["_url","name"],Tt(e,i)),n}function AM(e,t){const n={},i=u(t,["name"]);return i!=null&&f(n,["_url","name"],Tt(e,i)),n}function RM(e){const t={},n=u(e,["sdkHttpResponse"]);return n!=null&&f(t,["sdkHttpResponse"],n),t}function wM(e){const t={},n=u(e,["sdkHttpResponse"]);return n!=null&&f(t,["sdkHttpResponse"],n),t}function MM(e){const t={};if(u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(e,["fileUri"]);n!=null&&f(t,["fileUri"],n);const i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function PM(e){const t={},n=u(e,["id"]);n!=null&&f(t,["id"],n);const i=u(e,["args"]);i!=null&&f(t,["args"],i);const o=u(e,["name"]);if(o!=null&&f(t,["name"],o),u(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function DM(e){const t={},n=u(e,["mode"]);n!=null&&f(t,["mode"],n);const i=u(e,["allowedFunctionNames"]);if(i!=null&&f(t,["allowedFunctionNames"],i),u(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function bM(e){const t={};if(u(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=u(e,["description"]);n!=null&&f(t,["description"],n);const i=u(e,["name"]);i!=null&&f(t,["name"],i);const o=u(e,["parameters"]);o!=null&&f(t,["parameters"],o);const s=u(e,["parametersJsonSchema"]);s!=null&&f(t,["parametersJsonSchema"],s);const r=u(e,["response"]);r!=null&&f(t,["response"],r);const a=u(e,["responseJsonSchema"]);return a!=null&&f(t,["responseJsonSchema"],a),t}function xM(e,t){const n={},i=u(t,["name"]);return i!=null&&f(n,["_url","name"],Tt(e,i)),n}function NM(e,t){const n={},i=u(t,["name"]);return i!=null&&f(n,["_url","name"],Tt(e,i)),n}function LM(e){const t={};if(u(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(e,["enableWidget"]);return n!=null&&f(t,["enableWidget"],n),t}function OM(e){const t={};if(u(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(e,["timeRangeFilter"]);return n!=null&&f(t,["timeRangeFilter"],n),t}function FM(e,t){const n={},i=u(e,["pageSize"]);t!==void 0&&i!=null&&f(t,["_query","pageSize"],i);const o=u(e,["pageToken"]);return t!==void 0&&o!=null&&f(t,["_query","pageToken"],o),n}function kM(e,t){const n={},i=u(e,["pageSize"]);t!==void 0&&i!=null&&f(t,["_query","pageSize"],i);const o=u(e,["pageToken"]);return t!==void 0&&o!=null&&f(t,["_query","pageToken"],o),n}function VM(e){const t={},n=u(e,["config"]);return n!=null&&FM(n,t),t}function UM(e){const t={},n=u(e,["config"]);return n!=null&&kM(n,t),t}function GM(e){const t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const i=u(e,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);const o=u(e,["cachedContents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),f(t,["cachedContents"],s)}return t}function BM(e){const t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const i=u(e,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);const o=u(e,["cachedContents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),f(t,["cachedContents"],s)}return t}function HM(e){const t={},n=u(e,["mediaResolution"]);n!=null&&f(t,["mediaResolution"],n);const i=u(e,["codeExecutionResult"]);i!=null&&f(t,["codeExecutionResult"],i);const o=u(e,["executableCode"]);o!=null&&f(t,["executableCode"],o);const s=u(e,["fileData"]);s!=null&&f(t,["fileData"],MM(s));const r=u(e,["functionCall"]);r!=null&&f(t,["functionCall"],PM(r));const a=u(e,["functionResponse"]);a!=null&&f(t,["functionResponse"],a);const c=u(e,["inlineData"]);c!=null&&f(t,["inlineData"],TM(c));const l=u(e,["text"]);l!=null&&f(t,["text"],l);const d=u(e,["thought"]);d!=null&&f(t,["thought"],d);const h=u(e,["thoughtSignature"]);h!=null&&f(t,["thoughtSignature"],h);const p=u(e,["videoMetadata"]);return p!=null&&f(t,["videoMetadata"],p),t}function qM(e){const t={},n=u(e,["functionCallingConfig"]);n!=null&&f(t,["functionCallingConfig"],DM(n));const i=u(e,["retrievalConfig"]);return i!=null&&f(t,["retrievalConfig"],i),t}function WM(e){const t={},n=u(e,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(h=>h)),f(t,["functionDeclarations"],d)}if(u(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(e,["googleSearchRetrieval"]);i!=null&&f(t,["googleSearchRetrieval"],i);const o=u(e,["computerUse"]);o!=null&&f(t,["computerUse"],o);const s=u(e,["fileSearch"]);s!=null&&f(t,["fileSearch"],s);const r=u(e,["codeExecution"]);if(r!=null&&f(t,["codeExecution"],r),u(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=u(e,["googleMaps"]);a!=null&&f(t,["googleMaps"],LM(a));const c=u(e,["googleSearch"]);c!=null&&f(t,["googleSearch"],OM(c));const l=u(e,["urlContext"]);return l!=null&&f(t,["urlContext"],l),t}function $M(e){const t={},n=u(e,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>bM(p))),f(t,["functionDeclarations"],h)}const i=u(e,["retrieval"]);i!=null&&f(t,["retrieval"],i);const o=u(e,["googleSearchRetrieval"]);o!=null&&f(t,["googleSearchRetrieval"],o);const s=u(e,["computerUse"]);if(s!=null&&f(t,["computerUse"],s),u(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=u(e,["codeExecution"]);r!=null&&f(t,["codeExecution"],r);const a=u(e,["enterpriseWebSearch"]);a!=null&&f(t,["enterpriseWebSearch"],a);const c=u(e,["googleMaps"]);c!=null&&f(t,["googleMaps"],c);const l=u(e,["googleSearch"]);l!=null&&f(t,["googleSearch"],l);const d=u(e,["urlContext"]);return d!=null&&f(t,["urlContext"],d),t}function YM(e,t){const n={},i=u(e,["ttl"]);t!==void 0&&i!=null&&f(t,["ttl"],i);const o=u(e,["expireTime"]);return t!==void 0&&o!=null&&f(t,["expireTime"],o),n}function zM(e,t){const n={},i=u(e,["ttl"]);t!==void 0&&i!=null&&f(t,["ttl"],i);const o=u(e,["expireTime"]);return t!==void 0&&o!=null&&f(t,["expireTime"],o),n}function JM(e,t){const n={},i=u(t,["name"]);i!=null&&f(n,["_url","name"],Tt(e,i));const o=u(t,["config"]);return o!=null&&YM(o,n),n}function KM(e,t){const n={},i=u(t,["name"]);i!=null&&f(n,["_url","name"],Tt(e,i));const o=u(t,["config"]);return o!=null&&zM(o,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class XM extends Et{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Jt(yt.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(t){var n,i,o,s;let r,a="",c={};if(this.apiClient.isVertexAI()){const l=CM(this.apiClient,t);return a=H("cachedContents",l._url),c=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}else{const l=_M(this.apiClient,t);return a=H("cachedContents",l._url),c=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async get(t){var n,i,o,s;let r,a="",c={};if(this.apiClient.isVertexAI()){const l=NM(this.apiClient,t);return a=H("{name}",l._url),c=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}else{const l=xM(this.apiClient,t);return a=H("{name}",l._url),c=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async delete(t){var n,i,o,s;let r,a="",c={};if(this.apiClient.isVertexAI()){const l=AM(this.apiClient,t);return a=H("{name}",l._url),c=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const h=wM(d),p=new rd;return Object.assign(p,h),p})}else{const l=SM(this.apiClient,t);return a=H("{name}",l._url),c=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const h=RM(d),p=new rd;return Object.assign(p,h),p})}}async update(t){var n,i,o,s;let r,a="",c={};if(this.apiClient.isVertexAI()){const l=KM(this.apiClient,t);return a=H("{name}",l._url),c=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}else{const l=JM(this.apiClient,t);return a=H("{name}",l._url),c=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async listInternal(t){var n,i,o,s;let r,a="",c={};if(this.apiClient.isVertexAI()){const l=UM(t);return a=H("cachedContents",l._url),c=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const h=BM(d),p=new ad;return Object.assign(p,h),p})}else{const l=VM(t);return a=H("cachedContents",l._url),c=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const h=GM(d),p=new ad;return Object.assign(p,h),p})}}}function co(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]]);return n}function pd(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function K(e){return this instanceof K?(this.v=e,this):new K(e)}function ot(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(e,t||[]),o,s=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",r),o[Symbol.asyncIterator]=function(){return this},o;function r(m){return function(g){return Promise.resolve(g).then(m,h)}}function a(m,g){i[m]&&(o[m]=function(y){return new Promise(function(E,v){s.push([m,y,E,v])>1||c(m,y)})},g&&(o[m]=g(o[m])))}function c(m,g){try{l(i[m](g))}catch(y){p(s[0][3],y)}}function l(m){m.value instanceof K?Promise.resolve(m.value.v).then(d,h):p(s[0][2],m)}function d(m){c("next",m)}function h(m){c("throw",m)}function p(m,g){m(g),s.shift(),s.length&&c(s[0][0],s[0][1])}}function st(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof pd=="function"?pd(e):e[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=e[s]&&function(r){return new Promise(function(a,c){r=e[s](r),o(a,c,r.done,r.value)})}}function o(s,r,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ZM(e){var t;if(e.candidates==null||e.candidates.length===0)return!1;const n=(t=e.candidates[0])===null||t===void 0?void 0:t.content;return n===void 0?!1:zp(n)}function zp(e){if(e.parts===void 0||e.parts.length===0)return!1;for(const t of e.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function QM(e){if(e.length!==0){for(const t of e)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function md(e){if(e===void 0||e.length===0)return[];const t=[],n=e.length;let i=0;for(;i<n;)if(e[i].role==="user")t.push(e[i]),i++;else{const o=[];let s=!0;for(;i<n&&e[i].role==="model";)o.push(e[i]),s&&!zp(e[i])&&(s=!1),i++;s?t.push(...o):t.pop()}return t}class jM{constructor(t,n){this.modelsModule=t,this.apiClient=n}create(t){return new eP(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class eP{constructor(t,n,i,o={},s=[]){this.apiClient=t,this.modelsModule=n,this.model=i,this.config=o,this.history=s,this.sendPromise=Promise.resolve(),QM(s)}async sendMessage(t){var n;await this.sendPromise;const i=Ae(t.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=t.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,r,a;const c=await o,l=(r=(s=c.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content,d=c.automaticFunctionCallingHistory,h=this.getHistory(!0).length;let p=[];d!=null&&(p=(a=d.slice(h))!==null&&a!==void 0?a:[]);const m=l?[l]:[];this.recordHistory(i,m,p)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(t){var n;await this.sendPromise;const i=Ae(t.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=t.config)!==null&&n!==void 0?n:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const s=await o;return this.processStreamResponse(s,i)}getHistory(t=!1){const n=t?md(this.history):this.history;return structuredClone(n)}processStreamResponse(t,n){return ot(this,arguments,function*(){var o,s,r,a,c,l;const d=[];try{for(var h=!0,p=st(t),m;m=yield K(p.next()),o=m.done,!o;h=!0){a=m.value,h=!1;const g=a;if(ZM(g)){const y=(l=(c=g.candidates)===null||c===void 0?void 0:c[0])===null||l===void 0?void 0:l.content;y!==void 0&&d.push(y)}yield yield K(g)}}catch(g){s={error:g}}finally{try{!h&&!o&&(r=p.return)&&(yield K(r.call(p)))}finally{if(s)throw s.error}}this.recordHistory(n,d)})}recordHistory(t,n,i){let o=[];n.length>0&&n.every(s=>s.role!==void 0)?o=n:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...md(i)):this.history.push(t),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xo extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,xo.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tP(e){const t={},n=u(e,["file"]);return n!=null&&f(t,["file"],n),t}function nP(e){const t={},n=u(e,["sdkHttpResponse"]);return n!=null&&f(t,["sdkHttpResponse"],n),t}function iP(e){const t={},n=u(e,["name"]);return n!=null&&f(t,["_url","file"],Gp(n)),t}function oP(e){const t={},n=u(e,["sdkHttpResponse"]);return n!=null&&f(t,["sdkHttpResponse"],n),t}function sP(e){const t={},n=u(e,["name"]);return n!=null&&f(t,["_url","file"],Gp(n)),t}function rP(e,t){const n={},i=u(e,["pageSize"]);t!==void 0&&i!=null&&f(t,["_query","pageSize"],i);const o=u(e,["pageToken"]);return t!==void 0&&o!=null&&f(t,["_query","pageToken"],o),n}function aP(e){const t={},n=u(e,["config"]);return n!=null&&rP(n,t),t}function lP(e){const t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const i=u(e,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);const o=u(e,["files"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),f(t,["files"],s)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cP extends Et{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Jt(yt.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(n=>n)}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=aP(t);return s=H("files",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(l=>{const d=l;return d.sdkHttpResponse={headers:c.headers},d})),o.then(c=>{const l=lP(c),d=new hw;return Object.assign(d,l),d})}}async createInternal(t){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=tP(t);return s=H("upload/v1beta/files",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>{const l=nP(c),d=new pw;return Object.assign(d,l),d})}}async get(t){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=sP(t);return s=H("files/{file}",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>c)}}async delete(t){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=iP(t);return s=H("files/{file}",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(l=>{const d=l;return d.sdkHttpResponse={headers:c.headers},d})),o.then(c=>{const l=oP(c),d=new mw;return Object.assign(d,l),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Yi(e){const t={},n=u(e,["data"]);if(n!=null&&f(t,["data"],n),u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function uP(e){const t={},n=u(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>RP(s))),f(t,["parts"],o)}const i=u(e,["role"]);return i!=null&&f(t,["role"],i),t}function dP(e){const t={};if(u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(e,["fileUri"]);n!=null&&f(t,["fileUri"],n);const i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function fP(e){const t={},n=u(e,["id"]);n!=null&&f(t,["id"],n);const i=u(e,["args"]);i!=null&&f(t,["args"],i);const o=u(e,["name"]);if(o!=null&&f(t,["name"],o),u(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function hP(e){const t={};if(u(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=u(e,["description"]);n!=null&&f(t,["description"],n);const i=u(e,["name"]);i!=null&&f(t,["name"],i);const o=u(e,["parameters"]);o!=null&&f(t,["parameters"],o);const s=u(e,["parametersJsonSchema"]);s!=null&&f(t,["parametersJsonSchema"],s);const r=u(e,["response"]);r!=null&&f(t,["response"],r);const a=u(e,["responseJsonSchema"]);return a!=null&&f(t,["responseJsonSchema"],a),t}function pP(e){const t={},n=u(e,["modelSelectionConfig"]);n!=null&&f(t,["modelConfig"],n);const i=u(e,["responseJsonSchema"]);i!=null&&f(t,["responseJsonSchema"],i);const o=u(e,["audioTimestamp"]);o!=null&&f(t,["audioTimestamp"],o);const s=u(e,["candidateCount"]);s!=null&&f(t,["candidateCount"],s);const r=u(e,["enableAffectiveDialog"]);r!=null&&f(t,["enableAffectiveDialog"],r);const a=u(e,["frequencyPenalty"]);a!=null&&f(t,["frequencyPenalty"],a);const c=u(e,["logprobs"]);c!=null&&f(t,["logprobs"],c);const l=u(e,["maxOutputTokens"]);l!=null&&f(t,["maxOutputTokens"],l);const d=u(e,["mediaResolution"]);d!=null&&f(t,["mediaResolution"],d);const h=u(e,["presencePenalty"]);h!=null&&f(t,["presencePenalty"],h);const p=u(e,["responseLogprobs"]);p!=null&&f(t,["responseLogprobs"],p);const m=u(e,["responseMimeType"]);m!=null&&f(t,["responseMimeType"],m);const g=u(e,["responseModalities"]);g!=null&&f(t,["responseModalities"],g);const y=u(e,["responseSchema"]);y!=null&&f(t,["responseSchema"],y);const E=u(e,["routingConfig"]);E!=null&&f(t,["routingConfig"],E);const v=u(e,["seed"]);v!=null&&f(t,["seed"],v);const T=u(e,["speechConfig"]);T!=null&&f(t,["speechConfig"],Jp(T));const I=u(e,["stopSequences"]);I!=null&&f(t,["stopSequences"],I);const S=u(e,["temperature"]);S!=null&&f(t,["temperature"],S);const A=u(e,["thinkingConfig"]);A!=null&&f(t,["thinkingConfig"],A);const P=u(e,["topK"]);P!=null&&f(t,["topK"],P);const D=u(e,["topP"]);if(D!=null&&f(t,["topP"],D),u(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function mP(e){const t={};if(u(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(e,["enableWidget"]);return n!=null&&f(t,["enableWidget"],n),t}function gP(e){const t={};if(u(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(e,["timeRangeFilter"]);return n!=null&&f(t,["timeRangeFilter"],n),t}function yP(e,t){const n={},i=u(e,["generationConfig"]);t!==void 0&&i!=null&&f(t,["setup","generationConfig"],i);const o=u(e,["responseModalities"]);t!==void 0&&o!=null&&f(t,["setup","generationConfig","responseModalities"],o);const s=u(e,["temperature"]);t!==void 0&&s!=null&&f(t,["setup","generationConfig","temperature"],s);const r=u(e,["topP"]);t!==void 0&&r!=null&&f(t,["setup","generationConfig","topP"],r);const a=u(e,["topK"]);t!==void 0&&a!=null&&f(t,["setup","generationConfig","topK"],a);const c=u(e,["maxOutputTokens"]);t!==void 0&&c!=null&&f(t,["setup","generationConfig","maxOutputTokens"],c);const l=u(e,["mediaResolution"]);t!==void 0&&l!=null&&f(t,["setup","generationConfig","mediaResolution"],l);const d=u(e,["seed"]);t!==void 0&&d!=null&&f(t,["setup","generationConfig","seed"],d);const h=u(e,["speechConfig"]);t!==void 0&&h!=null&&f(t,["setup","generationConfig","speechConfig"],ga(h));const p=u(e,["thinkingConfig"]);t!==void 0&&p!=null&&f(t,["setup","generationConfig","thinkingConfig"],p);const m=u(e,["enableAffectiveDialog"]);t!==void 0&&m!=null&&f(t,["setup","generationConfig","enableAffectiveDialog"],m);const g=u(e,["systemInstruction"]);t!==void 0&&g!=null&&f(t,["setup","systemInstruction"],uP(Ae(g)));const y=u(e,["tools"]);if(t!==void 0&&y!=null){let P=xn(y);Array.isArray(P)&&(P=P.map(D=>MP(bn(D)))),f(t,["setup","tools"],P)}const E=u(e,["sessionResumption"]);t!==void 0&&E!=null&&f(t,["setup","sessionResumption"],wP(E));const v=u(e,["inputAudioTranscription"]);t!==void 0&&v!=null&&f(t,["setup","inputAudioTranscription"],v);const T=u(e,["outputAudioTranscription"]);t!==void 0&&T!=null&&f(t,["setup","outputAudioTranscription"],T);const I=u(e,["realtimeInputConfig"]);t!==void 0&&I!=null&&f(t,["setup","realtimeInputConfig"],I);const S=u(e,["contextWindowCompression"]);t!==void 0&&S!=null&&f(t,["setup","contextWindowCompression"],S);const A=u(e,["proactivity"]);if(t!==void 0&&A!=null&&f(t,["setup","proactivity"],A),u(e,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function EP(e,t){const n={},i=u(e,["generationConfig"]);t!==void 0&&i!=null&&f(t,["setup","generationConfig"],pP(i));const o=u(e,["responseModalities"]);t!==void 0&&o!=null&&f(t,["setup","generationConfig","responseModalities"],o);const s=u(e,["temperature"]);t!==void 0&&s!=null&&f(t,["setup","generationConfig","temperature"],s);const r=u(e,["topP"]);t!==void 0&&r!=null&&f(t,["setup","generationConfig","topP"],r);const a=u(e,["topK"]);t!==void 0&&a!=null&&f(t,["setup","generationConfig","topK"],a);const c=u(e,["maxOutputTokens"]);t!==void 0&&c!=null&&f(t,["setup","generationConfig","maxOutputTokens"],c);const l=u(e,["mediaResolution"]);t!==void 0&&l!=null&&f(t,["setup","generationConfig","mediaResolution"],l);const d=u(e,["seed"]);t!==void 0&&d!=null&&f(t,["setup","generationConfig","seed"],d);const h=u(e,["speechConfig"]);t!==void 0&&h!=null&&f(t,["setup","generationConfig","speechConfig"],Jp(ga(h)));const p=u(e,["thinkingConfig"]);t!==void 0&&p!=null&&f(t,["setup","generationConfig","thinkingConfig"],p);const m=u(e,["enableAffectiveDialog"]);t!==void 0&&m!=null&&f(t,["setup","generationConfig","enableAffectiveDialog"],m);const g=u(e,["systemInstruction"]);t!==void 0&&g!=null&&f(t,["setup","systemInstruction"],Ae(g));const y=u(e,["tools"]);if(t!==void 0&&y!=null){let D=xn(y);Array.isArray(D)&&(D=D.map(R=>PP(bn(R)))),f(t,["setup","tools"],D)}const E=u(e,["sessionResumption"]);t!==void 0&&E!=null&&f(t,["setup","sessionResumption"],E);const v=u(e,["inputAudioTranscription"]);t!==void 0&&v!=null&&f(t,["setup","inputAudioTranscription"],v);const T=u(e,["outputAudioTranscription"]);t!==void 0&&T!=null&&f(t,["setup","outputAudioTranscription"],T);const I=u(e,["realtimeInputConfig"]);t!==void 0&&I!=null&&f(t,["setup","realtimeInputConfig"],I);const S=u(e,["contextWindowCompression"]);t!==void 0&&S!=null&&f(t,["setup","contextWindowCompression"],S);const A=u(e,["proactivity"]);t!==void 0&&A!=null&&f(t,["setup","proactivity"],A);const P=u(e,["explicitVadSignal"]);return t!==void 0&&P!=null&&f(t,["setup","explicitVadSignal"],P),n}function TP(e,t){const n={},i=u(t,["model"]);i!=null&&f(n,["setup","model"],oe(e,i));const o=u(t,["config"]);return o!=null&&f(n,["config"],yP(o,n)),n}function IP(e,t){const n={},i=u(t,["model"]);i!=null&&f(n,["setup","model"],oe(e,i));const o=u(t,["config"]);return o!=null&&f(n,["config"],EP(o,n)),n}function vP(e){const t={},n=u(e,["musicGenerationConfig"]);return n!=null&&f(t,["musicGenerationConfig"],n),t}function _P(e){const t={},n=u(e,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),f(t,["weightedPrompts"],i)}return t}function CP(e){const t={},n=u(e,["media"]);if(n!=null){let l=Op(n);Array.isArray(l)&&(l=l.map(d=>Yi(d))),f(t,["mediaChunks"],l)}const i=u(e,["audio"]);i!=null&&f(t,["audio"],Yi(kp(i)));const o=u(e,["audioStreamEnd"]);o!=null&&f(t,["audioStreamEnd"],o);const s=u(e,["video"]);s!=null&&f(t,["video"],Yi(Fp(s)));const r=u(e,["text"]);r!=null&&f(t,["text"],r);const a=u(e,["activityStart"]);a!=null&&f(t,["activityStart"],a);const c=u(e,["activityEnd"]);return c!=null&&f(t,["activityEnd"],c),t}function SP(e){const t={},n=u(e,["media"]);if(n!=null){let l=Op(n);Array.isArray(l)&&(l=l.map(d=>d)),f(t,["mediaChunks"],l)}const i=u(e,["audio"]);i!=null&&f(t,["audio"],kp(i));const o=u(e,["audioStreamEnd"]);o!=null&&f(t,["audioStreamEnd"],o);const s=u(e,["video"]);s!=null&&f(t,["video"],Fp(s));const r=u(e,["text"]);r!=null&&f(t,["text"],r);const a=u(e,["activityStart"]);a!=null&&f(t,["activityStart"],a);const c=u(e,["activityEnd"]);return c!=null&&f(t,["activityEnd"],c),t}function AP(e){const t={},n=u(e,["setupComplete"]);n!=null&&f(t,["setupComplete"],n);const i=u(e,["serverContent"]);i!=null&&f(t,["serverContent"],i);const o=u(e,["toolCall"]);o!=null&&f(t,["toolCall"],o);const s=u(e,["toolCallCancellation"]);s!=null&&f(t,["toolCallCancellation"],s);const r=u(e,["usageMetadata"]);r!=null&&f(t,["usageMetadata"],DP(r));const a=u(e,["goAway"]);a!=null&&f(t,["goAway"],a);const c=u(e,["sessionResumptionUpdate"]);c!=null&&f(t,["sessionResumptionUpdate"],c);const l=u(e,["voiceActivityDetectionSignal"]);return l!=null&&f(t,["voiceActivityDetectionSignal"],l),t}function RP(e){const t={},n=u(e,["mediaResolution"]);n!=null&&f(t,["mediaResolution"],n);const i=u(e,["codeExecutionResult"]);i!=null&&f(t,["codeExecutionResult"],i);const o=u(e,["executableCode"]);o!=null&&f(t,["executableCode"],o);const s=u(e,["fileData"]);s!=null&&f(t,["fileData"],dP(s));const r=u(e,["functionCall"]);r!=null&&f(t,["functionCall"],fP(r));const a=u(e,["functionResponse"]);a!=null&&f(t,["functionResponse"],a);const c=u(e,["inlineData"]);c!=null&&f(t,["inlineData"],Yi(c));const l=u(e,["text"]);l!=null&&f(t,["text"],l);const d=u(e,["thought"]);d!=null&&f(t,["thought"],d);const h=u(e,["thoughtSignature"]);h!=null&&f(t,["thoughtSignature"],h);const p=u(e,["videoMetadata"]);return p!=null&&f(t,["videoMetadata"],p),t}function wP(e){const t={},n=u(e,["handle"]);if(n!=null&&f(t,["handle"],n),u(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function Jp(e){const t={},n=u(e,["voiceConfig"]);n!=null&&f(t,["voiceConfig"],n);const i=u(e,["languageCode"]);if(i!=null&&f(t,["languageCode"],i),u(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return t}function MP(e){const t={},n=u(e,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(h=>h)),f(t,["functionDeclarations"],d)}if(u(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(e,["googleSearchRetrieval"]);i!=null&&f(t,["googleSearchRetrieval"],i);const o=u(e,["computerUse"]);o!=null&&f(t,["computerUse"],o);const s=u(e,["fileSearch"]);s!=null&&f(t,["fileSearch"],s);const r=u(e,["codeExecution"]);if(r!=null&&f(t,["codeExecution"],r),u(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=u(e,["googleMaps"]);a!=null&&f(t,["googleMaps"],mP(a));const c=u(e,["googleSearch"]);c!=null&&f(t,["googleSearch"],gP(c));const l=u(e,["urlContext"]);return l!=null&&f(t,["urlContext"],l),t}function PP(e){const t={},n=u(e,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>hP(p))),f(t,["functionDeclarations"],h)}const i=u(e,["retrieval"]);i!=null&&f(t,["retrieval"],i);const o=u(e,["googleSearchRetrieval"]);o!=null&&f(t,["googleSearchRetrieval"],o);const s=u(e,["computerUse"]);if(s!=null&&f(t,["computerUse"],s),u(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=u(e,["codeExecution"]);r!=null&&f(t,["codeExecution"],r);const a=u(e,["enterpriseWebSearch"]);a!=null&&f(t,["enterpriseWebSearch"],a);const c=u(e,["googleMaps"]);c!=null&&f(t,["googleMaps"],c);const l=u(e,["googleSearch"]);l!=null&&f(t,["googleSearch"],l);const d=u(e,["urlContext"]);return d!=null&&f(t,["urlContext"],d),t}function DP(e){const t={},n=u(e,["promptTokenCount"]);n!=null&&f(t,["promptTokenCount"],n);const i=u(e,["cachedContentTokenCount"]);i!=null&&f(t,["cachedContentTokenCount"],i);const o=u(e,["candidatesTokenCount"]);o!=null&&f(t,["responseTokenCount"],o);const s=u(e,["toolUsePromptTokenCount"]);s!=null&&f(t,["toolUsePromptTokenCount"],s);const r=u(e,["thoughtsTokenCount"]);r!=null&&f(t,["thoughtsTokenCount"],r);const a=u(e,["totalTokenCount"]);a!=null&&f(t,["totalTokenCount"],a);const c=u(e,["promptTokensDetails"]);if(c!=null){let m=c;Array.isArray(m)&&(m=m.map(g=>g)),f(t,["promptTokensDetails"],m)}const l=u(e,["cacheTokensDetails"]);if(l!=null){let m=l;Array.isArray(m)&&(m=m.map(g=>g)),f(t,["cacheTokensDetails"],m)}const d=u(e,["candidatesTokensDetails"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(g=>g)),f(t,["responseTokensDetails"],m)}const h=u(e,["toolUsePromptTokensDetails"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(g=>g)),f(t,["toolUsePromptTokensDetails"],m)}const p=u(e,["trafficType"]);return p!=null&&f(t,["trafficType"],p),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bP(e){const t={},n=u(e,["data"]);if(n!=null&&f(t,["data"],n),u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function xP(e){const t={},n=u(e,["content"]);n!=null&&f(t,["content"],n);const i=u(e,["citationMetadata"]);i!=null&&f(t,["citationMetadata"],NP(i));const o=u(e,["tokenCount"]);o!=null&&f(t,["tokenCount"],o);const s=u(e,["finishReason"]);s!=null&&f(t,["finishReason"],s);const r=u(e,["avgLogprobs"]);r!=null&&f(t,["avgLogprobs"],r);const a=u(e,["groundingMetadata"]);a!=null&&f(t,["groundingMetadata"],a);const c=u(e,["index"]);c!=null&&f(t,["index"],c);const l=u(e,["logprobsResult"]);l!=null&&f(t,["logprobsResult"],l);const d=u(e,["safetyRatings"]);if(d!=null){let p=d;Array.isArray(p)&&(p=p.map(m=>m)),f(t,["safetyRatings"],p)}const h=u(e,["urlContextMetadata"]);return h!=null&&f(t,["urlContextMetadata"],h),t}function NP(e){const t={},n=u(e,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),f(t,["citations"],i)}return t}function LP(e,t){const n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],oe(e,i));const o=u(t,["contents"]);if(o!=null){let s=Je(o);Array.isArray(s)&&(s=s.map(r=>r)),f(n,["contents"],s)}return n}function OP(e){const t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const i=u(e,["tokensInfo"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),f(t,["tokensInfo"],o)}return t}function FP(e){const t={},n=u(e,["values"]);n!=null&&f(t,["values"],n);const i=u(e,["statistics"]);return i!=null&&f(t,["statistics"],kP(i)),t}function kP(e){const t={},n=u(e,["truncated"]);n!=null&&f(t,["truncated"],n);const i=u(e,["token_count"]);return i!=null&&f(t,["tokenCount"],i),t}function No(e){const t={},n=u(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>YD(s))),f(t,["parts"],o)}const i=u(e,["role"]);return i!=null&&f(t,["role"],i),t}function VP(e){const t={},n=u(e,["controlType"]);n!=null&&f(t,["controlType"],n);const i=u(e,["enableControlImageComputation"]);return i!=null&&f(t,["computeControl"],i),t}function UP(e){const t={};if(u(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(u(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(u(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function GP(e,t){const n={},i=u(e,["systemInstruction"]);t!==void 0&&i!=null&&f(t,["systemInstruction"],Ae(i));const o=u(e,["tools"]);if(t!==void 0&&o!=null){let r=o;Array.isArray(r)&&(r=r.map(a=>jp(a))),f(t,["tools"],r)}const s=u(e,["generationConfig"]);return t!==void 0&&s!=null&&f(t,["generationConfig"],bD(s)),n}function BP(e,t){const n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],oe(e,i));const o=u(t,["contents"]);if(o!=null){let r=Je(o);Array.isArray(r)&&(r=r.map(a=>No(a))),f(n,["contents"],r)}const s=u(t,["config"]);return s!=null&&UP(s),n}function HP(e,t){const n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],oe(e,i));const o=u(t,["contents"]);if(o!=null){let r=Je(o);Array.isArray(r)&&(r=r.map(a=>a)),f(n,["contents"],r)}const s=u(t,["config"]);return s!=null&&GP(s,n),n}function qP(e){const t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const i=u(e,["totalTokens"]);i!=null&&f(t,["totalTokens"],i);const o=u(e,["cachedContentTokenCount"]);return o!=null&&f(t,["cachedContentTokenCount"],o),t}function WP(e){const t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const i=u(e,["totalTokens"]);return i!=null&&f(t,["totalTokens"],i),t}function $P(e,t){const n={},i=u(t,["model"]);return i!=null&&f(n,["_url","name"],oe(e,i)),n}function YP(e,t){const n={},i=u(t,["model"]);return i!=null&&f(n,["_url","name"],oe(e,i)),n}function zP(e){const t={},n=u(e,["sdkHttpResponse"]);return n!=null&&f(t,["sdkHttpResponse"],n),t}function JP(e){const t={},n=u(e,["sdkHttpResponse"]);return n!=null&&f(t,["sdkHttpResponse"],n),t}function KP(e,t){const n={},i=u(e,["outputGcsUri"]);t!==void 0&&i!=null&&f(t,["parameters","storageUri"],i);const o=u(e,["negativePrompt"]);t!==void 0&&o!=null&&f(t,["parameters","negativePrompt"],o);const s=u(e,["numberOfImages"]);t!==void 0&&s!=null&&f(t,["parameters","sampleCount"],s);const r=u(e,["aspectRatio"]);t!==void 0&&r!=null&&f(t,["parameters","aspectRatio"],r);const a=u(e,["guidanceScale"]);t!==void 0&&a!=null&&f(t,["parameters","guidanceScale"],a);const c=u(e,["seed"]);t!==void 0&&c!=null&&f(t,["parameters","seed"],c);const l=u(e,["safetyFilterLevel"]);t!==void 0&&l!=null&&f(t,["parameters","safetySetting"],l);const d=u(e,["personGeneration"]);t!==void 0&&d!=null&&f(t,["parameters","personGeneration"],d);const h=u(e,["includeSafetyAttributes"]);t!==void 0&&h!=null&&f(t,["parameters","includeSafetyAttributes"],h);const p=u(e,["includeRaiReason"]);t!==void 0&&p!=null&&f(t,["parameters","includeRaiReason"],p);const m=u(e,["language"]);t!==void 0&&m!=null&&f(t,["parameters","language"],m);const g=u(e,["outputMimeType"]);t!==void 0&&g!=null&&f(t,["parameters","outputOptions","mimeType"],g);const y=u(e,["outputCompressionQuality"]);t!==void 0&&y!=null&&f(t,["parameters","outputOptions","compressionQuality"],y);const E=u(e,["addWatermark"]);t!==void 0&&E!=null&&f(t,["parameters","addWatermark"],E);const v=u(e,["labels"]);t!==void 0&&v!=null&&f(t,["labels"],v);const T=u(e,["editMode"]);t!==void 0&&T!=null&&f(t,["parameters","editMode"],T);const I=u(e,["baseSteps"]);return t!==void 0&&I!=null&&f(t,["parameters","editConfig","baseSteps"],I),n}function XP(e,t){const n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],oe(e,i));const o=u(t,["prompt"]);o!=null&&f(n,["instances[0]","prompt"],o);const s=u(t,["referenceImages"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>QD(c))),f(n,["instances[0]","referenceImages"],a)}const r=u(t,["config"]);return r!=null&&KP(r,n),n}function ZP(e){const t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const i=u(e,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Lo(s))),f(t,["generatedImages"],o)}return t}function QP(e,t){const n={},i=u(e,["taskType"]);t!==void 0&&i!=null&&f(t,["requests[]","taskType"],i);const o=u(e,["title"]);t!==void 0&&o!=null&&f(t,["requests[]","title"],o);const s=u(e,["outputDimensionality"]);if(t!==void 0&&s!=null&&f(t,["requests[]","outputDimensionality"],s),u(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function jP(e,t){const n={},i=u(e,["taskType"]);t!==void 0&&i!=null&&f(t,["instances[]","task_type"],i);const o=u(e,["title"]);t!==void 0&&o!=null&&f(t,["instances[]","title"],o);const s=u(e,["outputDimensionality"]);t!==void 0&&s!=null&&f(t,["parameters","outputDimensionality"],s);const r=u(e,["mimeType"]);t!==void 0&&r!=null&&f(t,["instances[]","mimeType"],r);const a=u(e,["autoTruncate"]);return t!==void 0&&a!=null&&f(t,["parameters","autoTruncate"],a),n}function eD(e,t){const n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],oe(e,i));const o=u(t,["contents"]);if(o!=null){let a=ha(e,o);Array.isArray(a)&&(a=a.map(c=>c)),f(n,["requests[]","content"],a)}const s=u(t,["config"]);s!=null&&QP(s,n);const r=u(t,["model"]);return r!==void 0&&f(n,["requests[]","model"],oe(e,r)),n}function tD(e,t){const n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],oe(e,i));const o=u(t,["contents"]);if(o!=null){let r=ha(e,o);Array.isArray(r)&&(r=r.map(a=>a)),f(n,["instances[]","content"],r)}const s=u(t,["config"]);return s!=null&&jP(s,n),n}function nD(e){const t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const i=u(e,["embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>r)),f(t,["embeddings"],s)}const o=u(e,["metadata"]);return o!=null&&f(t,["metadata"],o),t}function iD(e){const t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const i=u(e,["predictions[]","embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>FP(r))),f(t,["embeddings"],s)}const o=u(e,["metadata"]);return o!=null&&f(t,["metadata"],o),t}function oD(e){const t={},n=u(e,["endpoint"]);n!=null&&f(t,["name"],n);const i=u(e,["deployedModelId"]);return i!=null&&f(t,["deployedModelId"],i),t}function sD(e){const t={};if(u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(e,["fileUri"]);n!=null&&f(t,["fileUri"],n);const i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function rD(e){const t={},n=u(e,["id"]);n!=null&&f(t,["id"],n);const i=u(e,["args"]);i!=null&&f(t,["args"],i);const o=u(e,["name"]);if(o!=null&&f(t,["name"],o),u(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function aD(e){const t={},n=u(e,["mode"]);n!=null&&f(t,["mode"],n);const i=u(e,["allowedFunctionNames"]);if(i!=null&&f(t,["allowedFunctionNames"],i),u(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function lD(e){const t={};if(u(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=u(e,["description"]);n!=null&&f(t,["description"],n);const i=u(e,["name"]);i!=null&&f(t,["name"],i);const o=u(e,["parameters"]);o!=null&&f(t,["parameters"],o);const s=u(e,["parametersJsonSchema"]);s!=null&&f(t,["parametersJsonSchema"],s);const r=u(e,["response"]);r!=null&&f(t,["response"],r);const a=u(e,["responseJsonSchema"]);return a!=null&&f(t,["responseJsonSchema"],a),t}function cD(e,t,n){const i={},o=u(t,["systemInstruction"]);n!==void 0&&o!=null&&f(n,["systemInstruction"],No(Ae(o)));const s=u(t,["temperature"]);s!=null&&f(i,["temperature"],s);const r=u(t,["topP"]);r!=null&&f(i,["topP"],r);const a=u(t,["topK"]);a!=null&&f(i,["topK"],a);const c=u(t,["candidateCount"]);c!=null&&f(i,["candidateCount"],c);const l=u(t,["maxOutputTokens"]);l!=null&&f(i,["maxOutputTokens"],l);const d=u(t,["stopSequences"]);d!=null&&f(i,["stopSequences"],d);const h=u(t,["responseLogprobs"]);h!=null&&f(i,["responseLogprobs"],h);const p=u(t,["logprobs"]);p!=null&&f(i,["logprobs"],p);const m=u(t,["presencePenalty"]);m!=null&&f(i,["presencePenalty"],m);const g=u(t,["frequencyPenalty"]);g!=null&&f(i,["frequencyPenalty"],g);const y=u(t,["seed"]);y!=null&&f(i,["seed"],y);const E=u(t,["responseMimeType"]);E!=null&&f(i,["responseMimeType"],E);const v=u(t,["responseSchema"]);v!=null&&f(i,["responseSchema"],pa(v));const T=u(t,["responseJsonSchema"]);if(T!=null&&f(i,["responseJsonSchema"],T),u(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const I=u(t,["safetySettings"]);if(n!==void 0&&I!=null){let F=I;Array.isArray(F)&&(F=F.map(x=>jD(x))),f(n,["safetySettings"],F)}const S=u(t,["tools"]);if(n!==void 0&&S!=null){let F=xn(S);Array.isArray(F)&&(F=F.map(x=>rb(bn(x)))),f(n,["tools"],F)}const A=u(t,["toolConfig"]);if(n!==void 0&&A!=null&&f(n,["toolConfig"],sb(A)),u(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const P=u(t,["cachedContent"]);n!==void 0&&P!=null&&f(n,["cachedContent"],Tt(e,P));const D=u(t,["responseModalities"]);D!=null&&f(i,["responseModalities"],D);const R=u(t,["mediaResolution"]);R!=null&&f(i,["mediaResolution"],R);const C=u(t,["speechConfig"]);if(C!=null&&f(i,["speechConfig"],ma(C)),u(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const _=u(t,["thinkingConfig"]);_!=null&&f(i,["thinkingConfig"],_);const b=u(t,["imageConfig"]);b!=null&&f(i,["imageConfig"],FD(b));const N=u(t,["enableEnhancedCivicAnswers"]);return N!=null&&f(i,["enableEnhancedCivicAnswers"],N),i}function uD(e,t,n){const i={},o=u(t,["systemInstruction"]);n!==void 0&&o!=null&&f(n,["systemInstruction"],Ae(o));const s=u(t,["temperature"]);s!=null&&f(i,["temperature"],s);const r=u(t,["topP"]);r!=null&&f(i,["topP"],r);const a=u(t,["topK"]);a!=null&&f(i,["topK"],a);const c=u(t,["candidateCount"]);c!=null&&f(i,["candidateCount"],c);const l=u(t,["maxOutputTokens"]);l!=null&&f(i,["maxOutputTokens"],l);const d=u(t,["stopSequences"]);d!=null&&f(i,["stopSequences"],d);const h=u(t,["responseLogprobs"]);h!=null&&f(i,["responseLogprobs"],h);const p=u(t,["logprobs"]);p!=null&&f(i,["logprobs"],p);const m=u(t,["presencePenalty"]);m!=null&&f(i,["presencePenalty"],m);const g=u(t,["frequencyPenalty"]);g!=null&&f(i,["frequencyPenalty"],g);const y=u(t,["seed"]);y!=null&&f(i,["seed"],y);const E=u(t,["responseMimeType"]);E!=null&&f(i,["responseMimeType"],E);const v=u(t,["responseSchema"]);v!=null&&f(i,["responseSchema"],pa(v));const T=u(t,["responseJsonSchema"]);T!=null&&f(i,["responseJsonSchema"],T);const I=u(t,["routingConfig"]);I!=null&&f(i,["routingConfig"],I);const S=u(t,["modelSelectionConfig"]);S!=null&&f(i,["modelConfig"],S);const A=u(t,["safetySettings"]);if(n!==void 0&&A!=null){let w=A;Array.isArray(w)&&(w=w.map(M=>M)),f(n,["safetySettings"],w)}const P=u(t,["tools"]);if(n!==void 0&&P!=null){let w=xn(P);Array.isArray(w)&&(w=w.map(M=>jp(bn(M)))),f(n,["tools"],w)}const D=u(t,["toolConfig"]);n!==void 0&&D!=null&&f(n,["toolConfig"],D);const R=u(t,["labels"]);n!==void 0&&R!=null&&f(n,["labels"],R);const C=u(t,["cachedContent"]);n!==void 0&&C!=null&&f(n,["cachedContent"],Tt(e,C));const _=u(t,["responseModalities"]);_!=null&&f(i,["responseModalities"],_);const b=u(t,["mediaResolution"]);b!=null&&f(i,["mediaResolution"],b);const N=u(t,["speechConfig"]);N!=null&&f(i,["speechConfig"],Qp(ma(N)));const F=u(t,["audioTimestamp"]);F!=null&&f(i,["audioTimestamp"],F);const x=u(t,["thinkingConfig"]);x!=null&&f(i,["thinkingConfig"],x);const k=u(t,["imageConfig"]);if(k!=null&&f(i,["imageConfig"],kD(k)),u(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return i}function gd(e,t){const n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],oe(e,i));const o=u(t,["contents"]);if(o!=null){let r=Je(o);Array.isArray(r)&&(r=r.map(a=>No(a))),f(n,["contents"],r)}const s=u(t,["config"]);return s!=null&&f(n,["generationConfig"],cD(e,s,n)),n}function yd(e,t){const n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],oe(e,i));const o=u(t,["contents"]);if(o!=null){let r=Je(o);Array.isArray(r)&&(r=r.map(a=>a)),f(n,["contents"],r)}const s=u(t,["config"]);return s!=null&&f(n,["generationConfig"],uD(e,s,n)),n}function Ed(e){const t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const i=u(e,["candidates"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(l=>xP(l))),f(t,["candidates"],c)}const o=u(e,["modelVersion"]);o!=null&&f(t,["modelVersion"],o);const s=u(e,["promptFeedback"]);s!=null&&f(t,["promptFeedback"],s);const r=u(e,["responseId"]);r!=null&&f(t,["responseId"],r);const a=u(e,["usageMetadata"]);return a!=null&&f(t,["usageMetadata"],a),t}function Td(e){const t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const i=u(e,["candidates"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(d=>d)),f(t,["candidates"],l)}const o=u(e,["createTime"]);o!=null&&f(t,["createTime"],o);const s=u(e,["modelVersion"]);s!=null&&f(t,["modelVersion"],s);const r=u(e,["promptFeedback"]);r!=null&&f(t,["promptFeedback"],r);const a=u(e,["responseId"]);a!=null&&f(t,["responseId"],a);const c=u(e,["usageMetadata"]);return c!=null&&f(t,["usageMetadata"],c),t}function dD(e,t){const n={};if(u(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=u(e,["numberOfImages"]);t!==void 0&&i!=null&&f(t,["parameters","sampleCount"],i);const o=u(e,["aspectRatio"]);t!==void 0&&o!=null&&f(t,["parameters","aspectRatio"],o);const s=u(e,["guidanceScale"]);if(t!==void 0&&s!=null&&f(t,["parameters","guidanceScale"],s),u(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const r=u(e,["safetyFilterLevel"]);t!==void 0&&r!=null&&f(t,["parameters","safetySetting"],r);const a=u(e,["personGeneration"]);t!==void 0&&a!=null&&f(t,["parameters","personGeneration"],a);const c=u(e,["includeSafetyAttributes"]);t!==void 0&&c!=null&&f(t,["parameters","includeSafetyAttributes"],c);const l=u(e,["includeRaiReason"]);t!==void 0&&l!=null&&f(t,["parameters","includeRaiReason"],l);const d=u(e,["language"]);t!==void 0&&d!=null&&f(t,["parameters","language"],d);const h=u(e,["outputMimeType"]);t!==void 0&&h!=null&&f(t,["parameters","outputOptions","mimeType"],h);const p=u(e,["outputCompressionQuality"]);if(t!==void 0&&p!=null&&f(t,["parameters","outputOptions","compressionQuality"],p),u(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const m=u(e,["imageSize"]);if(t!==void 0&&m!=null&&f(t,["parameters","sampleImageSize"],m),u(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function fD(e,t){const n={},i=u(e,["outputGcsUri"]);t!==void 0&&i!=null&&f(t,["parameters","storageUri"],i);const o=u(e,["negativePrompt"]);t!==void 0&&o!=null&&f(t,["parameters","negativePrompt"],o);const s=u(e,["numberOfImages"]);t!==void 0&&s!=null&&f(t,["parameters","sampleCount"],s);const r=u(e,["aspectRatio"]);t!==void 0&&r!=null&&f(t,["parameters","aspectRatio"],r);const a=u(e,["guidanceScale"]);t!==void 0&&a!=null&&f(t,["parameters","guidanceScale"],a);const c=u(e,["seed"]);t!==void 0&&c!=null&&f(t,["parameters","seed"],c);const l=u(e,["safetyFilterLevel"]);t!==void 0&&l!=null&&f(t,["parameters","safetySetting"],l);const d=u(e,["personGeneration"]);t!==void 0&&d!=null&&f(t,["parameters","personGeneration"],d);const h=u(e,["includeSafetyAttributes"]);t!==void 0&&h!=null&&f(t,["parameters","includeSafetyAttributes"],h);const p=u(e,["includeRaiReason"]);t!==void 0&&p!=null&&f(t,["parameters","includeRaiReason"],p);const m=u(e,["language"]);t!==void 0&&m!=null&&f(t,["parameters","language"],m);const g=u(e,["outputMimeType"]);t!==void 0&&g!=null&&f(t,["parameters","outputOptions","mimeType"],g);const y=u(e,["outputCompressionQuality"]);t!==void 0&&y!=null&&f(t,["parameters","outputOptions","compressionQuality"],y);const E=u(e,["addWatermark"]);t!==void 0&&E!=null&&f(t,["parameters","addWatermark"],E);const v=u(e,["labels"]);t!==void 0&&v!=null&&f(t,["labels"],v);const T=u(e,["imageSize"]);t!==void 0&&T!=null&&f(t,["parameters","sampleImageSize"],T);const I=u(e,["enhancePrompt"]);return t!==void 0&&I!=null&&f(t,["parameters","enhancePrompt"],I),n}function hD(e,t){const n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],oe(e,i));const o=u(t,["prompt"]);o!=null&&f(n,["instances[0]","prompt"],o);const s=u(t,["config"]);return s!=null&&dD(s,n),n}function pD(e,t){const n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],oe(e,i));const o=u(t,["prompt"]);o!=null&&f(n,["instances[0]","prompt"],o);const s=u(t,["config"]);return s!=null&&fD(s,n),n}function mD(e){const t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const i=u(e,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>wD(r))),f(t,["generatedImages"],s)}const o=u(e,["positivePromptSafetyAttributes"]);return o!=null&&f(t,["positivePromptSafetyAttributes"],Xp(o)),t}function gD(e){const t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const i=u(e,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>Lo(r))),f(t,["generatedImages"],s)}const o=u(e,["positivePromptSafetyAttributes"]);return o!=null&&f(t,["positivePromptSafetyAttributes"],Zp(o)),t}function yD(e,t){const n={},i=u(e,["numberOfVideos"]);if(t!==void 0&&i!=null&&f(t,["parameters","sampleCount"],i),u(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=u(e,["durationSeconds"]);if(t!==void 0&&o!=null&&f(t,["parameters","durationSeconds"],o),u(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=u(e,["aspectRatio"]);t!==void 0&&s!=null&&f(t,["parameters","aspectRatio"],s);const r=u(e,["resolution"]);t!==void 0&&r!=null&&f(t,["parameters","resolution"],r);const a=u(e,["personGeneration"]);if(t!==void 0&&a!=null&&f(t,["parameters","personGeneration"],a),u(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=u(e,["negativePrompt"]);t!==void 0&&c!=null&&f(t,["parameters","negativePrompt"],c);const l=u(e,["enhancePrompt"]);if(t!==void 0&&l!=null&&f(t,["parameters","enhancePrompt"],l),u(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const d=u(e,["lastFrame"]);t!==void 0&&d!=null&&f(t,["instances[0]","lastFrame"],Oo(d));const h=u(e,["referenceImages"]);if(t!==void 0&&h!=null){let p=h;Array.isArray(p)&&(p=p.map(m=>Tb(m))),f(t,["instances[0]","referenceImages"],p)}if(u(e,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(u(e,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function ED(e,t){const n={},i=u(e,["numberOfVideos"]);t!==void 0&&i!=null&&f(t,["parameters","sampleCount"],i);const o=u(e,["outputGcsUri"]);t!==void 0&&o!=null&&f(t,["parameters","storageUri"],o);const s=u(e,["fps"]);t!==void 0&&s!=null&&f(t,["parameters","fps"],s);const r=u(e,["durationSeconds"]);t!==void 0&&r!=null&&f(t,["parameters","durationSeconds"],r);const a=u(e,["seed"]);t!==void 0&&a!=null&&f(t,["parameters","seed"],a);const c=u(e,["aspectRatio"]);t!==void 0&&c!=null&&f(t,["parameters","aspectRatio"],c);const l=u(e,["resolution"]);t!==void 0&&l!=null&&f(t,["parameters","resolution"],l);const d=u(e,["personGeneration"]);t!==void 0&&d!=null&&f(t,["parameters","personGeneration"],d);const h=u(e,["pubsubTopic"]);t!==void 0&&h!=null&&f(t,["parameters","pubsubTopic"],h);const p=u(e,["negativePrompt"]);t!==void 0&&p!=null&&f(t,["parameters","negativePrompt"],p);const m=u(e,["enhancePrompt"]);t!==void 0&&m!=null&&f(t,["parameters","enhancePrompt"],m);const g=u(e,["generateAudio"]);t!==void 0&&g!=null&&f(t,["parameters","generateAudio"],g);const y=u(e,["lastFrame"]);t!==void 0&&y!=null&&f(t,["instances[0]","lastFrame"],at(y));const E=u(e,["referenceImages"]);if(t!==void 0&&E!=null){let I=E;Array.isArray(I)&&(I=I.map(S=>Ib(S))),f(t,["instances[0]","referenceImages"],I)}const v=u(e,["mask"]);t!==void 0&&v!=null&&f(t,["instances[0]","mask"],Eb(v));const T=u(e,["compressionQuality"]);return t!==void 0&&T!=null&&f(t,["parameters","compressionQuality"],T),n}function TD(e){const t={},n=u(e,["name"]);n!=null&&f(t,["name"],n);const i=u(e,["metadata"]);i!=null&&f(t,["metadata"],i);const o=u(e,["done"]);o!=null&&f(t,["done"],o);const s=u(e,["error"]);s!=null&&f(t,["error"],s);const r=u(e,["response","generateVideoResponse"]);return r!=null&&f(t,["response"],CD(r)),t}function ID(e){const t={},n=u(e,["name"]);n!=null&&f(t,["name"],n);const i=u(e,["metadata"]);i!=null&&f(t,["metadata"],i);const o=u(e,["done"]);o!=null&&f(t,["done"],o);const s=u(e,["error"]);s!=null&&f(t,["error"],s);const r=u(e,["response"]);return r!=null&&f(t,["response"],SD(r)),t}function vD(e,t){const n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],oe(e,i));const o=u(t,["prompt"]);o!=null&&f(n,["instances[0]","prompt"],o);const s=u(t,["image"]);s!=null&&f(n,["instances[0]","image"],Oo(s));const r=u(t,["video"]);r!=null&&f(n,["instances[0]","video"],em(r));const a=u(t,["source"]);a!=null&&AD(a,n);const c=u(t,["config"]);return c!=null&&yD(c,n),n}function _D(e,t){const n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],oe(e,i));const o=u(t,["prompt"]);o!=null&&f(n,["instances[0]","prompt"],o);const s=u(t,["image"]);s!=null&&f(n,["instances[0]","image"],at(s));const r=u(t,["video"]);r!=null&&f(n,["instances[0]","video"],tm(r));const a=u(t,["source"]);a!=null&&RD(a,n);const c=u(t,["config"]);return c!=null&&ED(c,n),n}function CD(e){const t={},n=u(e,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>PD(r))),f(t,["generatedVideos"],s)}const i=u(e,["raiMediaFilteredCount"]);i!=null&&f(t,["raiMediaFilteredCount"],i);const o=u(e,["raiMediaFilteredReasons"]);return o!=null&&f(t,["raiMediaFilteredReasons"],o),t}function SD(e){const t={},n=u(e,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>DD(r))),f(t,["generatedVideos"],s)}const i=u(e,["raiMediaFilteredCount"]);i!=null&&f(t,["raiMediaFilteredCount"],i);const o=u(e,["raiMediaFilteredReasons"]);return o!=null&&f(t,["raiMediaFilteredReasons"],o),t}function AD(e,t){const n={},i=u(e,["prompt"]);t!==void 0&&i!=null&&f(t,["instances[0]","prompt"],i);const o=u(e,["image"]);t!==void 0&&o!=null&&f(t,["instances[0]","image"],Oo(o));const s=u(e,["video"]);return t!==void 0&&s!=null&&f(t,["instances[0]","video"],em(s)),n}function RD(e,t){const n={},i=u(e,["prompt"]);t!==void 0&&i!=null&&f(t,["instances[0]","prompt"],i);const o=u(e,["image"]);t!==void 0&&o!=null&&f(t,["instances[0]","image"],at(o));const s=u(e,["video"]);return t!==void 0&&s!=null&&f(t,["instances[0]","video"],tm(s)),n}function wD(e){const t={},n=u(e,["_self"]);n!=null&&f(t,["image"],VD(n));const i=u(e,["raiFilteredReason"]);i!=null&&f(t,["raiFilteredReason"],i);const o=u(e,["_self"]);return o!=null&&f(t,["safetyAttributes"],Xp(o)),t}function Lo(e){const t={},n=u(e,["_self"]);n!=null&&f(t,["image"],Kp(n));const i=u(e,["raiFilteredReason"]);i!=null&&f(t,["raiFilteredReason"],i);const o=u(e,["_self"]);o!=null&&f(t,["safetyAttributes"],Zp(o));const s=u(e,["prompt"]);return s!=null&&f(t,["enhancedPrompt"],s),t}function MD(e){const t={},n=u(e,["_self"]);n!=null&&f(t,["mask"],Kp(n));const i=u(e,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),f(t,["labels"],o)}return t}function PD(e){const t={},n=u(e,["video"]);return n!=null&&f(t,["video"],gb(n)),t}function DD(e){const t={},n=u(e,["_self"]);return n!=null&&f(t,["video"],yb(n)),t}function bD(e){const t={},n=u(e,["modelSelectionConfig"]);n!=null&&f(t,["modelConfig"],n);const i=u(e,["responseJsonSchema"]);i!=null&&f(t,["responseJsonSchema"],i);const o=u(e,["audioTimestamp"]);o!=null&&f(t,["audioTimestamp"],o);const s=u(e,["candidateCount"]);s!=null&&f(t,["candidateCount"],s);const r=u(e,["enableAffectiveDialog"]);r!=null&&f(t,["enableAffectiveDialog"],r);const a=u(e,["frequencyPenalty"]);a!=null&&f(t,["frequencyPenalty"],a);const c=u(e,["logprobs"]);c!=null&&f(t,["logprobs"],c);const l=u(e,["maxOutputTokens"]);l!=null&&f(t,["maxOutputTokens"],l);const d=u(e,["mediaResolution"]);d!=null&&f(t,["mediaResolution"],d);const h=u(e,["presencePenalty"]);h!=null&&f(t,["presencePenalty"],h);const p=u(e,["responseLogprobs"]);p!=null&&f(t,["responseLogprobs"],p);const m=u(e,["responseMimeType"]);m!=null&&f(t,["responseMimeType"],m);const g=u(e,["responseModalities"]);g!=null&&f(t,["responseModalities"],g);const y=u(e,["responseSchema"]);y!=null&&f(t,["responseSchema"],y);const E=u(e,["routingConfig"]);E!=null&&f(t,["routingConfig"],E);const v=u(e,["seed"]);v!=null&&f(t,["seed"],v);const T=u(e,["speechConfig"]);T!=null&&f(t,["speechConfig"],Qp(T));const I=u(e,["stopSequences"]);I!=null&&f(t,["stopSequences"],I);const S=u(e,["temperature"]);S!=null&&f(t,["temperature"],S);const A=u(e,["thinkingConfig"]);A!=null&&f(t,["thinkingConfig"],A);const P=u(e,["topK"]);P!=null&&f(t,["topK"],P);const D=u(e,["topP"]);if(D!=null&&f(t,["topP"],D),u(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function xD(e,t){const n={},i=u(t,["model"]);return i!=null&&f(n,["_url","name"],oe(e,i)),n}function ND(e,t){const n={},i=u(t,["model"]);return i!=null&&f(n,["_url","name"],oe(e,i)),n}function LD(e){const t={};if(u(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(e,["enableWidget"]);return n!=null&&f(t,["enableWidget"],n),t}function OD(e){const t={};if(u(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(e,["timeRangeFilter"]);return n!=null&&f(t,["timeRangeFilter"],n),t}function FD(e){const t={},n=u(e,["aspectRatio"]);n!=null&&f(t,["aspectRatio"],n);const i=u(e,["imageSize"]);if(i!=null&&f(t,["imageSize"],i),u(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(u(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function kD(e){const t={},n=u(e,["aspectRatio"]);n!=null&&f(t,["aspectRatio"],n);const i=u(e,["imageSize"]);i!=null&&f(t,["imageSize"],i);const o=u(e,["outputMimeType"]);o!=null&&f(t,["imageOutputOptions","mimeType"],o);const s=u(e,["outputCompressionQuality"]);return s!=null&&f(t,["imageOutputOptions","compressionQuality"],s),t}function VD(e){const t={},n=u(e,["bytesBase64Encoded"]);n!=null&&f(t,["imageBytes"],Pt(n));const i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function Kp(e){const t={},n=u(e,["gcsUri"]);n!=null&&f(t,["gcsUri"],n);const i=u(e,["bytesBase64Encoded"]);i!=null&&f(t,["imageBytes"],Pt(i));const o=u(e,["mimeType"]);return o!=null&&f(t,["mimeType"],o),t}function Oo(e){const t={};if(u(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=u(e,["imageBytes"]);n!=null&&f(t,["bytesBase64Encoded"],Pt(n));const i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function at(e){const t={},n=u(e,["gcsUri"]);n!=null&&f(t,["gcsUri"],n);const i=u(e,["imageBytes"]);i!=null&&f(t,["bytesBase64Encoded"],Pt(i));const o=u(e,["mimeType"]);return o!=null&&f(t,["mimeType"],o),t}function UD(e,t,n){const i={},o=u(t,["pageSize"]);n!==void 0&&o!=null&&f(n,["_query","pageSize"],o);const s=u(t,["pageToken"]);n!==void 0&&s!=null&&f(n,["_query","pageToken"],s);const r=u(t,["filter"]);n!==void 0&&r!=null&&f(n,["_query","filter"],r);const a=u(t,["queryBase"]);return n!==void 0&&a!=null&&f(n,["_url","models_url"],Bp(e,a)),i}function GD(e,t,n){const i={},o=u(t,["pageSize"]);n!==void 0&&o!=null&&f(n,["_query","pageSize"],o);const s=u(t,["pageToken"]);n!==void 0&&s!=null&&f(n,["_query","pageToken"],s);const r=u(t,["filter"]);n!==void 0&&r!=null&&f(n,["_query","filter"],r);const a=u(t,["queryBase"]);return n!==void 0&&a!=null&&f(n,["_url","models_url"],Bp(e,a)),i}function BD(e,t){const n={},i=u(t,["config"]);return i!=null&&UD(e,i,n),n}function HD(e,t){const n={},i=u(t,["config"]);return i!=null&&GD(e,i,n),n}function qD(e){const t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const i=u(e,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);const o=u(e,["_self"]);if(o!=null){let s=Hp(o);Array.isArray(s)&&(s=s.map(r=>nr(r))),f(t,["models"],s)}return t}function WD(e){const t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const i=u(e,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);const o=u(e,["_self"]);if(o!=null){let s=Hp(o);Array.isArray(s)&&(s=s.map(r=>ir(r))),f(t,["models"],s)}return t}function $D(e){const t={},n=u(e,["maskMode"]);n!=null&&f(t,["maskMode"],n);const i=u(e,["segmentationClasses"]);i!=null&&f(t,["maskClasses"],i);const o=u(e,["maskDilation"]);return o!=null&&f(t,["dilation"],o),t}function nr(e){const t={},n=u(e,["name"]);n!=null&&f(t,["name"],n);const i=u(e,["displayName"]);i!=null&&f(t,["displayName"],i);const o=u(e,["description"]);o!=null&&f(t,["description"],o);const s=u(e,["version"]);s!=null&&f(t,["version"],s);const r=u(e,["_self"]);r!=null&&f(t,["tunedModelInfo"],ab(r));const a=u(e,["inputTokenLimit"]);a!=null&&f(t,["inputTokenLimit"],a);const c=u(e,["outputTokenLimit"]);c!=null&&f(t,["outputTokenLimit"],c);const l=u(e,["supportedGenerationMethods"]);l!=null&&f(t,["supportedActions"],l);const d=u(e,["temperature"]);d!=null&&f(t,["temperature"],d);const h=u(e,["maxTemperature"]);h!=null&&f(t,["maxTemperature"],h);const p=u(e,["topP"]);p!=null&&f(t,["topP"],p);const m=u(e,["topK"]);m!=null&&f(t,["topK"],m);const g=u(e,["thinking"]);return g!=null&&f(t,["thinking"],g),t}function ir(e){const t={},n=u(e,["name"]);n!=null&&f(t,["name"],n);const i=u(e,["displayName"]);i!=null&&f(t,["displayName"],i);const o=u(e,["description"]);o!=null&&f(t,["description"],o);const s=u(e,["versionId"]);s!=null&&f(t,["version"],s);const r=u(e,["deployedModels"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(p=>oD(p))),f(t,["endpoints"],h)}const a=u(e,["labels"]);a!=null&&f(t,["labels"],a);const c=u(e,["_self"]);c!=null&&f(t,["tunedModelInfo"],lb(c));const l=u(e,["defaultCheckpointId"]);l!=null&&f(t,["defaultCheckpointId"],l);const d=u(e,["checkpoints"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(p=>p)),f(t,["checkpoints"],h)}return t}function YD(e){const t={},n=u(e,["mediaResolution"]);n!=null&&f(t,["mediaResolution"],n);const i=u(e,["codeExecutionResult"]);i!=null&&f(t,["codeExecutionResult"],i);const o=u(e,["executableCode"]);o!=null&&f(t,["executableCode"],o);const s=u(e,["fileData"]);s!=null&&f(t,["fileData"],sD(s));const r=u(e,["functionCall"]);r!=null&&f(t,["functionCall"],rD(r));const a=u(e,["functionResponse"]);a!=null&&f(t,["functionResponse"],a);const c=u(e,["inlineData"]);c!=null&&f(t,["inlineData"],bP(c));const l=u(e,["text"]);l!=null&&f(t,["text"],l);const d=u(e,["thought"]);d!=null&&f(t,["thought"],d);const h=u(e,["thoughtSignature"]);h!=null&&f(t,["thoughtSignature"],h);const p=u(e,["videoMetadata"]);return p!=null&&f(t,["videoMetadata"],p),t}function zD(e){const t={},n=u(e,["productImage"]);return n!=null&&f(t,["image"],at(n)),t}function JD(e,t){const n={},i=u(e,["numberOfImages"]);t!==void 0&&i!=null&&f(t,["parameters","sampleCount"],i);const o=u(e,["baseSteps"]);t!==void 0&&o!=null&&f(t,["parameters","baseSteps"],o);const s=u(e,["outputGcsUri"]);t!==void 0&&s!=null&&f(t,["parameters","storageUri"],s);const r=u(e,["seed"]);t!==void 0&&r!=null&&f(t,["parameters","seed"],r);const a=u(e,["safetyFilterLevel"]);t!==void 0&&a!=null&&f(t,["parameters","safetySetting"],a);const c=u(e,["personGeneration"]);t!==void 0&&c!=null&&f(t,["parameters","personGeneration"],c);const l=u(e,["addWatermark"]);t!==void 0&&l!=null&&f(t,["parameters","addWatermark"],l);const d=u(e,["outputMimeType"]);t!==void 0&&d!=null&&f(t,["parameters","outputOptions","mimeType"],d);const h=u(e,["outputCompressionQuality"]);t!==void 0&&h!=null&&f(t,["parameters","outputOptions","compressionQuality"],h);const p=u(e,["enhancePrompt"]);t!==void 0&&p!=null&&f(t,["parameters","enhancePrompt"],p);const m=u(e,["labels"]);return t!==void 0&&m!=null&&f(t,["labels"],m),n}function KD(e,t){const n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],oe(e,i));const o=u(t,["source"]);o!=null&&ZD(o,n);const s=u(t,["config"]);return s!=null&&JD(s,n),n}function XD(e){const t={},n=u(e,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Lo(o))),f(t,["generatedImages"],i)}return t}function ZD(e,t){const n={},i=u(e,["prompt"]);t!==void 0&&i!=null&&f(t,["instances[0]","prompt"],i);const o=u(e,["personImage"]);t!==void 0&&o!=null&&f(t,["instances[0]","personImage","image"],at(o));const s=u(e,["productImages"]);if(t!==void 0&&s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>zD(a))),f(t,["instances[0]","productImages"],r)}return n}function QD(e){const t={},n=u(e,["referenceImage"]);n!=null&&f(t,["referenceImage"],at(n));const i=u(e,["referenceId"]);i!=null&&f(t,["referenceId"],i);const o=u(e,["referenceType"]);o!=null&&f(t,["referenceType"],o);const s=u(e,["maskImageConfig"]);s!=null&&f(t,["maskImageConfig"],$D(s));const r=u(e,["controlImageConfig"]);r!=null&&f(t,["controlImageConfig"],VP(r));const a=u(e,["styleImageConfig"]);a!=null&&f(t,["styleImageConfig"],a);const c=u(e,["subjectImageConfig"]);return c!=null&&f(t,["subjectImageConfig"],c),t}function Xp(e){const t={},n=u(e,["safetyAttributes","categories"]);n!=null&&f(t,["categories"],n);const i=u(e,["safetyAttributes","scores"]);i!=null&&f(t,["scores"],i);const o=u(e,["contentType"]);return o!=null&&f(t,["contentType"],o),t}function Zp(e){const t={},n=u(e,["safetyAttributes","categories"]);n!=null&&f(t,["categories"],n);const i=u(e,["safetyAttributes","scores"]);i!=null&&f(t,["scores"],i);const o=u(e,["contentType"]);return o!=null&&f(t,["contentType"],o),t}function jD(e){const t={},n=u(e,["category"]);if(n!=null&&f(t,["category"],n),u(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=u(e,["threshold"]);return i!=null&&f(t,["threshold"],i),t}function eb(e){const t={},n=u(e,["image"]);return n!=null&&f(t,["image"],at(n)),t}function tb(e,t){const n={},i=u(e,["mode"]);t!==void 0&&i!=null&&f(t,["parameters","mode"],i);const o=u(e,["maxPredictions"]);t!==void 0&&o!=null&&f(t,["parameters","maxPredictions"],o);const s=u(e,["confidenceThreshold"]);t!==void 0&&s!=null&&f(t,["parameters","confidenceThreshold"],s);const r=u(e,["maskDilation"]);t!==void 0&&r!=null&&f(t,["parameters","maskDilation"],r);const a=u(e,["binaryColorThreshold"]);t!==void 0&&a!=null&&f(t,["parameters","binaryColorThreshold"],a);const c=u(e,["labels"]);return t!==void 0&&c!=null&&f(t,["labels"],c),n}function nb(e,t){const n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],oe(e,i));const o=u(t,["source"]);o!=null&&ob(o,n);const s=u(t,["config"]);return s!=null&&tb(s,n),n}function ib(e){const t={},n=u(e,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>MD(o))),f(t,["generatedMasks"],i)}return t}function ob(e,t){const n={},i=u(e,["prompt"]);t!==void 0&&i!=null&&f(t,["instances[0]","prompt"],i);const o=u(e,["image"]);t!==void 0&&o!=null&&f(t,["instances[0]","image"],at(o));const s=u(e,["scribbleImage"]);return t!==void 0&&s!=null&&f(t,["instances[0]","scribble"],eb(s)),n}function Qp(e){const t={},n=u(e,["voiceConfig"]);n!=null&&f(t,["voiceConfig"],n);const i=u(e,["languageCode"]);if(i!=null&&f(t,["languageCode"],i),u(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return t}function sb(e){const t={},n=u(e,["functionCallingConfig"]);n!=null&&f(t,["functionCallingConfig"],aD(n));const i=u(e,["retrievalConfig"]);return i!=null&&f(t,["retrievalConfig"],i),t}function rb(e){const t={},n=u(e,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(h=>h)),f(t,["functionDeclarations"],d)}if(u(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(e,["googleSearchRetrieval"]);i!=null&&f(t,["googleSearchRetrieval"],i);const o=u(e,["computerUse"]);o!=null&&f(t,["computerUse"],o);const s=u(e,["fileSearch"]);s!=null&&f(t,["fileSearch"],s);const r=u(e,["codeExecution"]);if(r!=null&&f(t,["codeExecution"],r),u(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=u(e,["googleMaps"]);a!=null&&f(t,["googleMaps"],LD(a));const c=u(e,["googleSearch"]);c!=null&&f(t,["googleSearch"],OD(c));const l=u(e,["urlContext"]);return l!=null&&f(t,["urlContext"],l),t}function jp(e){const t={},n=u(e,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>lD(p))),f(t,["functionDeclarations"],h)}const i=u(e,["retrieval"]);i!=null&&f(t,["retrieval"],i);const o=u(e,["googleSearchRetrieval"]);o!=null&&f(t,["googleSearchRetrieval"],o);const s=u(e,["computerUse"]);if(s!=null&&f(t,["computerUse"],s),u(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=u(e,["codeExecution"]);r!=null&&f(t,["codeExecution"],r);const a=u(e,["enterpriseWebSearch"]);a!=null&&f(t,["enterpriseWebSearch"],a);const c=u(e,["googleMaps"]);c!=null&&f(t,["googleMaps"],c);const l=u(e,["googleSearch"]);l!=null&&f(t,["googleSearch"],l);const d=u(e,["urlContext"]);return d!=null&&f(t,["urlContext"],d),t}function ab(e){const t={},n=u(e,["baseModel"]);n!=null&&f(t,["baseModel"],n);const i=u(e,["createTime"]);i!=null&&f(t,["createTime"],i);const o=u(e,["updateTime"]);return o!=null&&f(t,["updateTime"],o),t}function lb(e){const t={},n=u(e,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&f(t,["baseModel"],n);const i=u(e,["createTime"]);i!=null&&f(t,["createTime"],i);const o=u(e,["updateTime"]);return o!=null&&f(t,["updateTime"],o),t}function cb(e,t){const n={},i=u(e,["displayName"]);t!==void 0&&i!=null&&f(t,["displayName"],i);const o=u(e,["description"]);t!==void 0&&o!=null&&f(t,["description"],o);const s=u(e,["defaultCheckpointId"]);return t!==void 0&&s!=null&&f(t,["defaultCheckpointId"],s),n}function ub(e,t){const n={},i=u(e,["displayName"]);t!==void 0&&i!=null&&f(t,["displayName"],i);const o=u(e,["description"]);t!==void 0&&o!=null&&f(t,["description"],o);const s=u(e,["defaultCheckpointId"]);return t!==void 0&&s!=null&&f(t,["defaultCheckpointId"],s),n}function db(e,t){const n={},i=u(t,["model"]);i!=null&&f(n,["_url","name"],oe(e,i));const o=u(t,["config"]);return o!=null&&cb(o,n),n}function fb(e,t){const n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],oe(e,i));const o=u(t,["config"]);return o!=null&&ub(o,n),n}function hb(e,t){const n={},i=u(e,["outputGcsUri"]);t!==void 0&&i!=null&&f(t,["parameters","storageUri"],i);const o=u(e,["safetyFilterLevel"]);t!==void 0&&o!=null&&f(t,["parameters","safetySetting"],o);const s=u(e,["personGeneration"]);t!==void 0&&s!=null&&f(t,["parameters","personGeneration"],s);const r=u(e,["includeRaiReason"]);t!==void 0&&r!=null&&f(t,["parameters","includeRaiReason"],r);const a=u(e,["outputMimeType"]);t!==void 0&&a!=null&&f(t,["parameters","outputOptions","mimeType"],a);const c=u(e,["outputCompressionQuality"]);t!==void 0&&c!=null&&f(t,["parameters","outputOptions","compressionQuality"],c);const l=u(e,["enhanceInputImage"]);t!==void 0&&l!=null&&f(t,["parameters","upscaleConfig","enhanceInputImage"],l);const d=u(e,["imagePreservationFactor"]);t!==void 0&&d!=null&&f(t,["parameters","upscaleConfig","imagePreservationFactor"],d);const h=u(e,["labels"]);t!==void 0&&h!=null&&f(t,["labels"],h);const p=u(e,["numberOfImages"]);t!==void 0&&p!=null&&f(t,["parameters","sampleCount"],p);const m=u(e,["mode"]);return t!==void 0&&m!=null&&f(t,["parameters","mode"],m),n}function pb(e,t){const n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],oe(e,i));const o=u(t,["image"]);o!=null&&f(n,["instances[0]","image"],at(o));const s=u(t,["upscaleFactor"]);s!=null&&f(n,["parameters","upscaleConfig","upscaleFactor"],s);const r=u(t,["config"]);return r!=null&&hb(r,n),n}function mb(e){const t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const i=u(e,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Lo(s))),f(t,["generatedImages"],o)}return t}function gb(e){const t={},n=u(e,["uri"]);n!=null&&f(t,["uri"],n);const i=u(e,["encodedVideo"]);i!=null&&f(t,["videoBytes"],Pt(i));const o=u(e,["encoding"]);return o!=null&&f(t,["mimeType"],o),t}function yb(e){const t={},n=u(e,["gcsUri"]);n!=null&&f(t,["uri"],n);const i=u(e,["bytesBase64Encoded"]);i!=null&&f(t,["videoBytes"],Pt(i));const o=u(e,["mimeType"]);return o!=null&&f(t,["mimeType"],o),t}function Eb(e){const t={},n=u(e,["image"]);n!=null&&f(t,["_self"],at(n));const i=u(e,["maskMode"]);return i!=null&&f(t,["maskMode"],i),t}function Tb(e){const t={},n=u(e,["image"]);n!=null&&f(t,["image"],Oo(n));const i=u(e,["referenceType"]);return i!=null&&f(t,["referenceType"],i),t}function Ib(e){const t={},n=u(e,["image"]);n!=null&&f(t,["image"],at(n));const i=u(e,["referenceType"]);return i!=null&&f(t,["referenceType"],i),t}function em(e){const t={},n=u(e,["uri"]);n!=null&&f(t,["uri"],n);const i=u(e,["videoBytes"]);i!=null&&f(t,["encodedVideo"],Pt(i));const o=u(e,["mimeType"]);return o!=null&&f(t,["encoding"],o),t}function tm(e){const t={},n=u(e,["uri"]);n!=null&&f(t,["gcsUri"],n);const i=u(e,["videoBytes"]);i!=null&&f(t,["bytesBase64Encoded"],Pt(i));const o=u(e,["mimeType"]);return o!=null&&f(t,["mimeType"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vb(e,t){const n={},i=u(e,["displayName"]);return t!==void 0&&i!=null&&f(t,["displayName"],i),n}function _b(e){const t={},n=u(e,["config"]);return n!=null&&vb(n,t),t}function Cb(e,t){const n={},i=u(e,["force"]);return t!==void 0&&i!=null&&f(t,["_query","force"],i),n}function Sb(e){const t={},n=u(e,["name"]);n!=null&&f(t,["_url","name"],n);const i=u(e,["config"]);return i!=null&&Cb(i,t),t}function Ab(e){const t={},n=u(e,["name"]);return n!=null&&f(t,["_url","name"],n),t}function Rb(e,t){const n={},i=u(e,["customMetadata"]);if(t!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>r)),f(t,["customMetadata"],s)}const o=u(e,["chunkingConfig"]);return t!==void 0&&o!=null&&f(t,["chunkingConfig"],o),n}function wb(e){const t={},n=u(e,["name"]);n!=null&&f(t,["name"],n);const i=u(e,["metadata"]);i!=null&&f(t,["metadata"],i);const o=u(e,["done"]);o!=null&&f(t,["done"],o);const s=u(e,["error"]);s!=null&&f(t,["error"],s);const r=u(e,["response"]);return r!=null&&f(t,["response"],Pb(r)),t}function Mb(e){const t={},n=u(e,["fileSearchStoreName"]);n!=null&&f(t,["_url","file_search_store_name"],n);const i=u(e,["fileName"]);i!=null&&f(t,["fileName"],i);const o=u(e,["config"]);return o!=null&&Rb(o,t),t}function Pb(e){const t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const i=u(e,["parent"]);i!=null&&f(t,["parent"],i);const o=u(e,["documentName"]);return o!=null&&f(t,["documentName"],o),t}function Db(e,t){const n={},i=u(e,["pageSize"]);t!==void 0&&i!=null&&f(t,["_query","pageSize"],i);const o=u(e,["pageToken"]);return t!==void 0&&o!=null&&f(t,["_query","pageToken"],o),n}function bb(e){const t={},n=u(e,["config"]);return n!=null&&Db(n,t),t}function xb(e){const t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const i=u(e,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);const o=u(e,["fileSearchStores"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),f(t,["fileSearchStores"],s)}return t}function nm(e,t){const n={},i=u(e,["mimeType"]);t!==void 0&&i!=null&&f(t,["mimeType"],i);const o=u(e,["displayName"]);t!==void 0&&o!=null&&f(t,["displayName"],o);const s=u(e,["customMetadata"]);if(t!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>c)),f(t,["customMetadata"],a)}const r=u(e,["chunkingConfig"]);return t!==void 0&&r!=null&&f(t,["chunkingConfig"],r),n}function Nb(e){const t={},n=u(e,["fileSearchStoreName"]);n!=null&&f(t,["_url","file_search_store_name"],n);const i=u(e,["config"]);return i!=null&&nm(i,t),t}function Lb(e){const t={},n=u(e,["sdkHttpResponse"]);return n!=null&&f(t,["sdkHttpResponse"],n),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ob="Content-Type",Fb="X-Server-Timeout",kb="User-Agent",or="x-goog-api-client",Vb="1.33.0",Ub=`google-genai-sdk/${Vb}`,Gb="v1beta1",Bb="v1beta";class Hb{constructor(t){var n,i;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:Gb,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:Bb,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&i.push(t.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),n=new URL(t);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,n,i){const o=[this.getRequestUrlInternal(n)];return i&&o.push(this.getBaseResourcePath()),t!==""&&o.push(t),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const i=this.shouldPrependVertexProjectPath(t),o=this.constructUrl(t.path,n,i);if(t.queryParams)for(const[r,a]of Object.entries(t.queryParams))o.searchParams.append(r,String(a));let s={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=t.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,o.toString(),t.abortSignal),this.unaryApiCall(o,s,t.httpMethod)}patchHttpOptions(t,n){const i=JSON.parse(JSON.stringify(t));for(const[o,s]of Object.entries(n))typeof s=="object"?i[o]=Object.assign(Object.assign({},i[o]),s):s!==void 0&&(i[o]=s);return i}async requestStream(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const i=this.shouldPrependVertexProjectPath(t),o=this.constructUrl(t.path,n,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let s={};return s.body=t.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,o.toString(),t.abortSignal),this.streamApiCall(o,s,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,n,i,o){if(n&&n.timeout||o){const s=new AbortController,r=s.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const a=setTimeout(()=>s.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}o&&o.addEventListener("abort",()=>{s.abort()}),t.signal=r}return n&&n.extraBody!==null&&qb(t,n.extraBody),t.headers=await this.getHeadersInternal(n,i),t}async unaryApiCall(t,n,i){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await Id(o),new js(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(t,n,i){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await Id(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(t){return ot(this,arguments,function*(){var i;const o=(i=t==null?void 0:t.body)===null||i===void 0?void 0:i.getReader(),s=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let r="";const a="data:",c=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:l,value:d}=yield K(o.read());if(l){if(r.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=s.decode(d,{stream:!0});try{const g=JSON.parse(h);if("error"in g){const y=JSON.parse(JSON.stringify(g.error)),E=y.status,v=y.code,T=`got status: ${E}. ${JSON.stringify(g)}`;if(v>=400&&v<600)throw new xo({message:T,status:v})}}catch(g){if(g.name==="ApiError")throw g}r+=h;let p=-1,m=0;for(;;){p=-1,m=0;for(const E of c){const v=r.indexOf(E);v!==-1&&(p===-1||v<p)&&(p=v,m=E.length)}if(p===-1)break;const g=r.substring(0,p);r=r.substring(p+m);const y=g.trim();if(y.startsWith(a)){const E=y.substring(a.length).trim();try{const v=new Response(E,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield K(new js(v))}catch(v){throw new Error(`exception parsing stream chunk ${E}. ${v}`)}}}}}finally{o.releaseLock()}})}async apiCall(t,n){return fetch(t,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const t={},n=Ub+" "+this.clientOptions.userAgentExtra;return t[kb]=n,t[or]=n,t[Ob]="application/json",t}async getHeadersInternal(t,n){const i=new Headers;if(t&&t.headers){for(const[o,s]of Object.entries(t.headers))i.append(o,s);t.timeout&&t.timeout>0&&i.append(Fb,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(t){var n;let i="";return typeof t=="string"&&(i=t.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(t,n){var i;const o={};n!=null&&(o.mimeType=n.mimeType,o.name=n.name,o.displayName=n.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const s=this.clientOptions.uploader,r=await s.stat(t);o.sizeBytes=String(r.size);const a=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:r.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=a;const c={file:o},l=this.getFileName(t),d=H("upload/v1beta/files",c._url),h=await this.fetchUploadUrl(d,o.sizeBytes,o.mimeType,l,c,n==null?void 0:n.httpOptions);return s.upload(t,h,this)}async uploadFileToFileSearchStore(t,n,i){var o;const s=this.clientOptions.uploader,r=await s.stat(n),a=String(r.size),c=(o=i==null?void 0:i.mimeType)!==null&&o!==void 0?o:r.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const l=`upload/v1beta/${t}:uploadToFileSearchStore`,d=this.getFileName(n),h={};i!=null&&nm(i,h);const p=await this.fetchUploadUrl(l,a,c,d,h,i==null?void 0:i.httpOptions);return s.uploadToFileSearchStore(n,p,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,n,i,o,s,r){var a;let c={};r?c=r:c={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},o?{"X-Goog-Upload-File-Name":o}:{})};const l=await this.request({path:t,body:JSON.stringify(s),httpMethod:"POST",httpOptions:c});if(!l||!(l!=null&&l.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const d=(a=l==null?void 0:l.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(d===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return d}}async function Id(e){var t;if(e===void 0)throw new Error("response is undefined");if(!e.ok){const n=e.status;let i;!((t=e.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?i=await e.json():i={error:{message:await e.text(),code:e.status,status:e.statusText}};const o=JSON.stringify(i);throw n>=400&&n<600?new xo({message:o,status:n}):new Error(o)}}function qb(e,t){if(!t||Object.keys(t).length===0)return;if(e.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof e.body=="string"&&e.body.length>0)try{const s=JSON.parse(e.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))n=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(s,r){const a=Object.assign({},s);for(const c in r)if(Object.prototype.hasOwnProperty.call(r,c)){const l=r[c],d=a[c];l&&typeof l=="object"&&!Array.isArray(l)&&d&&typeof d=="object"&&!Array.isArray(d)?a[c]=i(d,l):(d&&l&&typeof d!=typeof l&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof d}, New type: ${typeof l}. Overwriting.`),a[c]=l)}return a}const o=i(n,t);e.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Wb="mcp_used/unknown";let $b=!1;function im(e){for(const t of e)if(Yb(t)||typeof t=="object"&&"inputSchema"in t)return!0;return $b}function om(e){var t;const n=(t=e[or])!==null&&t!==void 0?t:"";e[or]=(n+` ${Wb}`).trimStart()}function Yb(e){return e!==null&&typeof e=="object"&&e instanceof ya}function zb(e){return ot(this,arguments,function*(n,i=100){let o,s=0;for(;s<i;){const r=yield K(n.listTools({cursor:o}));for(const a of r.tools)yield yield K(a),s++;if(!r.nextCursor)break;o=r.nextCursor}})}class ya{constructor(t=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=n}static create(t,n){return new ya(t,n)}async initialize(){var t,n,i,o;if(this.mcpTools.length>0)return;const s={},r=[];for(const d of this.mcpClients)try{for(var a=!0,c=(n=void 0,st(zb(d))),l;l=await c.next(),t=l.done,!t;a=!0){o=l.value,a=!1;const h=o;r.push(h);const p=h.name;if(s[p])throw new Error(`Duplicate function name ${p} found in MCP tools. Please ensure function names are unique.`);s[p]=d}}catch(h){n={error:h}}finally{try{!a&&!t&&(i=c.return)&&await i.call(c)}finally{if(n)throw n.error}}this.mcpTools=r,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),Aw(this.mcpTools,this.config)}async callTool(t){await this.initialize();const n=[];for(const i of t)if(i.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[i.name];let s;this.config.timeout&&(s={timeout:this.config.timeout});const r=await o.callTool({name:i.name,arguments:i.args},void 0,s);n.push({functionResponse:{name:i.name,response:r.isError?{error:r}:r}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Jb(e,t,n){const i=new yw;let o;n.data instanceof Blob?o=JSON.parse(await n.data.text()):o=JSON.parse(n.data),Object.assign(i,o),t(i)}class Kb{constructor(t,n,i){this.apiClient=t,this.auth=n,this.webSocketFactory=i}async connect(t){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),r=Qb(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),c=`${o}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${a}`;let l=()=>{};const d=new Promise(I=>{l=I}),h=t.callbacks,p=function(){l({})},m=this.apiClient,g={onopen:p,onmessage:I=>{Jb(m,h.onmessage,I)},onerror:(n=h==null?void 0:h.onerror)!==null&&n!==void 0?n:function(I){},onclose:(i=h==null?void 0:h.onclose)!==null&&i!==void 0?i:function(I){}},y=this.webSocketFactory.create(c,Zb(r),g);y.connect(),await d;const T={setup:{model:oe(this.apiClient,t.model)}};return y.send(JSON.stringify(T)),new Xb(y,this.apiClient)}}class Xb{constructor(t,n){this.conn=t,this.apiClient=n}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=_P(t);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const n=vP(t);this.conn.send(JSON.stringify(n))}sendPlaybackControl(t){const n={playbackControl:t};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(cn.PLAY)}pause(){this.sendPlaybackControl(cn.PAUSE)}stop(){this.sendPlaybackControl(cn.STOP)}resetContext(){this.sendPlaybackControl(cn.RESET_CONTEXT)}close(){this.conn.close()}}function Zb(e){const t={};return e.forEach((n,i)=>{t[i]=n}),t}function Qb(e){const t=new Headers;for(const[n,i]of Object.entries(e))t.append(n,i);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jb="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function ex(e,t,n){const i=new gw;let o;n.data instanceof Blob?o=await n.data.text():n.data instanceof ArrayBuffer?o=new TextDecoder().decode(n.data):o=n.data;const s=JSON.parse(o);if(e.isVertexAI()){const r=AP(s);Object.assign(i,r)}else Object.assign(i,s);t(i)}class tx{constructor(t,n,i){this.apiClient=t,this.auth=n,this.webSocketFactory=i,this.music=new Kb(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var n,i,o,s,r,a;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion();let d;const h=this.apiClient.getHeaders();t.config&&t.config.tools&&im(t.config.tools)&&om(h);const p=sx(h);if(this.apiClient.isVertexAI())d=`${c}/ws/google.cloud.aiplatform.${l}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(p,d);else{const C=this.apiClient.getApiKey();let _="BidiGenerateContent",b="key";C!=null&&C.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),l!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),_="BidiGenerateContentConstrained",b="access_token"),d=`${c}/ws/google.ai.generativelanguage.${l}.GenerativeService.${_}?${b}=${C}`}let m=()=>{};const g=new Promise(C=>{m=C}),y=t.callbacks,E=function(){var C;(C=y==null?void 0:y.onopen)===null||C===void 0||C.call(y),m({})},v=this.apiClient,T={onopen:E,onmessage:C=>{ex(v,y.onmessage,C)},onerror:(n=y==null?void 0:y.onerror)!==null&&n!==void 0?n:function(C){},onclose:(i=y==null?void 0:y.onclose)!==null&&i!==void 0?i:function(C){}},I=this.webSocketFactory.create(d,ox(p),T);I.connect(),await g;let S=oe(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&S.startsWith("publishers/")){const C=this.apiClient.getProject(),_=this.apiClient.getLocation();S=`projects/${C}/locations/${_}/`+S}let A={};this.apiClient.isVertexAI()&&((o=t.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[ro.AUDIO]}:t.config.responseModalities=[ro.AUDIO]),!((s=t.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const P=(a=(r=t.config)===null||r===void 0?void 0:r.tools)!==null&&a!==void 0?a:[],D=[];for(const C of P)if(this.isCallableTool(C)){const _=C;D.push(await _.tool())}else D.push(C);D.length>0&&(t.config.tools=D);const R={model:S,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?A=IP(this.apiClient,R):A=TP(this.apiClient,R),delete A.config,I.send(JSON.stringify(A)),new ix(I,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const nx={turnComplete:!0};class ix{constructor(t,n){this.conn=t,this.apiClient=n}tLiveClientContent(t,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=Je(n.turns),t.isVertexAI()||(i=i.map(o=>No(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(t,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const s of i){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!t.isVertexAI()&&!("id"in s))throw new Error(jb)}return{toolResponse:{functionResponses:i}}}sendClientContent(t){t=Object.assign(Object.assign({},nx),t);const n=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendRealtimeInput(t){let n={};this.apiClient.isVertexAI()?n={realtimeInput:SP(t)}:n={realtimeInput:CP(t)},this.conn.send(JSON.stringify(n))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function ox(e){const t={};return e.forEach((n,i)=>{t[i]=n}),t}function sx(e){const t=new Headers;for(const[n,i]of Object.entries(e))t.append(n,i);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vd=10;function _d(e){var t,n,i;if(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let o=!1;for(const r of(n=e==null?void 0:e.tools)!==null&&n!==void 0?n:[])if(yn(r)){o=!0;break}if(!o)return!0;const s=(i=e==null?void 0:e.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function yn(e){return"callTool"in e&&typeof e.callTool=="function"}function rx(e){var t,n,i;return(i=(n=(t=e.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(o=>yn(o)))!==null&&i!==void 0?i:!1}function Cd(e){var t;const n=[];return!((t=e==null?void 0:e.config)===null||t===void 0)&&t.tools&&e.config.tools.forEach((i,o)=>{if(yn(i))return;const s=i;s.functionDeclarations&&s.functionDeclarations.length>0&&n.push(o)}),n}function Sd(e){var t;return!(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ax extends Et{constructor(t){super(),this.apiClient=t,this.generateContent=async n=>{var i,o,s,r,a;const c=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!rx(n)||_d(n.config))return await this.generateContentInternal(c);const l=Cd(n);if(l.length>0){const y=l.map(E=>`tools[${E}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${y}.`)}let d,h;const p=Je(c.contents),m=(s=(o=(i=c.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&s!==void 0?s:vd;let g=0;for(;g<m&&(d=await this.generateContentInternal(c),!(!d.functionCalls||d.functionCalls.length===0));){const y=d.candidates[0].content,E=[];for(const v of(a=(r=n.config)===null||r===void 0?void 0:r.tools)!==null&&a!==void 0?a:[])if(yn(v)){const I=await v.callTool(d.functionCalls);E.push(...I)}g++,h={role:"user",parts:E},c.contents=Je(c.contents),c.contents.push(y),c.contents.push(h),Sd(c.config)&&(p.push(y),p.push(h))}return Sd(c.config)&&(d.automaticFunctionCallingHistory=p),d},this.generateContentStream=async n=>{var i,o,s,r,a;if(this.maybeMoveToResponseJsonSchem(n),_d(n.config)){const h=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(h)}const c=Cd(n);if(c.length>0){const h=c.map(p=>`tools[${p}]`).join(", ");throw new Error(`Incompatible tools found at ${h}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const l=(s=(o=(i=n==null?void 0:n.config)===null||i===void 0?void 0:i.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||s===void 0?void 0:s.streamFunctionCallArguments,d=(a=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(l&&!d)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var o;let s;const r=[];if(i!=null&&i.generatedImages)for(const c of i.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((o=c==null?void 0:c.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?s=c==null?void 0:c.safetyAttributes:r.push(c);let a;return s?a={generatedImages:r,positivePromptSafetyAttributes:s,sdkHttpResponse:i.sdkHttpResponse}:a={generatedImages:r,sdkHttpResponse:i.sdkHttpResponse},a}),this.list=async n=>{var i;const r={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!r.config.queryBase){if(!((i=r.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");r.config.filter="labels.tune-type:*"}return new Jt(yt.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(r),r)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const o={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async n=>{var i,o,s,r,a,c;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((o=n.video)===null||o===void 0)&&o.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((r=(s=n.source)===null||s===void 0?void 0:s.video)===null||r===void 0)&&r.uri&&(!((c=(a=n.source)===null||a===void 0?void 0:a.video)===null||c===void 0)&&c.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var n,i,o;const s=(n=t.config)===null||n===void 0?void 0:n.tools;if(!s)return t;const r=await Promise.all(s.map(async c=>yn(c)?await c.tool():c)),a={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:r})};if(a.config.tools=r,t.config&&t.config.tools&&im(t.config.tools)){const c=(o=(i=t.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{};let l=Object.assign({},c);Object.keys(l).length===0&&(l=this.apiClient.getDefaultHeaders()),om(l),a.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:l})}return a}async initAfcToolsMap(t){var n,i,o;const s=new Map;for(const r of(i=(n=t.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(yn(r)){const a=r,c=await a.tool();for(const l of(o=c.functionDeclarations)!==null&&o!==void 0?o:[]){if(!l.name)throw new Error("Function declaration name is required.");if(s.has(l.name))throw new Error(`Duplicate tool declaration name: ${l.name}`);s.set(l.name,a)}}return s}async processAfcStream(t){var n,i,o;const s=(o=(i=(n=t.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:vd;let r=!1,a=0;const c=await this.initAfcToolsMap(t);return(function(l,d,h){return ot(this,arguments,function*(){for(var p,m,g,y,E,v;a<s;){r&&(a++,r=!1);const A=yield K(l.processParamsMaybeAddMcpUsage(h)),P=yield K(l.generateContentStreamInternal(A)),D=[],R=[];try{for(var T=!0,I=(m=void 0,st(P)),S;S=yield K(I.next()),p=S.done,!p;T=!0){y=S.value,T=!1;const C=y;if(yield yield K(C),C.candidates&&(!((E=C.candidates[0])===null||E===void 0)&&E.content)){R.push(C.candidates[0].content);for(const _ of(v=C.candidates[0].content.parts)!==null&&v!==void 0?v:[])if(a<s&&_.functionCall){if(!_.functionCall.name)throw new Error("Function call name was not returned by the model.");if(d.has(_.functionCall.name)){const b=yield K(d.get(_.functionCall.name).callTool([_.functionCall]));D.push(...b)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${d.keys()}, mising tool: ${_.functionCall.name}`)}}}}catch(C){m={error:C}}finally{try{!T&&!p&&(g=I.return)&&(yield K(g.call(I)))}finally{if(m)throw m.error}}if(D.length>0){r=!0;const C=new Gn;C.candidates=[{content:{role:"user",parts:D}}],yield yield K(C);const _=[];_.push(...R),_.push({role:"user",parts:D});const b=Je(h.contents).concat(_);h.contents=b}else break}})})(this,c,t)}async generateContentInternal(t){var n,i,o,s;let r,a="",c={};if(this.apiClient.isVertexAI()){const l=yd(this.apiClient,t);return a=H("{model}:generateContent",l._url),c=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const h=Td(d),p=new Gn;return Object.assign(p,h),p})}else{const l=gd(this.apiClient,t);return a=H("{model}:generateContent",l._url),c=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const h=Ed(d),p=new Gn;return Object.assign(p,h),p})}}async generateContentStreamInternal(t){var n,i,o,s;let r,a="",c={};if(this.apiClient.isVertexAI()){const l=yd(this.apiClient,t);return a=H("{model}:streamGenerateContent?alt=sse",l._url),c=l._query,delete l._url,delete l._query,r=this.apiClient.requestStream({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}),r.then(function(h){return ot(this,arguments,function*(){var p,m,g,y;try{for(var E=!0,v=st(h),T;T=yield K(v.next()),p=T.done,!p;E=!0){y=T.value,E=!1;const I=y,S=Td(yield K(I.json()));S.sdkHttpResponse={headers:I.headers};const A=new Gn;Object.assign(A,S),yield yield K(A)}}catch(I){m={error:I}}finally{try{!E&&!p&&(g=v.return)&&(yield K(g.call(v)))}finally{if(m)throw m.error}}})})}else{const l=gd(this.apiClient,t);return a=H("{model}:streamGenerateContent?alt=sse",l._url),c=l._query,delete l._url,delete l._query,r=this.apiClient.requestStream({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}),r.then(function(h){return ot(this,arguments,function*(){var p,m,g,y;try{for(var E=!0,v=st(h),T;T=yield K(v.next()),p=T.done,!p;E=!0){y=T.value,E=!1;const I=y,S=Ed(yield K(I.json()));S.sdkHttpResponse={headers:I.headers};const A=new Gn;Object.assign(A,S),yield yield K(A)}}catch(I){m={error:I}}finally{try{!E&&!p&&(g=v.return)&&(yield K(g.call(v)))}finally{if(m)throw m.error}}})})}}async embedContent(t){var n,i,o,s;let r,a="",c={};if(this.apiClient.isVertexAI()){const l=tD(this.apiClient,t);return a=H("{model}:predict",l._url),c=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const h=iD(d),p=new ju;return Object.assign(p,h),p})}else{const l=eD(this.apiClient,t);return a=H("{model}:batchEmbedContents",l._url),c=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const h=nD(d),p=new ju;return Object.assign(p,h),p})}}async generateImagesInternal(t){var n,i,o,s;let r,a="",c={};if(this.apiClient.isVertexAI()){const l=pD(this.apiClient,t);return a=H("{model}:predict",l._url),c=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const h=gD(d),p=new ed;return Object.assign(p,h),p})}else{const l=hD(this.apiClient,t);return a=H("{model}:predict",l._url),c=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const h=mD(d),p=new ed;return Object.assign(p,h),p})}}async editImageInternal(t){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){const a=XP(this.apiClient,t);return s=H("{model}:predict",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(l=>{const d=l;return d.sdkHttpResponse={headers:c.headers},d})),o.then(c=>{const l=ZP(c),d=new sw;return Object.assign(d,l),d})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){const a=pb(this.apiClient,t);return s=H("{model}:predict",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(l=>{const d=l;return d.sdkHttpResponse={headers:c.headers},d})),o.then(c=>{const l=mb(c),d=new rw;return Object.assign(d,l),d})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){const a=KD(this.apiClient,t);return s=H("{model}:predict",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>{const l=XD(c),d=new aw;return Object.assign(d,l),d})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){const a=nb(this.apiClient,t);return s=H("{model}:predict",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>{const l=ib(c),d=new lw;return Object.assign(d,l),d})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var n,i,o,s;let r,a="",c={};if(this.apiClient.isVertexAI()){const l=ND(this.apiClient,t);return a=H("{name}",l._url),c=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>ir(d))}else{const l=xD(this.apiClient,t);return a=H("{name}",l._url),c=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),r.then(d=>nr(d))}}async listInternal(t){var n,i,o,s;let r,a="",c={};if(this.apiClient.isVertexAI()){const l=HD(this.apiClient,t);return a=H("{models_url}",l._url),c=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const h=WD(d),p=new td;return Object.assign(p,h),p})}else{const l=BD(this.apiClient,t);return a=H("{models_url}",l._url),c=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const h=qD(d),p=new td;return Object.assign(p,h),p})}}async update(t){var n,i,o,s;let r,a="",c={};if(this.apiClient.isVertexAI()){const l=fb(this.apiClient,t);return a=H("{model}",l._url),c=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>ir(d))}else{const l=db(this.apiClient,t);return a=H("{name}",l._url),c=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),r.then(d=>nr(d))}}async delete(t){var n,i,o,s;let r,a="",c={};if(this.apiClient.isVertexAI()){const l=YP(this.apiClient,t);return a=H("{name}",l._url),c=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const h=JP(d),p=new nd;return Object.assign(p,h),p})}else{const l=$P(this.apiClient,t);return a=H("{name}",l._url),c=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const h=zP(d),p=new nd;return Object.assign(p,h),p})}}async countTokens(t){var n,i,o,s;let r,a="",c={};if(this.apiClient.isVertexAI()){const l=HP(this.apiClient,t);return a=H("{model}:countTokens",l._url),c=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const h=WP(d),p=new id;return Object.assign(p,h),p})}else{const l=BP(this.apiClient,t);return a=H("{model}:countTokens",l._url),c=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const h=qP(d),p=new id;return Object.assign(p,h),p})}}async computeTokens(t){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){const a=LP(this.apiClient,t);return s=H("{model}:computeTokens",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(l=>{const d=l;return d.sdkHttpResponse={headers:c.headers},d})),o.then(c=>{const l=OP(c),d=new cw;return Object.assign(d,l),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var n,i,o,s;let r,a="",c={};if(this.apiClient.isVertexAI()){const l=_D(this.apiClient,t);return a=H("{model}:predictLongRunning",l._url),c=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const h=ID(d),p=new ao;return Object.assign(p,h),p})}else{const l=vD(this.apiClient,t);return a=H("{model}:predictLongRunning",l._url),c=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),r.then(d=>{const h=TD(d),p=new ao;return Object.assign(p,h),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lx extends Et{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const n=t.operation,i=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let s;i&&"httpOptions"in i&&(s=i.httpOptions);const r=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(t){const n=t.operation,i=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let s;i&&"httpOptions"in i&&(s=i.httpOptions);const r=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(t){var n,i,o,s;let r,a="",c={};if(this.apiClient.isVertexAI()){const l=jR(t);return a=H("{operationName}",l._url),c=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r}else{const l=QR(t);return a=H("{operationName}",l._url),c=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),r}}async fetchPredictVideosOperationInternal(t){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){const a=$R(t);return s=H("{resourceName}:fetchPredictOperation",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cx(e){const t={},n=u(e,["data"]);if(n!=null&&f(t,["data"],n),u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function ux(e){const t={},n=u(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Tx(s))),f(t,["parts"],o)}const i=u(e,["role"]);return i!=null&&f(t,["role"],i),t}function dx(e,t,n){const i={},o=u(t,["expireTime"]);n!==void 0&&o!=null&&f(n,["expireTime"],o);const s=u(t,["newSessionExpireTime"]);n!==void 0&&s!=null&&f(n,["newSessionExpireTime"],s);const r=u(t,["uses"]);n!==void 0&&r!=null&&f(n,["uses"],r);const a=u(t,["liveConnectConstraints"]);n!==void 0&&a!=null&&f(n,["bidiGenerateContentSetup"],Ex(e,a));const c=u(t,["lockAdditionalFields"]);return n!==void 0&&c!=null&&f(n,["fieldMask"],c),i}function fx(e,t){const n={},i=u(t,["config"]);return i!=null&&f(n,["config"],dx(e,i,n)),n}function hx(e){const t={};if(u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(e,["fileUri"]);n!=null&&f(t,["fileUri"],n);const i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function px(e){const t={},n=u(e,["id"]);n!=null&&f(t,["id"],n);const i=u(e,["args"]);i!=null&&f(t,["args"],i);const o=u(e,["name"]);if(o!=null&&f(t,["name"],o),u(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function mx(e){const t={};if(u(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(e,["enableWidget"]);return n!=null&&f(t,["enableWidget"],n),t}function gx(e){const t={};if(u(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(e,["timeRangeFilter"]);return n!=null&&f(t,["timeRangeFilter"],n),t}function yx(e,t){const n={},i=u(e,["generationConfig"]);t!==void 0&&i!=null&&f(t,["setup","generationConfig"],i);const o=u(e,["responseModalities"]);t!==void 0&&o!=null&&f(t,["setup","generationConfig","responseModalities"],o);const s=u(e,["temperature"]);t!==void 0&&s!=null&&f(t,["setup","generationConfig","temperature"],s);const r=u(e,["topP"]);t!==void 0&&r!=null&&f(t,["setup","generationConfig","topP"],r);const a=u(e,["topK"]);t!==void 0&&a!=null&&f(t,["setup","generationConfig","topK"],a);const c=u(e,["maxOutputTokens"]);t!==void 0&&c!=null&&f(t,["setup","generationConfig","maxOutputTokens"],c);const l=u(e,["mediaResolution"]);t!==void 0&&l!=null&&f(t,["setup","generationConfig","mediaResolution"],l);const d=u(e,["seed"]);t!==void 0&&d!=null&&f(t,["setup","generationConfig","seed"],d);const h=u(e,["speechConfig"]);t!==void 0&&h!=null&&f(t,["setup","generationConfig","speechConfig"],ga(h));const p=u(e,["thinkingConfig"]);t!==void 0&&p!=null&&f(t,["setup","generationConfig","thinkingConfig"],p);const m=u(e,["enableAffectiveDialog"]);t!==void 0&&m!=null&&f(t,["setup","generationConfig","enableAffectiveDialog"],m);const g=u(e,["systemInstruction"]);t!==void 0&&g!=null&&f(t,["setup","systemInstruction"],ux(Ae(g)));const y=u(e,["tools"]);if(t!==void 0&&y!=null){let P=xn(y);Array.isArray(P)&&(P=P.map(D=>vx(bn(D)))),f(t,["setup","tools"],P)}const E=u(e,["sessionResumption"]);t!==void 0&&E!=null&&f(t,["setup","sessionResumption"],Ix(E));const v=u(e,["inputAudioTranscription"]);t!==void 0&&v!=null&&f(t,["setup","inputAudioTranscription"],v);const T=u(e,["outputAudioTranscription"]);t!==void 0&&T!=null&&f(t,["setup","outputAudioTranscription"],T);const I=u(e,["realtimeInputConfig"]);t!==void 0&&I!=null&&f(t,["setup","realtimeInputConfig"],I);const S=u(e,["contextWindowCompression"]);t!==void 0&&S!=null&&f(t,["setup","contextWindowCompression"],S);const A=u(e,["proactivity"]);if(t!==void 0&&A!=null&&f(t,["setup","proactivity"],A),u(e,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function Ex(e,t){const n={},i=u(t,["model"]);i!=null&&f(n,["setup","model"],oe(e,i));const o=u(t,["config"]);return o!=null&&f(n,["config"],yx(o,n)),n}function Tx(e){const t={},n=u(e,["mediaResolution"]);n!=null&&f(t,["mediaResolution"],n);const i=u(e,["codeExecutionResult"]);i!=null&&f(t,["codeExecutionResult"],i);const o=u(e,["executableCode"]);o!=null&&f(t,["executableCode"],o);const s=u(e,["fileData"]);s!=null&&f(t,["fileData"],hx(s));const r=u(e,["functionCall"]);r!=null&&f(t,["functionCall"],px(r));const a=u(e,["functionResponse"]);a!=null&&f(t,["functionResponse"],a);const c=u(e,["inlineData"]);c!=null&&f(t,["inlineData"],cx(c));const l=u(e,["text"]);l!=null&&f(t,["text"],l);const d=u(e,["thought"]);d!=null&&f(t,["thought"],d);const h=u(e,["thoughtSignature"]);h!=null&&f(t,["thoughtSignature"],h);const p=u(e,["videoMetadata"]);return p!=null&&f(t,["videoMetadata"],p),t}function Ix(e){const t={},n=u(e,["handle"]);if(n!=null&&f(t,["handle"],n),u(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function vx(e){const t={},n=u(e,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(h=>h)),f(t,["functionDeclarations"],d)}if(u(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(e,["googleSearchRetrieval"]);i!=null&&f(t,["googleSearchRetrieval"],i);const o=u(e,["computerUse"]);o!=null&&f(t,["computerUse"],o);const s=u(e,["fileSearch"]);s!=null&&f(t,["fileSearch"],s);const r=u(e,["codeExecution"]);if(r!=null&&f(t,["codeExecution"],r),u(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=u(e,["googleMaps"]);a!=null&&f(t,["googleMaps"],mx(a));const c=u(e,["googleSearch"]);c!=null&&f(t,["googleSearch"],gx(c));const l=u(e,["urlContext"]);return l!=null&&f(t,["urlContext"],l),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _x(e){const t=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const i=e[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const o=Object.keys(i).map(s=>`${n}.${s}`);t.push(...o)}else t.push(n)}return t.join(",")}function Cx(e,t){let n=null;const i=e.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const s=i.setup;typeof s=="object"&&s!==null?(e.bidiGenerateContentSetup=s,n=s):delete e.bidiGenerateContentSetup}else i!==void 0&&delete e.bidiGenerateContentSetup;const o=e.fieldMask;if(n){const s=_x(n);if(Array.isArray(t==null?void 0:t.lockAdditionalFields)&&(t==null?void 0:t.lockAdditionalFields.length)===0)s?e.fieldMask=s:delete e.fieldMask;else if(t!=null&&t.lockAdditionalFields&&t.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const r=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];o.length>0&&(a=o.map(l=>r.includes(l)?`generationConfig.${l}`:l));const c=[];s&&c.push(s),a.length>0&&c.push(...a),c.length>0?e.fieldMask=c.join(","):delete e.fieldMask}else delete e.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?e.fieldMask=o.join(","):delete e.fieldMask;return e}class Sx extends Et{constructor(t){super(),this.apiClient=t}async create(t){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=fx(this.apiClient,t);s=H("auth_tokens",a._url),r=a._query,delete a.config,delete a._url,delete a._query;const c=Cx(a,t.config);return o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>l)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ax(e,t){const n={},i=u(e,["force"]);return t!==void 0&&i!=null&&f(t,["_query","force"],i),n}function Rx(e){const t={},n=u(e,["name"]);n!=null&&f(t,["_url","name"],n);const i=u(e,["config"]);return i!=null&&Ax(i,t),t}function wx(e){const t={},n=u(e,["name"]);return n!=null&&f(t,["_url","name"],n),t}function Mx(e,t){const n={},i=u(e,["pageSize"]);t!==void 0&&i!=null&&f(t,["_query","pageSize"],i);const o=u(e,["pageToken"]);return t!==void 0&&o!=null&&f(t,["_query","pageToken"],o),n}function Px(e){const t={},n=u(e,["parent"]);n!=null&&f(t,["_url","parent"],n);const i=u(e,["config"]);return i!=null&&Mx(i,t),t}function Dx(e){const t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const i=u(e,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);const o=u(e,["documents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),f(t,["documents"],s)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bx extends Et{constructor(t){super(),this.apiClient=t,this.list=async n=>new Jt(yt.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(t){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=wx(t);return s=H("{name}",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>c)}}async delete(t){var n,i;let o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const r=Rx(t);o=H("{name}",r._url),s=r._query,delete r._url,delete r._query,await this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(r),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(t){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Px(t);return s=H("{parent}/documents",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>{const l=Dx(c),d=new uw;return Object.assign(d,l),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xx extends Et{constructor(t,n=new bx(t)){super(),this.apiClient=t,this.documents=n,this.list=async(i={})=>new Jt(yt.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(i),i)}async uploadToFileSearchStore(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(t.fileSearchStoreName,t.file,t.config)}async create(t){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=_b(t);return s=H("fileSearchStores",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>c)}}async get(t){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Ab(t);return s=H("{name}",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>c)}}async delete(t){var n,i;let o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const r=Sb(t);o=H("{name}",r._url),s=r._query,delete r._url,delete r._query,await this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(r),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(t){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=bb(t);return s=H("fileSearchStores",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>{const l=xb(c),d=new dw;return Object.assign(d,l),d})}}async uploadToFileSearchStoreInternal(t){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Nb(t);return s=H("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>{const l=Lb(c),d=new fw;return Object.assign(d,l),d})}}async importFile(t){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Mb(t);return s=H("{file_search_store_name}:importFile",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>{const l=wb(c),d=new da;return Object.assign(d,l),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let sm=function(){const{crypto:e}=globalThis;if(e!=null&&e.randomUUID)return sm=e.randomUUID.bind(e),e.randomUUID();const t=new Uint8Array(1),n=e?()=>e.getRandomValues(t)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^n()&15>>+i/4).toString(16))};const Nx=()=>sm();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sr(e){return typeof e=="object"&&e!==null&&("name"in e&&e.name==="AbortError"||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))}const rr=e=>{if(e instanceof Error)return e;if(typeof e=="object"&&e!==null){try{if(Object.prototype.toString.call(e)==="[object Error]"){const t=new Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(t.stack=e.stack),e.cause&&!t.cause&&(t.cause=e.cause),e.name&&(t.name=e.name),t}}catch{}try{return new Error(JSON.stringify(e))}catch{}}return new Error(e)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ke extends Error{}class Ne extends Ke{constructor(t,n,i,o){super(`${Ne.makeMessage(t,n,i)}`),this.status=t,this.headers=o,this.error=n}static makeMessage(t,n,i){const o=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):i;return t&&o?`${t} ${o}`:t?`${t} status code (no body)`:o||"(no status code or body)"}static generate(t,n,i,o){if(!t||!o)return new Fo({message:i,cause:rr(n)});const s=n;return t===400?new am(t,s,i,o):t===401?new lm(t,s,i,o):t===403?new cm(t,s,i,o):t===404?new um(t,s,i,o):t===409?new dm(t,s,i,o):t===422?new fm(t,s,i,o):t===429?new hm(t,s,i,o):t>=500?new pm(t,s,i,o):new Ne(t,s,i,o)}}class ar extends Ne{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}}class Fo extends Ne{constructor({message:t,cause:n}){super(void 0,void 0,t||"Connection error.",void 0),n&&(this.cause=n)}}class rm extends Fo{constructor({message:t}={}){super({message:t??"Request timed out."})}}class am extends Ne{}class lm extends Ne{}class cm extends Ne{}class um extends Ne{}class dm extends Ne{}class fm extends Ne{}class hm extends Ne{}class pm extends Ne{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Lx=/^[a-z][a-z0-9+.-]*:/i,Ox=e=>Lx.test(e);let lr=e=>(lr=Array.isArray,lr(e));const Fx=lr;let kx=Fx;const Ad=kx;function Vx(e){if(!e)return!0;for(const t in e)return!1;return!0}function Ux(e,t){return Object.prototype.hasOwnProperty.call(e,t)}const Gx=(e,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new Ke(`${e} must be an integer`);if(t<0)throw new Ke(`${e} must be a positive integer`);return t},Bx=e=>{try{return JSON.parse(e)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Hx=e=>new Promise(t=>setTimeout(t,e));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Xt="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qx(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const Wx=()=>{var e,t,n,i,o;const s=qx();if(s==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Xt,"X-Stainless-OS":wd(Deno.build.os),"X-Stainless-Arch":Rd(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(t=(e=Deno.version)===null||e===void 0?void 0:e.deno)!==null&&t!==void 0?t:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Xt,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(s==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Xt,"X-Stainless-OS":wd((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":Rd((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(o=globalThis.process.version)!==null&&o!==void 0?o:"unknown"};const r=$x();return r?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Xt,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${r.browser}`,"X-Stainless-Runtime-Version":r.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Xt,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function $x(){if(typeof navigator>"u"||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const i=n.exec(navigator.userAgent);if(i){const o=i[1]||0,s=i[2]||0,r=i[3]||0;return{browser:t,version:`${o}.${s}.${r}`}}}return null}const Rd=e=>e==="x32"?"x32":e==="x86_64"||e==="x64"?"x64":e==="arm"?"arm":e==="aarch64"||e==="arm64"?"arm64":e?`other:${e}`:"unknown",wd=e=>(e=e.toLowerCase(),e.includes("ios")?"iOS":e==="android"?"Android":e==="darwin"?"MacOS":e==="win32"?"Windows":e==="freebsd"?"FreeBSD":e==="openbsd"?"OpenBSD":e==="linux"?"Linux":e?`Other:${e}`:"Unknown");let bi;const Yx=()=>bi??(bi=Wx());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zx(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function mm(...e){const t=globalThis.ReadableStream;if(typeof t>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...e)}function Jx(e){let t=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator]();return mm({start(){},async pull(n){const{done:i,value:o}=await t.next();i?n.close():n.enqueue(o)},async cancel(){var n;await((n=t.return)===null||n===void 0?void 0:n.call(t))}})}function gm(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const n=await t.read();return n!=null&&n.done&&t.releaseLock(),n}catch(n){throw t.releaseLock(),n}},async return(){const n=t.cancel();return t.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Kx(e){var t,n;if(e===null||typeof e!="object")return;if(e[Symbol.asyncIterator]){await((n=(t=e[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(t));return}const i=e.getReader(),o=i.cancel();i.releaseLock(),await o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Xx=({headers:e,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ym=()=>{var e;if(typeof File>"u"){const{process:t}=globalThis,n=typeof((e=t==null?void 0:t.versions)===null||e===void 0?void 0:e.node)=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function ms(e,t,n){return ym(),new File(e,t??"unknown_file",n)}function Zx(e){return(typeof e=="object"&&e!==null&&("name"in e&&e.name&&String(e.name)||"url"in e&&e.url&&String(e.url)||"filename"in e&&e.filename&&String(e.filename)||"path"in e&&e.path&&String(e.path))||"").split(/[\\/]/).pop()||void 0}const Qx=e=>e!=null&&typeof e=="object"&&typeof e[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Em=e=>e!=null&&typeof e=="object"&&typeof e.size=="number"&&typeof e.type=="string"&&typeof e.text=="function"&&typeof e.slice=="function"&&typeof e.arrayBuffer=="function",jx=e=>e!=null&&typeof e=="object"&&typeof e.name=="string"&&typeof e.lastModified=="number"&&Em(e),eN=e=>e!=null&&typeof e=="object"&&typeof e.url=="string"&&typeof e.blob=="function";async function tN(e,t,n){if(ym(),e=await e,jx(e))return e instanceof File?e:ms([await e.arrayBuffer()],e.name);if(eN(e)){const o=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()),ms(await cr(o),t,n)}const i=await cr(e);if(t||(t=Zx(e)),!(n!=null&&n.type)){const o=i.find(s=>typeof s=="object"&&"type"in s&&s.type);typeof o=="string"&&(n=Object.assign(Object.assign({},n),{type:o}))}return ms(i,t,n)}async function cr(e){var t,n,i,o,s;let r=[];if(typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)r.push(e);else if(Em(e))r.push(e instanceof Blob?e:await e.arrayBuffer());else if(Qx(e))try{for(var a=!0,c=st(e),l;l=await c.next(),t=l.done,!t;a=!0){o=l.value,a=!1;const d=o;r.push(...await cr(d))}}catch(d){n={error:d}}finally{try{!a&&!t&&(i=c.return)&&await i.call(c)}finally{if(n)throw n.error}}else{const d=(s=e==null?void 0:e.constructor)===null||s===void 0?void 0:s.name;throw new Error(`Unexpected data type: ${typeof e}${d?`; constructor: ${d}`:""}${nN(e)}`)}return r}function nN(e){return typeof e!="object"||e===null?"":`; props: [${Object.getOwnPropertyNames(e).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Tm{constructor(t){this._client=t}}Tm._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Im(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Md=Object.freeze(Object.create(null)),iN=(e=Im)=>(function(n,...i){if(n.length===1)return n[0];let o=!1;const s=[],r=n.reduce((d,h,p)=>{var m,g,y;/[?#]/.test(h)&&(o=!0);const E=i[p];let v=(o?encodeURIComponent:e)(""+E);return p!==i.length&&(E==null||typeof E=="object"&&E.toString===((y=Object.getPrototypeOf((g=Object.getPrototypeOf((m=E.hasOwnProperty)!==null&&m!==void 0?m:Md))!==null&&g!==void 0?g:Md))===null||y===void 0?void 0:y.toString))&&(v=E+"",s.push({start:d.length+h.length,length:v.length,error:`Value of type ${Object.prototype.toString.call(E).slice(8,-1)} is not a valid path parameter`})),d+h+(p===i.length?"":v)},""),a=r.split(/[?#]/,1)[0],c=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let l;for(;(l=c.exec(a))!==null;)s.push({start:l.index,length:l[0].length,error:`Value "${l[0]}" can't be safely passed as a path parameter`});if(s.sort((d,h)=>d.start-h.start),s.length>0){let d=0;const h=s.reduce((p,m)=>{const g=" ".repeat(m.start-d),y="^".repeat(m.length);return d=m.start+m.length,p+g+y},"");throw new Ke(`Path parameters result in path with invalid segments:
${s.map(p=>p.error).join(`
`)}
${r}
${h}`)}return r}),xi=iN(Im);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vm extends Tm{create(t,n){var i;const{api_version:o=this._client.apiVersion}=t,s=co(t,["api_version"]);if("model"in s&&"agent_config"in s)throw new Ke("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in s&&"generation_config"in s)throw new Ke("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(xi`/${o}/interactions`,Object.assign(Object.assign({body:s},n),{stream:(i=t.stream)!==null&&i!==void 0?i:!1}))}delete(t,n={},i){const{api_version:o=this._client.apiVersion}=n??{};return this._client.delete(xi`/${o}/interactions/${t}`,i)}cancel(t,n={},i){const{api_version:o=this._client.apiVersion}=n??{};return this._client.post(xi`/${o}/interactions/${t}/cancel`,i)}get(t,n={},i){var o;const s=n??{},{api_version:r=this._client.apiVersion}=s,a=co(s,["api_version"]);return this._client.get(xi`/${r}/interactions/${t}`,Object.assign(Object.assign({query:a},i),{stream:(o=n==null?void 0:n.stream)!==null&&o!==void 0?o:!1}))}}vm._key=Object.freeze(["interactions"]);class _m extends vm{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oN(e){let t=0;for(const o of e)t+=o.length;const n=new Uint8Array(t);let i=0;for(const o of e)n.set(o,i),i+=o.length;return n}let Ni;function Ea(e){let t;return(Ni??(t=new globalThis.TextEncoder,Ni=t.encode.bind(t)))(e)}let Li;function Pd(e){let t;return(Li??(t=new globalThis.TextDecoder,Li=t.decode.bind(t)))(e)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ko{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(t){if(t==null)return[];const n=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?Ea(t):t;this.buffer=oN([this.buffer,n]);const i=[];let o;for(;(o=sN(this.buffer,this.carriageReturnIndex))!=null;){if(o.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=o.index;continue}if(this.carriageReturnIndex!=null&&(o.index!==this.carriageReturnIndex+1||o.carriage)){i.push(Pd(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const s=this.carriageReturnIndex!==null?o.preceding-1:o.preceding,r=Pd(this.buffer.subarray(0,s));i.push(r),this.buffer=this.buffer.subarray(o.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}ko.NEWLINE_CHARS=new Set([`
`,"\r"]);ko.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function sN(e,t){for(let o=t??0;o<e.length;o++){if(e[o]===10)return{preceding:o,index:o+1,carriage:!1};if(e[o]===13)return{preceding:o,index:o+1,carriage:!0}}return null}function rN(e){for(let i=0;i<e.length-1;i++){if(e[i]===10&&e[i+1]===10||e[i]===13&&e[i+1]===13)return i+2;if(e[i]===13&&e[i+1]===10&&i+3<e.length&&e[i+2]===13&&e[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uo={off:0,error:200,warn:300,info:400,debug:500},Dd=(e,t,n)=>{if(e){if(Ux(uo,e))return e;Me(n).warn(`${t} was set to ${JSON.stringify(e)}, expected one of ${JSON.stringify(Object.keys(uo))}`)}};function Hn(){}function Oi(e,t,n){return!t||uo[e]>uo[n]?Hn:t[e].bind(t)}const aN={error:Hn,warn:Hn,info:Hn,debug:Hn};let bd=new WeakMap;function Me(e){var t;const n=e.logger,i=(t=e.logLevel)!==null&&t!==void 0?t:"off";if(!n)return aN;const o=bd.get(n);if(o&&o[0]===i)return o[1];const s={error:Oi("error",n,i),warn:Oi("warn",n,i),info:Oi("info",n,i),debug:Oi("debug",n,i)};return bd.set(n,[i,s]),s}const xt=e=>(e.options&&(e.options=Object.assign({},e.options),delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(([t,n])=>[t,t.toLowerCase()==="x-goog-api-key"||t.toLowerCase()==="authorization"||t.toLowerCase()==="cookie"||t.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class un{constructor(t,n,i){this.iterator=t,this.controller=n,this.client=i}static fromSSEResponse(t,n,i){let o=!1;const s=i?Me(i):console;function r(){return ot(this,arguments,function*(){var c,l,d,h;if(o)throw new Ke("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let p=!1;try{try{for(var m=!0,g=st(lN(t,n)),y;y=yield K(g.next()),c=y.done,!c;m=!0){h=y.value,m=!1;const E=h;if(!p)if(E.data.startsWith("[DONE]")){p=!0;continue}else try{yield yield K(JSON.parse(E.data))}catch(v){throw s.error("Could not parse message into JSON:",E.data),s.error("From chunk:",E.raw),v}}}catch(E){l={error:E}}finally{try{!m&&!c&&(d=g.return)&&(yield K(d.call(g)))}finally{if(l)throw l.error}}p=!0}catch(E){if(sr(E))return yield K(void 0);throw E}finally{p||n.abort()}})}return new un(r,n,i)}static fromReadableStream(t,n,i){let o=!1;function s(){return ot(this,arguments,function*(){var c,l,d,h;const p=new ko,m=gm(t);try{for(var g=!0,y=st(m),E;E=yield K(y.next()),c=E.done,!c;g=!0){h=E.value,g=!1;const v=h;for(const T of p.decode(v))yield yield K(T)}}catch(v){l={error:v}}finally{try{!g&&!c&&(d=y.return)&&(yield K(d.call(y)))}finally{if(l)throw l.error}}for(const v of p.flush())yield yield K(v)})}function r(){return ot(this,arguments,function*(){var c,l,d,h;if(o)throw new Ke("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let p=!1;try{try{for(var m=!0,g=st(s()),y;y=yield K(g.next()),c=y.done,!c;m=!0){h=y.value,m=!1;const E=h;p||E&&(yield yield K(JSON.parse(E)))}}catch(E){l={error:E}}finally{try{!m&&!c&&(d=g.return)&&(yield K(d.call(g)))}finally{if(l)throw l.error}}p=!0}catch(E){if(sr(E))return yield K(void 0);throw E}finally{p||n.abort()}})}return new un(r,n,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],n=[],i=this.iterator(),o=s=>({next:()=>{if(s.length===0){const r=i.next();t.push(r),n.push(r)}return s.shift()}});return[new un(()=>o(t),this.controller,this.client),new un(()=>o(n),this.controller,this.client)]}toReadableStream(){const t=this;let n;return mm({async start(){n=t[Symbol.asyncIterator]()},async pull(i){try{const{value:o,done:s}=await n.next();if(s)return i.close();const r=Ea(JSON.stringify(o)+`
`);i.enqueue(r)}catch(o){i.error(o)}},async cancel(){var i;await((i=n.return)===null||i===void 0?void 0:i.call(n))}})}}function lN(e,t){return ot(this,arguments,function*(){var i,o,s,r;if(!e.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Ke("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Ke("Attempted to iterate over a response with no body");const a=new uN,c=new ko,l=gm(e.body);try{for(var d=!0,h=st(cN(l)),p;p=yield K(h.next()),i=p.done,!i;d=!0){r=p.value,d=!1;const m=r;for(const g of c.decode(m)){const y=a.decode(g);y&&(yield yield K(y))}}}catch(m){o={error:m}}finally{try{!d&&!i&&(s=h.return)&&(yield K(s.call(h)))}finally{if(o)throw o.error}}for(const m of c.flush()){const g=a.decode(m);g&&(yield yield K(g))}})}function cN(e){return ot(this,arguments,function*(){var n,i,o,s;let r=new Uint8Array;try{for(var a=!0,c=st(e),l;l=yield K(c.next()),n=l.done,!n;a=!0){s=l.value,a=!1;const d=s;if(d==null)continue;const h=d instanceof ArrayBuffer?new Uint8Array(d):typeof d=="string"?Ea(d):d;let p=new Uint8Array(r.length+h.length);p.set(r),p.set(h,r.length),r=p;let m;for(;(m=rN(r))!==-1;)yield yield K(r.slice(0,m)),r=r.slice(m)}}catch(d){i={error:d}}finally{try{!a&&!n&&(o=c.return)&&(yield K(o.call(c)))}finally{if(i)throw i.error}}r.length>0&&(yield yield K(r))})}class uN{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(t),t.startsWith(":"))return null;let[n,i,o]=dN(t,":");return o.startsWith(" ")&&(o=o.substring(1)),n==="event"?this.event=o:n==="data"&&this.data.push(o),null}}function dN(e,t){const n=e.indexOf(t);return n!==-1?[e.substring(0,n),t,e.substring(n+t.length)]:[e,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function fN(e,t){const{response:n,requestLogID:i,retryOfRequestLogID:o,startTime:s}=t,r=await(async()=>{var a;if(t.options.stream)return Me(e).debug("response",n.status,n.url,n.headers,n.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(n,t.controller,e):un.fromSSEResponse(n,t.controller,e);if(n.status===204)return null;if(t.options.__binaryResponse)return n;const c=n.headers.get("content-type"),l=(a=c==null?void 0:c.split(";")[0])===null||a===void 0?void 0:a.trim();return(l==null?void 0:l.includes("application/json"))||(l==null?void 0:l.endsWith("+json"))?await n.json():await n.text()})();return Me(e).debug(`[${i}] response parsed`,xt({retryOfRequestLogID:o,url:n.url,status:n.status,body:r,durationMs:Date.now()-s})),r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ta extends Promise{constructor(t,n,i=fN){super(o=>{o(null)}),this.responsePromise=n,this.parseResponse=i,this.client=t}_thenUnwrap(t){return new Ta(this.client,this.responsePromise,async(n,i)=>t(await this.parseResponse(n,i),i))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(t=>this.parseResponse(this.client,t))),this.parsedPromise}then(t,n){return this.parse().then(t,n)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Cm=Symbol("brand.privateNullableHeaders");function*hN(e){if(!e)return;if(Cm in e){const{values:i,nulls:o}=e;yield*i.entries();for(const s of o)yield[s,null];return}let t=!1,n;e instanceof Headers?n=e.entries():Ad(e)?n=e:(t=!0,n=Object.entries(e??{}));for(let i of n){const o=i[0];if(typeof o!="string")throw new TypeError("expected header name to be a string");const s=Ad(i[1])?i[1]:[i[1]];let r=!1;for(const a of s)a!==void 0&&(t&&!r&&(r=!0,yield[o,null]),yield[o,a])}}const gs=e=>{const t=new Headers,n=new Set;for(const i of e){const o=new Set;for(const[s,r]of hN(i)){const a=s.toLowerCase();o.has(a)||(t.delete(s),o.add(a)),r===null?(t.delete(s),n.add(a)):(t.append(s,r),n.delete(a))}}return{[Cm]:!0,values:t,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ys=e=>{var t,n,i,o,s,r;if(typeof globalThis.process<"u")return(i=(n=(t=UR)===null||t===void 0?void 0:t[e])===null||n===void 0?void 0:n.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(r=(s=(o=globalThis.Deno.env)===null||o===void 0?void 0:o.get)===null||s===void 0?void 0:s.call(o,e))===null||r===void 0?void 0:r.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Sm;class Vo{constructor(t){var n,i,o,s,r,a,c,l=t===void 0?{}:t,{baseURL:d=ys("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:h=(n=ys("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:p="v1beta"}=l,m=co(l,["baseURL","apiKey","apiVersion"]);const g=Object.assign(Object.assign({apiKey:h,apiVersion:p},m),{baseURL:d||"https://generativelanguage.googleapis.com"});this.baseURL=g.baseURL,this.timeout=(i=g.timeout)!==null&&i!==void 0?i:Vo.DEFAULT_TIMEOUT,this.logger=(o=g.logger)!==null&&o!==void 0?o:console;const y="warn";this.logLevel=y,this.logLevel=(r=(s=Dd(g.logLevel,"ClientOptions.logLevel",this))!==null&&s!==void 0?s:Dd(ys("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&r!==void 0?r:y,this.fetchOptions=g.fetchOptions,this.maxRetries=(a=g.maxRetries)!==null&&a!==void 0?a:2,this.fetch=(c=g.fetch)!==null&&c!==void 0?c:zx(),this.encoder=Xx,this._options=g,this.apiKey=h,this.apiVersion=p}withOptions(t){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),t))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:n}){if(!(this.apiKey&&t.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(t){if(this.apiKey!=null)return gs([{"x-goog-api-key":this.apiKey}])}stringifyQuery(t){return Object.entries(t).filter(([n,i])=>typeof i<"u").map(([n,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(n)}=`;throw new Ke(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Xt}`}defaultIdempotencyKey(){return`stainless-node-retry-${Nx()}`}makeStatusError(t,n,i,o){return Ne.generate(t,n,i,o)}buildURL(t,n,i){const o=!this.baseURLOverridden()&&i||this.baseURL,s=Ox(t)?new URL(t):new URL(o+(o.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),r=this.defaultQuery();return Vx(r)||(n=Object.assign(Object.assign({},r),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(s.search=this.stringifyQuery(n)),s.toString()}async prepareOptions(t){}async prepareRequest(t,{url:n,options:i}){}get(t,n){return this.methodRequest("get",t,n)}post(t,n){return this.methodRequest("post",t,n)}patch(t,n){return this.methodRequest("patch",t,n)}put(t,n){return this.methodRequest("put",t,n)}delete(t,n){return this.methodRequest("delete",t,n)}methodRequest(t,n,i){return this.request(Promise.resolve(i).then(o=>Object.assign({method:t,path:n},o)))}request(t,n=null){return new Ta(this,this.makeRequest(t,n,void 0))}async makeRequest(t,n,i){var o,s,r;const a=await t,c=(o=a.maxRetries)!==null&&o!==void 0?o:this.maxRetries;n==null&&(n=c),await this.prepareOptions(a);const{req:l,url:d,timeout:h}=await this.buildRequest(a,{retryCount:c-n});await this.prepareRequest(l,{url:d,options:a});const p="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),m=i===void 0?"":`, retryOf: ${i}`,g=Date.now();if(Me(this).debug(`[${p}] sending request`,xt({retryOfRequestLogID:i,method:a.method,url:d,options:a,headers:l.headers})),!((s=a.signal)===null||s===void 0)&&s.aborted)throw new ar;const y=new AbortController,E=await this.fetchWithTimeout(d,l,h,y).catch(rr),v=Date.now();if(E instanceof globalThis.Error){const I=`retrying, ${n} attempts remaining`;if(!((r=a.signal)===null||r===void 0)&&r.aborted)throw new ar;const S=sr(E)||/timed? ?out/i.test(String(E)+("cause"in E?String(E.cause):""));if(n)return Me(this).info(`[${p}] connection ${S?"timed out":"failed"} - ${I}`),Me(this).debug(`[${p}] connection ${S?"timed out":"failed"} (${I})`,xt({retryOfRequestLogID:i,url:d,durationMs:v-g,message:E.message})),this.retryRequest(a,n,i??p);throw Me(this).info(`[${p}] connection ${S?"timed out":"failed"} - error; no more retries left`),Me(this).debug(`[${p}] connection ${S?"timed out":"failed"} (error; no more retries left)`,xt({retryOfRequestLogID:i,url:d,durationMs:v-g,message:E.message})),S?new rm:new Fo({cause:E})}const T=`[${p}${m}] ${l.method} ${d} ${E.ok?"succeeded":"failed"} with status ${E.status} in ${v-g}ms`;if(!E.ok){const I=await this.shouldRetry(E);if(n&&I){const C=`retrying, ${n} attempts remaining`;return await Kx(E.body),Me(this).info(`${T} - ${C}`),Me(this).debug(`[${p}] response error (${C})`,xt({retryOfRequestLogID:i,url:E.url,status:E.status,headers:E.headers,durationMs:v-g})),this.retryRequest(a,n,i??p,E.headers)}const S=I?"error; no more retries left":"error; not retryable";Me(this).info(`${T} - ${S}`);const A=await E.text().catch(C=>rr(C).message),P=Bx(A),D=P?void 0:A;throw Me(this).debug(`[${p}] response error (${S})`,xt({retryOfRequestLogID:i,url:E.url,status:E.status,headers:E.headers,message:D,durationMs:Date.now()-g})),this.makeStatusError(E.status,P,D,E.headers)}return Me(this).info(T),Me(this).debug(`[${p}] response start`,xt({retryOfRequestLogID:i,url:E.url,status:E.status,headers:E.headers,durationMs:v-g})),{response:E,options:a,controller:y,requestLogID:p,retryOfRequestLogID:i,startTime:g}}async fetchWithTimeout(t,n,i,o){const s=n||{},{signal:r,method:a}=s,c=co(s,["signal","method"]);r&&r.addEventListener("abort",()=>o.abort());const l=setTimeout(()=>o.abort(),i),d=globalThis.ReadableStream&&c.body instanceof globalThis.ReadableStream||typeof c.body=="object"&&c.body!==null&&Symbol.asyncIterator in c.body,h=Object.assign(Object.assign(Object.assign({signal:o.signal},d?{duplex:"half"}:{}),{method:"GET"}),c);a&&(h.method=a.toUpperCase());try{return await this.fetch.call(void 0,t,h)}finally{clearTimeout(l)}}async shouldRetry(t){const n=t.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,n,i,o){var s;let r;const a=o==null?void 0:o.get("retry-after-ms");if(a){const l=parseFloat(a);Number.isNaN(l)||(r=l)}const c=o==null?void 0:o.get("retry-after");if(c&&!r){const l=parseFloat(c);Number.isNaN(l)?r=Date.parse(c)-Date.now():r=l*1e3}if(!(r&&0<=r&&r<60*1e3)){const l=(s=t.maxRetries)!==null&&s!==void 0?s:this.maxRetries;r=this.calculateDefaultRetryTimeoutMillis(n,l)}return await Hx(r),this.makeRequest(t,n-1,i)}calculateDefaultRetryTimeoutMillis(t,n){const s=n-t,r=Math.min(.5*Math.pow(2,s),8),a=1-Math.random()*.25;return r*a*1e3}async buildRequest(t,{retryCount:n=0}={}){var i,o,s;const r=Object.assign({},t),{method:a,path:c,query:l,defaultBaseURL:d}=r,h=this.buildURL(c,l,d);"timeout"in r&&Gx("timeout",r.timeout),r.timeout=(i=r.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:p,body:m}=this.buildBody({options:r}),g=await this.buildHeaders({options:t,method:a,bodyHeaders:p,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:a,headers:g},r.signal&&{signal:r.signal}),globalThis.ReadableStream&&m instanceof globalThis.ReadableStream&&{duplex:"half"}),m&&{body:m}),(o=this.fetchOptions)!==null&&o!==void 0?o:{}),(s=r.fetchOptions)!==null&&s!==void 0?s:{}),url:h,timeout:r.timeout}}async buildHeaders({options:t,method:n,bodyHeaders:i,retryCount:o}){let s={};this.idempotencyHeader&&n!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=t.idempotencyKey);const r=gs([s,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(o)},t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{}),Yx()),await this.authHeaders(t),this._options.defaultHeaders,i,t.headers]);return this.validateHeaders(r),r.values}buildBody({options:{body:t,headers:n}}){if(!t)return{bodyHeaders:void 0,body:void 0};const i=gs([n]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&i.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:Jx(t)}:this.encoder({body:t,headers:i})}}Vo.DEFAULT_TIMEOUT=6e4;class Ce extends Vo{constructor(){super(...arguments),this.interactions=new _m(this)}}Sm=Ce;Ce.GeminiNextGenAPIClient=Sm;Ce.GeminiNextGenAPIClientError=Ke;Ce.APIError=Ne;Ce.APIConnectionError=Fo;Ce.APIConnectionTimeoutError=rm;Ce.APIUserAbortError=ar;Ce.NotFoundError=um;Ce.ConflictError=dm;Ce.RateLimitError=hm;Ce.BadRequestError=am;Ce.AuthenticationError=lm;Ce.InternalServerError=pm;Ce.PermissionDeniedError=cm;Ce.UnprocessableEntityError=fm;Ce.toFile=tN;Ce.Interactions=_m;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pN(e,t){const n={},i=u(e,["name"]);return i!=null&&f(n,["_url","name"],i),n}function mN(e,t){const n={},i=u(e,["name"]);return i!=null&&f(n,["_url","name"],i),n}function gN(e,t){const n={},i=u(e,["sdkHttpResponse"]);return i!=null&&f(n,["sdkHttpResponse"],i),n}function yN(e,t){const n={},i=u(e,["sdkHttpResponse"]);return i!=null&&f(n,["sdkHttpResponse"],i),n}function EN(e,t,n){const i={};if(u(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=u(e,["tunedModelDisplayName"]);if(t!==void 0&&o!=null&&f(t,["displayName"],o),u(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=u(e,["epochCount"]);t!==void 0&&s!=null&&f(t,["tuningTask","hyperparameters","epochCount"],s);const r=u(e,["learningRateMultiplier"]);if(r!=null&&f(i,["tuningTask","hyperparameters","learningRateMultiplier"],r),u(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(u(e,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(u(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=u(e,["batchSize"]);t!==void 0&&a!=null&&f(t,["tuningTask","hyperparameters","batchSize"],a);const c=u(e,["learningRate"]);if(t!==void 0&&c!=null&&f(t,["tuningTask","hyperparameters","learningRate"],c),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(u(e,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function TN(e,t,n){const i={};let o=u(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const m=u(e,["validationDataset"]);t!==void 0&&m!=null&&f(t,["supervisedTuningSpec"],xd(m))}else if(o==="PREFERENCE_TUNING"){const m=u(e,["validationDataset"]);t!==void 0&&m!=null&&f(t,["preferenceOptimizationSpec"],xd(m))}const s=u(e,["tunedModelDisplayName"]);t!==void 0&&s!=null&&f(t,["tunedModelDisplayName"],s);const r=u(e,["description"]);t!==void 0&&r!=null&&f(t,["description"],r);let a=u(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const m=u(e,["epochCount"]);t!==void 0&&m!=null&&f(t,["supervisedTuningSpec","hyperParameters","epochCount"],m)}else if(a==="PREFERENCE_TUNING"){const m=u(e,["epochCount"]);t!==void 0&&m!=null&&f(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],m)}let c=u(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const m=u(e,["learningRateMultiplier"]);t!==void 0&&m!=null&&f(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],m)}else if(c==="PREFERENCE_TUNING"){const m=u(e,["learningRateMultiplier"]);t!==void 0&&m!=null&&f(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],m)}let l=u(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const m=u(e,["exportLastCheckpointOnly"]);t!==void 0&&m!=null&&f(t,["supervisedTuningSpec","exportLastCheckpointOnly"],m)}else if(l==="PREFERENCE_TUNING"){const m=u(e,["exportLastCheckpointOnly"]);t!==void 0&&m!=null&&f(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],m)}let d=u(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const m=u(e,["adapterSize"]);t!==void 0&&m!=null&&f(t,["supervisedTuningSpec","hyperParameters","adapterSize"],m)}else if(d==="PREFERENCE_TUNING"){const m=u(e,["adapterSize"]);t!==void 0&&m!=null&&f(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],m)}if(u(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(u(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const h=u(e,["labels"]);t!==void 0&&h!=null&&f(t,["labels"],h);const p=u(e,["beta"]);return t!==void 0&&p!=null&&f(t,["preferenceOptimizationSpec","hyperParameters","beta"],p),i}function IN(e,t){const n={},i=u(e,["baseModel"]);i!=null&&f(n,["baseModel"],i);const o=u(e,["preTunedModel"]);o!=null&&f(n,["preTunedModel"],o);const s=u(e,["trainingDataset"]);s!=null&&bN(s);const r=u(e,["config"]);return r!=null&&EN(r,n),n}function vN(e,t){const n={},i=u(e,["baseModel"]);i!=null&&f(n,["baseModel"],i);const o=u(e,["preTunedModel"]);o!=null&&f(n,["preTunedModel"],o);const s=u(e,["trainingDataset"]);s!=null&&xN(s,n,t);const r=u(e,["config"]);return r!=null&&TN(r,n,t),n}function _N(e,t){const n={},i=u(e,["name"]);return i!=null&&f(n,["_url","name"],i),n}function CN(e,t){const n={},i=u(e,["name"]);return i!=null&&f(n,["_url","name"],i),n}function SN(e,t,n){const i={},o=u(e,["pageSize"]);t!==void 0&&o!=null&&f(t,["_query","pageSize"],o);const s=u(e,["pageToken"]);t!==void 0&&s!=null&&f(t,["_query","pageToken"],s);const r=u(e,["filter"]);return t!==void 0&&r!=null&&f(t,["_query","filter"],r),i}function AN(e,t,n){const i={},o=u(e,["pageSize"]);t!==void 0&&o!=null&&f(t,["_query","pageSize"],o);const s=u(e,["pageToken"]);t!==void 0&&s!=null&&f(t,["_query","pageToken"],s);const r=u(e,["filter"]);return t!==void 0&&r!=null&&f(t,["_query","filter"],r),i}function RN(e,t){const n={},i=u(e,["config"]);return i!=null&&SN(i,n),n}function wN(e,t){const n={},i=u(e,["config"]);return i!=null&&AN(i,n),n}function MN(e,t){const n={},i=u(e,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);const o=u(e,["nextPageToken"]);o!=null&&f(n,["nextPageToken"],o);const s=u(e,["tunedModels"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>Am(a))),f(n,["tuningJobs"],r)}return n}function PN(e,t){const n={},i=u(e,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);const o=u(e,["nextPageToken"]);o!=null&&f(n,["nextPageToken"],o);const s=u(e,["tuningJobs"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>ur(a))),f(n,["tuningJobs"],r)}return n}function DN(e,t){const n={},i=u(e,["name"]);i!=null&&f(n,["model"],i);const o=u(e,["name"]);return o!=null&&f(n,["endpoint"],o),n}function bN(e,t){const n={};if(u(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(e,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=u(e,["examples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),f(n,["examples","examples"],o)}return n}function xN(e,t,n){const i={};let o=u(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const r=u(e,["gcsUri"]);t!==void 0&&r!=null&&f(t,["supervisedTuningSpec","trainingDatasetUri"],r)}else if(o==="PREFERENCE_TUNING"){const r=u(e,["gcsUri"]);t!==void 0&&r!=null&&f(t,["preferenceOptimizationSpec","trainingDatasetUri"],r)}let s=u(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const r=u(e,["vertexDatasetResource"]);t!==void 0&&r!=null&&f(t,["supervisedTuningSpec","trainingDatasetUri"],r)}else if(s==="PREFERENCE_TUNING"){const r=u(e,["vertexDatasetResource"]);t!==void 0&&r!=null&&f(t,["preferenceOptimizationSpec","trainingDatasetUri"],r)}if(u(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function Am(e,t){const n={},i=u(e,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);const o=u(e,["name"]);o!=null&&f(n,["name"],o);const s=u(e,["state"]);s!=null&&f(n,["state"],Up(s));const r=u(e,["createTime"]);r!=null&&f(n,["createTime"],r);const a=u(e,["tuningTask","startTime"]);a!=null&&f(n,["startTime"],a);const c=u(e,["tuningTask","completeTime"]);c!=null&&f(n,["endTime"],c);const l=u(e,["updateTime"]);l!=null&&f(n,["updateTime"],l);const d=u(e,["description"]);d!=null&&f(n,["description"],d);const h=u(e,["baseModel"]);h!=null&&f(n,["baseModel"],h);const p=u(e,["_self"]);return p!=null&&f(n,["tunedModel"],DN(p)),n}function ur(e,t){const n={},i=u(e,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);const o=u(e,["name"]);o!=null&&f(n,["name"],o);const s=u(e,["state"]);s!=null&&f(n,["state"],Up(s));const r=u(e,["createTime"]);r!=null&&f(n,["createTime"],r);const a=u(e,["startTime"]);a!=null&&f(n,["startTime"],a);const c=u(e,["endTime"]);c!=null&&f(n,["endTime"],c);const l=u(e,["updateTime"]);l!=null&&f(n,["updateTime"],l);const d=u(e,["error"]);d!=null&&f(n,["error"],d);const h=u(e,["description"]);h!=null&&f(n,["description"],h);const p=u(e,["baseModel"]);p!=null&&f(n,["baseModel"],p);const m=u(e,["tunedModel"]);m!=null&&f(n,["tunedModel"],m);const g=u(e,["preTunedModel"]);g!=null&&f(n,["preTunedModel"],g);const y=u(e,["supervisedTuningSpec"]);y!=null&&f(n,["supervisedTuningSpec"],y);const E=u(e,["preferenceOptimizationSpec"]);E!=null&&f(n,["preferenceOptimizationSpec"],E);const v=u(e,["tuningDataStats"]);v!=null&&f(n,["tuningDataStats"],v);const T=u(e,["encryptionSpec"]);T!=null&&f(n,["encryptionSpec"],T);const I=u(e,["partnerModelTuningSpec"]);I!=null&&f(n,["partnerModelTuningSpec"],I);const S=u(e,["customBaseModel"]);S!=null&&f(n,["customBaseModel"],S);const A=u(e,["experiment"]);A!=null&&f(n,["experiment"],A);const P=u(e,["labels"]);P!=null&&f(n,["labels"],P);const D=u(e,["outputUri"]);D!=null&&f(n,["outputUri"],D);const R=u(e,["pipelineJob"]);R!=null&&f(n,["pipelineJob"],R);const C=u(e,["serviceAccount"]);C!=null&&f(n,["serviceAccount"],C);const _=u(e,["tunedModelDisplayName"]);_!=null&&f(n,["tunedModelDisplayName"],_);const b=u(e,["veoTuningSpec"]);return b!=null&&f(n,["veoTuningSpec"],b),n}function NN(e,t){const n={},i=u(e,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);const o=u(e,["name"]);o!=null&&f(n,["name"],o);const s=u(e,["metadata"]);s!=null&&f(n,["metadata"],s);const r=u(e,["done"]);r!=null&&f(n,["done"],r);const a=u(e,["error"]);return a!=null&&f(n,["error"],a),n}function xd(e,t){const n={},i=u(e,["gcsUri"]);i!=null&&f(n,["validationDatasetUri"],i);const o=u(e,["vertexDatasetResource"]);return o!=null&&f(n,["validationDatasetUri"],o),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class LN extends Et{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Jt(yt.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const o={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(o.checkpointId=n.config.preTunedModelCheckpointId);const s=Object.assign(Object.assign({},n),{preTunedModel:o});return s.baseModel=void 0,await this.tuneInternal(s)}else{const o=Object.assign({},n);return await this.tuneInternal(o)}else{const o=Object.assign({},n),s=await this.tuneMldevInternal(o);let r="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?r=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(r=s.name.split("/operations/")[0]),{name:r,state:Qs.JOB_STATE_QUEUED}}}}async getInternal(t){var n,i,o,s;let r,a="",c={};if(this.apiClient.isVertexAI()){const l=CN(t);return a=H("{name}",l._url),c=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>ur(d))}else{const l=_N(t);return a=H("{name}",l._url),c=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>Am(d))}}async listInternal(t){var n,i,o,s;let r,a="",c={};if(this.apiClient.isVertexAI()){const l=wN(t);return a=H("tuningJobs",l._url),c=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const h=PN(d),p=new od;return Object.assign(p,h),p})}else{const l=RN(t);return a=H("tunedModels",l._url),c=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const h=MN(d),p=new od;return Object.assign(p,h),p})}}async cancel(t){var n,i,o,s;let r,a="",c={};if(this.apiClient.isVertexAI()){const l=mN(t);return a=H("{name}:cancel",l._url),c=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const h=yN(d),p=new sd;return Object.assign(p,h),p})}else{const l=pN(t);return a=H("{name}:cancel",l._url),c=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const h=gN(d),p=new sd;return Object.assign(p,h),p})}}async tuneInternal(t){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){const a=vN(t,t);return s=H("tuningJobs",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(l=>{const d=l;return d.sdkHttpResponse={headers:c.headers},d})),o.then(c=>ur(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=IN(t);return s=H("tunedModels",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(l=>{const d=l;return d.sdkHttpResponse={headers:c.headers},d})),o.then(c=>NN(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ON{async download(t,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const FN=1024*1024*8,kN=3,VN=1e3,UN=2,fo="x-goog-upload-status";async function GN(e,t,n){var i;const o=await Rm(e,t,n),s=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[fo])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return s.file}async function BN(e,t,n){var i;const o=await Rm(e,t,n),s=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[fo])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const r=Np(s),a=new fa;return Object.assign(a,r),a}async function Rm(e,t,n){var i,o;let s=0,r=0,a=new js(new Response),c="upload";for(s=e.size;r<s;){const l=Math.min(FN,s-r),d=e.slice(r,r+l);r+l>=s&&(c+=", finalize");let h=0,p=VN;for(;h<kN&&(a=await n.request({path:"",body:d,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(r),"Content-Length":String(l)}}}),!(!((i=a==null?void 0:a.headers)===null||i===void 0)&&i[fo]));)h++,await qN(p),p=p*UN;if(r+=l,((o=a==null?void 0:a.headers)===null||o===void 0?void 0:o[fo])!=="active")break;if(s<=r)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function HN(e){return{size:e.size,type:e.type}}function qN(e){return new Promise(t=>setTimeout(t,e))}class WN{async upload(t,n,i){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await GN(t,n,i)}async uploadToFileSearchStore(t,n,i){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await BN(t,n,i)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await HN(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $N{create(t,n,i){return new YN(t,n,i)}}class YN{constructor(t,n,i){this.url=t,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Nd="x-goog-api-key";class zN{constructor(t){this.apiKey=t}async addAuthHeaders(t,n){if(t.get(Nd)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(Nd,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const JN="gl-node/";class pO{get interactions(){if(this._interactions!==void 0)return this._interactions;if(console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions."),this.vertexai)throw new Error("This version of the GenAI SDK does not support Vertex AI API for interactions.");const t=this.httpOptions;t!=null&&t.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new Ce({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:t==null?void 0:t.timeout});return this._interactions=n.interactions,this._interactions}constructor(t){var n;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=t.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=t.apiKey;const i=qR(t.httpOptions,t.vertexai,void 0,void 0);i&&(t.httpOptions?t.httpOptions.baseUrl=i:t.httpOptions={baseUrl:i}),this.apiVersion=t.apiVersion,this.httpOptions=t.httpOptions;const o=new zN(this.apiKey);this.apiClient=new Hb({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:JN+"web",uploader:new WN,downloader:new ON}),this.models=new ax(this.apiClient),this.live=new tx(this.apiClient,o,new $N),this.batches=new EM(this.apiClient),this.chats=new jM(this.models,this.apiClient),this.caches=new XM(this.apiClient),this.files=new cP(this.apiClient),this.operations=new lx(this.apiClient),this.authTokens=new Sx(this.apiClient),this.tunings=new LN(this.apiClient),this.fileSearchStores=new xx(this.apiClient)}}var ve;(function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"})(ve||(ve={}));function KN(e){return e.nodeType===e.ELEMENT_NODE}function Zn(e){var t=e==null?void 0:e.host;return(t==null?void 0:t.shadowRoot)===e}function Qn(e){return Object.prototype.toString.call(e)==="[object ShadowRoot]"}function XN(e){return e.includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),e}function dr(e){try{var t=e.rules||e.cssRules;return t?XN(Array.from(t).map(wm).join("")):null}catch{return null}}function wm(e){var t=e.cssText;if(ZN(e))try{t=dr(e.styleSheet)||t}catch{}return t}function ZN(e){return"styleSheet"in e}var Mm=(function(){function e(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}return e.prototype.getId=function(t){var n;if(!t)return-1;var i=(n=this.getMeta(t))===null||n===void 0?void 0:n.id;return i??-1},e.prototype.getNode=function(t){return this.idNodeMap.get(t)||null},e.prototype.getIds=function(){return Array.from(this.idNodeMap.keys())},e.prototype.getMeta=function(t){return this.nodeMetaMap.get(t)||null},e.prototype.removeNodeFromMap=function(t){var n=this,i=this.getId(t);this.idNodeMap.delete(i),t.childNodes&&t.childNodes.forEach(function(o){return n.removeNodeFromMap(o)})},e.prototype.has=function(t){return this.idNodeMap.has(t)},e.prototype.hasNode=function(t){return this.nodeMetaMap.has(t)},e.prototype.add=function(t,n){var i=n.id;this.idNodeMap.set(i,t),this.nodeMetaMap.set(t,n)},e.prototype.replace=function(t,n){var i=this.getNode(t);if(i){var o=this.nodeMetaMap.get(i);o&&this.nodeMetaMap.set(n,o)}this.idNodeMap.set(t,n)},e.prototype.reset=function(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap},e})();function QN(){return new Mm}function Ia(e){var t=e.maskInputOptions,n=e.tagName,i=e.type,o=e.value,s=e.maskInputFn,r=o||"";return(t[n.toLowerCase()]||t[i])&&(s?r=s(r):r="*".repeat(r.length)),r}var Ld="__rrweb_original__";function jN(e){var t=e.getContext("2d");if(!t)return!0;for(var n=50,i=0;i<e.width;i+=n)for(var o=0;o<e.height;o+=n){var s=t.getImageData,r=Ld in s?s[Ld]:s,a=new Uint32Array(r.call(t,i,o,Math.min(n,e.width-i),Math.min(n,e.height-o)).data.buffer);if(a.some(function(c){return c!==0}))return!1}return!0}var eL=1,tL=new RegExp("[^a-z0-9-_:]"),li=-2;function Pm(){return eL++}function nL(e){if(e instanceof HTMLFormElement)return"form";var t=e.tagName.toLowerCase().trim();return tL.test(t)?"div":t}function iL(e){return e.cssRules?Array.from(e.cssRules).map(function(t){return t.cssText||""}).join(""):""}function oL(e){var t="";return e.indexOf("//")>-1?t=e.split("/").slice(0,3).join("/"):t=e.split("/")[0],t=t.split("?")[0],t}var Kt,Od,sL=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,rL=/^(?!www\.|(?:http|ftp)s?:\/\/|[A-Za-z]:\\|\/\/|#).*/,aL=/^(data:)([^,]*),(.*)/i;function ho(e,t){return(e||"").replace(sL,function(n,i,o,s,r,a){var c=o||r||a,l=i||s||"";if(!c)return n;if(!rL.test(c)||aL.test(c))return"url(".concat(l).concat(c).concat(l,")");if(c[0]==="/")return"url(".concat(l).concat(oL(t)+c).concat(l,")");var d=t.split("/"),h=c.split("/");d.pop();for(var p=0,m=h;p<m.length;p++){var g=m[p];g!=="."&&(g===".."?d.pop():d.push(g))}return"url(".concat(l).concat(d.join("/")).concat(l,")")})}var lL=/^[^ \t\n\r\u000c]+/,cL=/^[, \t\n\r\u000c]+/;function uL(e,t){if(t.trim()==="")return t;var n=0;function i(l){var d,h=l.exec(t.substring(n));return h?(d=h[0],n+=d.length,d):""}for(var o=[];i(cL),!(n>=t.length);){var s=i(lL);if(s.slice(-1)===",")s=dn(e,s.substring(0,s.length-1)),o.push(s);else{var r="";s=dn(e,s);for(var a=!1;;){var c=t.charAt(n);if(c===""){o.push((s+r).trim());break}else if(a)c===")"&&(a=!1);else if(c===","){n+=1,o.push((s+r).trim());break}else c==="("&&(a=!0);r+=c,n+=1}}}return o.join(", ")}function dn(e,t){if(!t||t.trim()==="")return t;var n=e.createElement("a");return n.href=t,n.href}function dL(e){return!!(e.tagName==="svg"||e.ownerSVGElement)}function va(){var e=document.createElement("a");return e.href="",e.href}function Dm(e,t,n,i){return n==="src"||n==="href"&&i&&!(t==="use"&&i[0]==="#")||n==="xlink:href"&&i&&i[0]!=="#"||n==="background"&&i&&(t==="table"||t==="td"||t==="th")?dn(e,i):n==="srcset"&&i?uL(e,i):n==="style"&&i?ho(i,va()):t==="object"&&n==="data"&&i?dn(e,i):i}function fL(e,t,n){if(typeof t=="string"){if(e.classList.contains(t))return!0}else for(var i=e.classList.length;i--;){var o=e.classList[i];if(t.test(o))return!0}return n?e.matches(n):!1}function po(e,t,n){if(!e)return!1;if(e.nodeType!==e.ELEMENT_NODE)return n?po(e.parentNode,t,n):!1;for(var i=e.classList.length;i--;){var o=e.classList[i];if(t.test(o))return!0}return n?po(e.parentNode,t,n):!1}function bm(e,t,n){var i=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(i===null)return!1;if(typeof t=="string"){if(i.classList.contains(t)||i.closest(".".concat(t)))return!0}else if(po(i,t,!0))return!0;return!!(n&&(i.matches(n)||i.closest(n)))}function hL(e,t,n){var i=e.contentWindow;if(i){var o=!1,s;try{s=i.document.readyState}catch{return}if(s!=="complete"){var r=setTimeout(function(){o||(t(),o=!0)},n);e.addEventListener("load",function(){clearTimeout(r),o=!0,t()});return}var a="about:blank";if(i.location.href!==a||e.src===a||e.src==="")return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}}function pL(e,t,n){var i=!1,o;try{o=e.sheet}catch{return}if(!o){var s=setTimeout(function(){i||(t(),i=!0)},n);e.addEventListener("load",function(){clearTimeout(s),i=!0,t()})}}function mL(e,t){var n=t.doc,i=t.mirror,o=t.blockClass,s=t.blockSelector,r=t.maskTextClass,a=t.maskTextSelector,c=t.inlineStylesheet,l=t.maskInputOptions,d=l===void 0?{}:l,h=t.maskTextFn,p=t.maskInputFn,m=t.dataURLOptions,g=m===void 0?{}:m,y=t.inlineImages,E=t.recordCanvas,v=t.keepIframeSrcFn,T=t.newlyAddedElement,I=T===void 0?!1:T,S=gL(n,i);switch(e.nodeType){case e.DOCUMENT_NODE:return e.compatMode!=="CSS1Compat"?{type:ve.Document,childNodes:[],compatMode:e.compatMode}:{type:ve.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:ve.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:S};case e.ELEMENT_NODE:return EL(e,{doc:n,blockClass:o,blockSelector:s,inlineStylesheet:c,maskInputOptions:d,maskInputFn:p,dataURLOptions:g,inlineImages:y,recordCanvas:E,keepIframeSrcFn:v,newlyAddedElement:I,rootId:S});case e.TEXT_NODE:return yL(e,{maskTextClass:r,maskTextSelector:a,maskTextFn:h,rootId:S});case e.CDATA_SECTION_NODE:return{type:ve.CDATA,textContent:"",rootId:S};case e.COMMENT_NODE:return{type:ve.Comment,textContent:e.textContent||"",rootId:S};default:return!1}}function gL(e,t){if(t.hasNode(e)){var n=t.getId(e);return n===1?void 0:n}}function yL(e,t){var n,i=t.maskTextClass,o=t.maskTextSelector,s=t.maskTextFn,r=t.rootId,a=e.parentNode&&e.parentNode.tagName,c=e.textContent,l=a==="STYLE"?!0:void 0,d=a==="SCRIPT"?!0:void 0;if(l&&c){try{e.nextSibling||e.previousSibling||!((n=e.parentNode.sheet)===null||n===void 0)&&n.cssRules&&(c=iL(e.parentNode.sheet))}catch(h){console.warn("Cannot get CSS styles from text's parentNode. Error: ".concat(h),e)}c=ho(c,va())}return d&&(c="SCRIPT_PLACEHOLDER"),!l&&!d&&c&&bm(e,i,o)&&(c=s?s(c):c.replace(/[\S]/g,"*")),{type:ve.Text,textContent:c||"",isStyle:l,rootId:r}}function EL(e,t){for(var n=t.doc,i=t.blockClass,o=t.blockSelector,s=t.inlineStylesheet,r=t.maskInputOptions,a=r===void 0?{}:r,c=t.maskInputFn,l=t.dataURLOptions,d=l===void 0?{}:l,h=t.inlineImages,p=t.recordCanvas,m=t.keepIframeSrcFn,g=t.newlyAddedElement,y=g===void 0?!1:g,E=t.rootId,v=fL(e,i,o),T=nL(e),I={},S=e.attributes.length,A=0;A<S;A++){var P=e.attributes[A];I[P.name]=Dm(n,T,P.name,P.value)}if(T==="link"&&s){var D=Array.from(n.styleSheets).find(function(U){return U.href===e.href}),R=null;D&&(R=dr(D)),R&&(delete I.rel,delete I.href,I._cssText=ho(R,D.href))}if(T==="style"&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){var R=dr(e.sheet);R&&(I._cssText=ho(R,va()))}if(T==="input"||T==="textarea"||T==="select"){var C=e.value,_=e.checked;I.type!=="radio"&&I.type!=="checkbox"&&I.type!=="submit"&&I.type!=="button"&&C?I.value=Ia({type:I.type,tagName:T,value:C,maskInputOptions:a,maskInputFn:c}):_&&(I.checked=_)}if(T==="option"&&(e.selected&&!a.select?I.selected=!0:delete I.selected),T==="canvas"&&p){if(e.__context==="2d")jN(e)||(I.rr_dataURL=e.toDataURL(d.type,d.quality));else if(!("__context"in e)){var b=e.toDataURL(d.type,d.quality),N=document.createElement("canvas");N.width=e.width,N.height=e.height;var F=N.toDataURL(d.type,d.quality);b!==F&&(I.rr_dataURL=b)}}if(T==="img"&&h){Kt||(Kt=n.createElement("canvas"),Od=Kt.getContext("2d"));var x=e,k=x.crossOrigin;x.crossOrigin="anonymous";var w=function(){try{Kt.width=x.naturalWidth,Kt.height=x.naturalHeight,Od.drawImage(x,0,0),I.rr_dataURL=Kt.toDataURL(d.type,d.quality)}catch(U){console.warn("Cannot inline img src=".concat(x.currentSrc,"! Error: ").concat(U))}k?I.crossOrigin=k:x.removeAttribute("crossorigin")};x.complete&&x.naturalWidth!==0?w():x.onload=w}if((T==="audio"||T==="video")&&(I.rr_mediaState=e.paused?"paused":"played",I.rr_mediaCurrentTime=e.currentTime),y||(e.scrollLeft&&(I.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(I.rr_scrollTop=e.scrollTop)),v){var M=e.getBoundingClientRect(),L=M.width,O=M.height;I={class:I.class,rr_width:"".concat(L,"px"),rr_height:"".concat(O,"px")}}return T==="iframe"&&!m(I.src)&&(e.contentDocument||(I.rr_src=I.src),delete I.src),{type:ve.Element,tagName:T,attributes:I,childNodes:[],isSVG:dL(e)||void 0,needBlock:v,rootId:E}}function re(e){return e===void 0?"":e.toLowerCase()}function TL(e,t){if(t.comment&&e.type===ve.Comment)return!0;if(e.type===ve.Element){if(t.script&&(e.tagName==="script"||e.tagName==="link"&&e.attributes.rel==="preload"&&e.attributes.as==="script"||e.tagName==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href=="string"&&e.attributes.href.endsWith(".js")))return!0;if(t.headFavicon&&(e.tagName==="link"&&e.attributes.rel==="shortcut icon"||e.tagName==="meta"&&(re(e.attributes.name).match(/^msapplication-tile(image|color)$/)||re(e.attributes.name)==="application-name"||re(e.attributes.rel)==="icon"||re(e.attributes.rel)==="apple-touch-icon"||re(e.attributes.rel)==="shortcut icon")))return!0;if(e.tagName==="meta"){if(t.headMetaDescKeywords&&re(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(re(e.attributes.property).match(/^(og|twitter|fb):/)||re(e.attributes.name).match(/^(og|twitter):/)||re(e.attributes.name)==="pinterest"))return!0;if(t.headMetaRobots&&(re(e.attributes.name)==="robots"||re(e.attributes.name)==="googlebot"||re(e.attributes.name)==="bingbot"))return!0;if(t.headMetaHttpEquiv&&e.attributes["http-equiv"]!==void 0)return!0;if(t.headMetaAuthorship&&(re(e.attributes.name)==="author"||re(e.attributes.name)==="generator"||re(e.attributes.name)==="framework"||re(e.attributes.name)==="publisher"||re(e.attributes.name)==="progid"||re(e.attributes.property).match(/^article:/)||re(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&(re(e.attributes.name)==="google-site-verification"||re(e.attributes.name)==="yandex-verification"||re(e.attributes.name)==="csrf-token"||re(e.attributes.name)==="p:domain_verify"||re(e.attributes.name)==="verify-v1"||re(e.attributes.name)==="verification"||re(e.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function fn(e,t){var n=t.doc,i=t.mirror,o=t.blockClass,s=t.blockSelector,r=t.maskTextClass,a=t.maskTextSelector,c=t.skipChild,l=c===void 0?!1:c,d=t.inlineStylesheet,h=d===void 0?!0:d,p=t.maskInputOptions,m=p===void 0?{}:p,g=t.maskTextFn,y=t.maskInputFn,E=t.slimDOMOptions,v=t.dataURLOptions,T=v===void 0?{}:v,I=t.inlineImages,S=I===void 0?!1:I,A=t.recordCanvas,P=A===void 0?!1:A,D=t.onSerialize,R=t.onIframeLoad,C=t.iframeLoadTimeout,_=C===void 0?5e3:C,b=t.onStylesheetLoad,N=t.stylesheetLoadTimeout,F=N===void 0?5e3:N,x=t.keepIframeSrcFn,k=x===void 0?function(){return!1}:x,w=t.newlyAddedElement,M=w===void 0?!1:w,L=t.preserveWhiteSpace,O=L===void 0?!0:L,U=mL(e,{doc:n,mirror:i,blockClass:o,blockSelector:s,maskTextClass:r,maskTextSelector:a,inlineStylesheet:h,maskInputOptions:m,maskTextFn:g,maskInputFn:y,dataURLOptions:T,inlineImages:S,recordCanvas:P,keepIframeSrcFn:k,newlyAddedElement:M});if(!U)return console.warn(e,"not serialized"),null;var B;i.hasNode(e)?B=i.getId(e):TL(U,E)||!O&&U.type===ve.Text&&!U.isStyle&&!U.textContent.replace(/^\s+|\s+$/gm,"").length?B=li:B=Pm();var $=Object.assign(U,{id:B});if(i.add(e,$),B===li)return null;D&&D(e);var X=!l;if($.type===ve.Element){X=X&&!$.needBlock,delete $.needBlock;var Y=e.shadowRoot;Y&&Qn(Y)&&($.isShadowHost=!0)}if(($.type===ve.Document||$.type===ve.Element)&&X){E.headWhitespace&&$.type===ve.Element&&$.tagName==="head"&&(O=!1);for(var te={doc:n,mirror:i,blockClass:o,blockSelector:s,maskTextClass:r,maskTextSelector:a,skipChild:l,inlineStylesheet:h,maskInputOptions:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:E,dataURLOptions:T,inlineImages:S,recordCanvas:P,preserveWhiteSpace:O,onSerialize:D,onIframeLoad:R,iframeLoadTimeout:_,onStylesheetLoad:b,stylesheetLoadTimeout:F,keepIframeSrcFn:k},G=0,W=Array.from(e.childNodes);G<W.length;G++){var Q=W[G],J=fn(Q,te);J&&$.childNodes.push(J)}if(KN(e)&&e.shadowRoot)for(var j=0,ee=Array.from(e.shadowRoot.childNodes);j<ee.length;j++){var Q=ee[j],J=fn(Q,te);J&&(Qn(e.shadowRoot)&&(J.isShadow=!0),$.childNodes.push(J))}}return e.parentNode&&Zn(e.parentNode)&&Qn(e.parentNode)&&($.isShadow=!0),$.type===ve.Element&&$.tagName==="iframe"&&hL(e,function(){var Oe=e.contentDocument;if(Oe&&R){var Ln=fn(Oe,{doc:Oe,mirror:i,blockClass:o,blockSelector:s,maskTextClass:r,maskTextSelector:a,skipChild:!1,inlineStylesheet:h,maskInputOptions:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:E,dataURLOptions:T,inlineImages:S,recordCanvas:P,preserveWhiteSpace:O,onSerialize:D,onIframeLoad:R,iframeLoadTimeout:_,onStylesheetLoad:b,stylesheetLoadTimeout:F,keepIframeSrcFn:k});Ln&&R(e,Ln)}},_),$.type===ve.Element&&$.tagName==="link"&&$.attributes.rel==="stylesheet"&&pL(e,function(){if(b){var Oe=fn(e,{doc:n,mirror:i,blockClass:o,blockSelector:s,maskTextClass:r,maskTextSelector:a,skipChild:!1,inlineStylesheet:h,maskInputOptions:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:E,dataURLOptions:T,inlineImages:S,recordCanvas:P,preserveWhiteSpace:O,onSerialize:D,onIframeLoad:R,iframeLoadTimeout:_,onStylesheetLoad:b,stylesheetLoadTimeout:F,keepIframeSrcFn:k});Oe&&b(e,Oe)}},F),$}function IL(e,t){var n=t||{},i=n.mirror,o=i===void 0?new Mm:i,s=n.blockClass,r=s===void 0?"rr-block":s,a=n.blockSelector,c=a===void 0?null:a,l=n.maskTextClass,d=l===void 0?"rr-mask":l,h=n.maskTextSelector,p=h===void 0?null:h,m=n.inlineStylesheet,g=m===void 0?!0:m,y=n.inlineImages,E=y===void 0?!1:y,v=n.recordCanvas,T=v===void 0?!1:v,I=n.maskAllInputs,S=I===void 0?!1:I,A=n.maskTextFn,P=n.maskInputFn,D=n.slimDOM,R=D===void 0?!1:D,C=n.dataURLOptions,_=n.preserveWhiteSpace,b=n.onSerialize,N=n.onIframeLoad,F=n.iframeLoadTimeout,x=n.onStylesheetLoad,k=n.stylesheetLoadTimeout,w=n.keepIframeSrcFn,M=w===void 0?function(){return!1}:w,L=S===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:S===!1?{password:!0}:S,O=R===!0||R==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:R==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:R===!1?{}:R;return fn(e,{doc:e,mirror:o,blockClass:r,blockSelector:c,maskTextClass:d,maskTextSelector:p,skipChild:!1,inlineStylesheet:g,maskInputOptions:L,maskTextFn:A,maskInputFn:P,slimDOMOptions:O,dataURLOptions:C,inlineImages:E,recordCanvas:T,preserveWhiteSpace:_,onSerialize:b,onIframeLoad:N,iframeLoadTimeout:F,onStylesheetLoad:x,stylesheetLoadTimeout:k,keepIframeSrcFn:M,newlyAddedElement:!1})}function Pe(e,t,n=document){const i={capture:!0,passive:!0};return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t,i)}const Zt=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let Fd={map:{},getId(){return console.error(Zt),-1},getNode(){return console.error(Zt),null},removeNodeFromMap(){console.error(Zt)},has(){return console.error(Zt),!1},reset(){console.error(Zt)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(Fd=new Proxy(Fd,{get(e,t,n){return t==="map"&&console.error(Zt),Reflect.get(e,t,n)}}));function ci(e,t,n={}){let i=null,o=0;return function(...s){const r=Date.now();!o&&n.leading===!1&&(o=r);const a=t-(r-o),c=this;a<=0||a>t?(i&&(clearTimeout(i),i=null),o=r,e.apply(c,s)):!i&&n.trailing!==!1&&(i=setTimeout(()=>{o=n.leading===!1?0:Date.now(),i=null,e.apply(c,s)},a))}}function Uo(e,t,n,i,o=window){const s=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,i?n:{set(r){setTimeout(()=>{n.set.call(this,r)},0),s&&s.set&&s.set.call(this,r)}}),()=>Uo(e,t,s||{},!0)}function vn(e,t,n){try{if(!(t in e))return()=>{};const i=e[t],o=n(i);return typeof o=="function"&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:i}})),e[t]=o,()=>{e[t]=i}}catch{return()=>{}}}function xm(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function Nm(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function De(e,t,n,i){if(!e)return!1;const o=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(!o)return!1;if(typeof t=="string"){if(o.classList.contains(t)||i&&o.closest("."+t)!==null)return!0}else if(po(o,t,i))return!0;return!!(n&&(e.matches(n)||i&&o.closest(n)!==null))}function vL(e,t){return t.getId(e)!==-1}function Es(e,t){return t.getId(e)===li}function Lm(e,t){if(Zn(e))return!1;const n=t.getId(e);return t.has(n)?e.parentNode&&e.parentNode.nodeType===e.DOCUMENT_NODE?!1:e.parentNode?Lm(e.parentNode,t):!0:!0}function Om(e){return!!e.changedTouches}function _L(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...t)=>{let n=t[0];if(!(0 in t))throw new TypeError("1 argument is required");do if(this===n)return!0;while(n=n&&n.parentNode);return!1})}function Fm(e,t){return!!(e.nodeName==="IFRAME"&&t.getMeta(e))}function km(e,t){return!!(e.nodeName==="LINK"&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&e.getAttribute("rel")==="stylesheet"&&t.getMeta(e))}function Vm(e){return!!(e!=null&&e.shadowRoot)}class CL{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(t){var n;return(n=this.styleIDMap.get(t))!==null&&n!==void 0?n:-1}has(t){return this.styleIDMap.has(t)}add(t,n){if(this.has(t))return this.getId(t);let i;return n===void 0?i=this.id++:i=n,this.styleIDMap.set(t,i),this.idStyleMap.set(i,t),i}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}var ie=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(ie||{}),ne=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e))(ne||{}),fr=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(fr||{}),_n=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(_n||{});function kd(e){return"__ln"in e}class SL{constructor(){this.length=0,this.head=null}get(t){if(t>=this.length)throw new Error("Position outside of list range");let n=this.head;for(let i=0;i<t;i++)n=(n==null?void 0:n.next)||null;return n}addNode(t){const n={value:t,previous:null,next:null};if(t.__ln=n,t.previousSibling&&kd(t.previousSibling)){const i=t.previousSibling.__ln.next;n.next=i,n.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=n,i&&(i.previous=n)}else if(t.nextSibling&&kd(t.nextSibling)&&t.nextSibling.__ln.previous){const i=t.nextSibling.__ln.previous;n.previous=i,n.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=n,i&&(i.next=n)}else this.head&&(this.head.previous=n),n.next=this.head,this.head=n;this.length++}removeNode(t){const n=t.__ln;this.head&&(n.previous?(n.previous.next=n.next,n.next&&(n.next.previous=n.previous)):(this.head=n.next,this.head&&(this.head.previous=null)),t.__ln&&delete t.__ln,this.length--)}}const Vd=(e,t)=>`${e}@${t}`;class AL{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=t=>{t.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const t=[],n=new SL,i=a=>{let c=a,l=li;for(;l===li;)c=c&&c.nextSibling,l=c&&this.mirror.getId(c);return l},o=a=>{var c,l,d,h;let p=null;((l=(c=a.getRootNode)===null||c===void 0?void 0:c.call(a))===null||l===void 0?void 0:l.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&a.getRootNode().host&&(p=a.getRootNode().host);let m=p;for(;((h=(d=m==null?void 0:m.getRootNode)===null||d===void 0?void 0:d.call(m))===null||h===void 0?void 0:h.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&m.getRootNode().host;)m=m.getRootNode().host;const g=!this.doc.contains(a)&&(!m||!this.doc.contains(m));if(!a.parentNode||g)return;const y=Zn(a.parentNode)?this.mirror.getId(p):this.mirror.getId(a.parentNode),E=i(a);if(y===-1||E===-1)return n.addNode(a);const v=fn(a,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:T=>{Fm(T,this.mirror)&&this.iframeManager.addIframe(T),km(T,this.mirror)&&this.stylesheetManager.trackLinkElement(T),Vm(a)&&this.shadowDomManager.addShadowRoot(a.shadowRoot,this.doc)},onIframeLoad:(T,I)=>{this.iframeManager.attachIframe(T,I),this.shadowDomManager.observeAttachShadow(T)},onStylesheetLoad:(T,I)=>{this.stylesheetManager.attachLinkElement(T,I)}});v&&t.push({parentId:y,nextId:E,node:v})};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const a of Array.from(this.movedSet.values()))Ud(this.removes,a,this.mirror)&&!this.movedSet.has(a.parentNode)||o(a);for(const a of Array.from(this.addedSet.values()))!Gd(this.droppedSet,a)&&!Ud(this.removes,a,this.mirror)||Gd(this.movedSet,a)?o(a):this.droppedSet.add(a);let s=null;for(;n.length;){let a=null;if(s){const c=this.mirror.getId(s.value.parentNode),l=i(s.value);c!==-1&&l!==-1&&(a=s)}if(!a)for(let c=n.length-1;c>=0;c--){const l=n.get(c);if(l){const d=this.mirror.getId(l.value.parentNode);if(i(l.value)===-1)continue;if(d!==-1){a=l;break}else{const p=l.value;if(p.parentNode&&p.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const m=p.parentNode.host;if(this.mirror.getId(m)!==-1){a=l;break}}}}}if(!a){for(;n.head;)n.removeNode(n.head.value);break}s=a.previous,n.removeNode(a.value),o(a.value)}const r={texts:this.texts.map(a=>({id:this.mirror.getId(a.node),value:a.value})).filter(a=>this.mirror.has(a.id)),attributes:this.attributes.map(a=>({id:this.mirror.getId(a.node),attributes:a.attributes})).filter(a=>this.mirror.has(a.id)),removes:this.removes,adds:t};!r.texts.length&&!r.attributes.length&&!r.removes.length&&!r.adds.length||(this.texts=[],this.attributes=[],this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(r))},this.processMutation=t=>{if(!Es(t.target,this.mirror))switch(t.type){case"characterData":{const n=t.target.textContent;!De(t.target,this.blockClass,this.blockSelector,!1)&&n!==t.oldValue&&this.texts.push({value:bm(t.target,this.maskTextClass,this.maskTextSelector)&&n?this.maskTextFn?this.maskTextFn(n):n.replace(/[\S]/g,"*"):n,node:t.target});break}case"attributes":{const n=t.target;let i=t.target.getAttribute(t.attributeName);if(t.attributeName==="value"&&(i=Ia({maskInputOptions:this.maskInputOptions,tagName:t.target.tagName,type:t.target.getAttribute("type"),value:i,maskInputFn:this.maskInputFn})),De(t.target,this.blockClass,this.blockSelector,!1)||i===t.oldValue)return;let o=this.attributes.find(s=>s.node===t.target);if(n.tagName==="IFRAME"&&t.attributeName==="src"&&!this.keepIframeSrcFn(i))if(!n.contentDocument)t.attributeName="rr_src";else return;if(o||(o={node:t.target,attributes:{}},this.attributes.push(o)),t.attributeName==="style"){const s=this.doc.createElement("span");t.oldValue&&s.setAttribute("style",t.oldValue),(o.attributes.style===void 0||o.attributes.style===null)&&(o.attributes.style={});const r=o.attributes.style;for(const a of Array.from(n.style)){const c=n.style.getPropertyValue(a),l=n.style.getPropertyPriority(a);(c!==s.style.getPropertyValue(a)||l!==s.style.getPropertyPriority(a))&&(l===""?r[a]=c:r[a]=[c,l])}for(const a of Array.from(s.style))n.style.getPropertyValue(a)===""&&(r[a]=!1)}else o.attributes[t.attributeName]=Dm(this.doc,n.tagName,t.attributeName,i);break}case"childList":{if(De(t.target,this.blockClass,this.blockSelector,!0))return;t.addedNodes.forEach(n=>this.genAdds(n,t.target)),t.removedNodes.forEach(n=>{const i=this.mirror.getId(n),o=Zn(t.target)?this.mirror.getId(t.target.host):this.mirror.getId(t.target);De(t.target,this.blockClass,this.blockSelector,!1)||Es(n,this.mirror)||!vL(n,this.mirror)||(this.addedSet.has(n)?(hr(this.addedSet,n),this.droppedSet.add(n)):this.addedSet.has(t.target)&&i===-1||Lm(t.target,this.mirror)||(this.movedSet.has(n)&&this.movedMap[Vd(i,o)]?hr(this.movedSet,n):this.removes.push({parentId:o,id:i,isShadow:Zn(t.target)&&Qn(t.target)?!0:void 0})),this.mapRemoves.push(n))});break}}},this.genAdds=(t,n)=>{if(this.mirror.hasNode(t)){if(Es(t,this.mirror))return;this.movedSet.add(t);let i=null;n&&this.mirror.hasNode(n)&&(i=this.mirror.getId(n)),i&&i!==-1&&(this.movedMap[Vd(this.mirror.getId(t),i)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);De(t,this.blockClass,this.blockSelector,!1)||t.childNodes.forEach(i=>this.genAdds(i))}}init(t){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager"].forEach(n=>{this[n]=t[n]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function hr(e,t){e.delete(t),t.childNodes.forEach(n=>hr(e,n))}function Ud(e,t,n){return e.length===0?!1:Um(e,t,n)}function Um(e,t,n){const{parentNode:i}=t;if(!i)return!1;const o=n.getId(i);return e.some(s=>s.id===o)?!0:Um(e,i,n)}function Gd(e,t){return e.size===0?!1:Gm(e,t)}function Gm(e,t){const{parentNode:n}=t;return n?e.has(n)?!0:Gm(e,n):!1}const Vt=[],Bm=typeof CSSGroupingRule<"u",Hm=typeof CSSMediaRule<"u",qm=typeof CSSSupportsRule<"u",Wm=typeof CSSConditionRule<"u";function gi(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0];return e.target}catch{return e.target}}function $m(e,t){var n,i;const o=new AL;Vt.push(o),o.init(e);let s=window.MutationObserver||window.__rrMutationObserver;const r=(i=(n=window==null?void 0:window.Zone)===null||n===void 0?void 0:n.__symbol__)===null||i===void 0?void 0:i.call(n,"MutationObserver");r&&window[r]&&(s=window[r]);const a=new s(o.processMutations.bind(o));return a.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),a}function RL({mousemoveCb:e,sampling:t,doc:n,mirror:i}){if(t.mousemove===!1)return()=>{};const o=typeof t.mousemove=="number"?t.mousemove:50,s=typeof t.mousemoveCallback=="number"?t.mousemoveCallback:500;let r=[],a;const c=ci(h=>{const p=Date.now()-a;e(r.map(m=>(m.timeOffset-=p,m)),h),r=[],a=null},s),l=ci(h=>{const p=gi(h),{clientX:m,clientY:g}=Om(h)?h.changedTouches[0]:h;a||(a=Date.now()),r.push({x:m,y:g,id:i.getId(p),timeOffset:Date.now()-a}),c(typeof DragEvent<"u"&&h instanceof DragEvent?ne.Drag:h instanceof MouseEvent?ne.MouseMove:ne.TouchMove)},o,{trailing:!1}),d=[Pe("mousemove",l,n),Pe("touchmove",l,n),Pe("drag",l,n)];return()=>{d.forEach(h=>h())}}function wL({mouseInteractionCb:e,doc:t,mirror:n,blockClass:i,blockSelector:o,sampling:s}){if(s.mouseInteraction===!1)return()=>{};const r=s.mouseInteraction===!0||s.mouseInteraction===void 0?{}:s.mouseInteraction,a=[],c=l=>d=>{const h=gi(d);if(De(h,i,o,!0))return;const p=Om(d)?d.changedTouches[0]:d;if(!p)return;const m=n.getId(h),{clientX:g,clientY:y}=p;e({type:fr[l],id:m,x:g,y})};return Object.keys(fr).filter(l=>Number.isNaN(Number(l))&&!l.endsWith("_Departed")&&r[l]!==!1).forEach(l=>{const d=l.toLowerCase(),h=c(l);a.push(Pe(d,h,t))}),()=>{a.forEach(l=>l())}}function Ym({scrollCb:e,doc:t,mirror:n,blockClass:i,blockSelector:o,sampling:s}){const r=ci(a=>{const c=gi(a);if(!c||De(c,i,o,!0))return;const l=n.getId(c);if(c===t){const d=t.scrollingElement||t.documentElement;e({id:l,x:d.scrollLeft,y:d.scrollTop})}else e({id:l,x:c.scrollLeft,y:c.scrollTop})},s.scroll||100);return Pe("scroll",r,t)}function ML({viewportResizeCb:e}){let t=-1,n=-1;const i=ci(()=>{const o=xm(),s=Nm();(t!==o||n!==s)&&(e({width:Number(s),height:Number(o)}),t=o,n=s)},200);return Pe("resize",i,window)}function Bd(e,t){const n=Object.assign({},e);return t||delete n.userTriggered,n}const PL=["INPUT","TEXTAREA","SELECT"],Hd=new WeakMap;function DL({inputCb:e,doc:t,mirror:n,blockClass:i,blockSelector:o,ignoreClass:s,maskInputOptions:r,maskInputFn:a,sampling:c,userTriggeredOnInput:l}){function d(v){let T=gi(v);const I=v.isTrusted;if(T&&T.tagName==="OPTION"&&(T=T.parentElement),!T||!T.tagName||PL.indexOf(T.tagName)<0||De(T,i,o,!0))return;const S=T.type;if(T.classList.contains(s))return;let A=T.value,P=!1;S==="radio"||S==="checkbox"?P=T.checked:(r[T.tagName.toLowerCase()]||r[S])&&(A=Ia({maskInputOptions:r,tagName:T.tagName,type:S,value:A,maskInputFn:a})),h(T,Bd({text:A,isChecked:P,userTriggered:I},l));const D=T.name;S==="radio"&&D&&P&&t.querySelectorAll(`input[type="radio"][name="${D}"]`).forEach(R=>{R!==T&&h(R,Bd({text:R.value,isChecked:!P,userTriggered:!1},l))})}function h(v,T){const I=Hd.get(v);if(!I||I.text!==T.text||I.isChecked!==T.isChecked){Hd.set(v,T);const S=n.getId(v);e(Object.assign(Object.assign({},T),{id:S}))}}const m=(c.input==="last"?["change"]:["input","change"]).map(v=>Pe(v,d,t)),g=t.defaultView;if(!g)return()=>{m.forEach(v=>v())};const y=g.Object.getOwnPropertyDescriptor(g.HTMLInputElement.prototype,"value"),E=[[g.HTMLInputElement.prototype,"value"],[g.HTMLInputElement.prototype,"checked"],[g.HTMLSelectElement.prototype,"value"],[g.HTMLTextAreaElement.prototype,"value"],[g.HTMLSelectElement.prototype,"selectedIndex"],[g.HTMLOptionElement.prototype,"selected"]];return y&&y.set&&m.push(...E.map(v=>Uo(v[0],v[1],{set(){d({target:this})}},!1,g))),()=>{m.forEach(v=>v())}}function mo(e){const t=[];function n(i,o){if(Bm&&i.parentRule instanceof CSSGroupingRule||Hm&&i.parentRule instanceof CSSMediaRule||qm&&i.parentRule instanceof CSSSupportsRule||Wm&&i.parentRule instanceof CSSConditionRule){const r=Array.from(i.parentRule.cssRules).indexOf(i);o.unshift(r)}else if(i.parentStyleSheet){const r=Array.from(i.parentStyleSheet.cssRules).indexOf(i);o.unshift(r)}return o}return n(e,t)}function Ct(e,t,n){let i,o;return e?(e.ownerNode?i=t.getId(e.ownerNode):o=n.getId(e),{styleId:o,id:i}):{}}function bL({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:i}){const o=i.CSSStyleSheet.prototype.insertRule;i.CSSStyleSheet.prototype.insertRule=function(d,h){const{id:p,styleId:m}=Ct(this,t,n.styleMirror);return(p&&p!==-1||m&&m!==-1)&&e({id:p,styleId:m,adds:[{rule:d,index:h}]}),o.apply(this,[d,h])};const s=i.CSSStyleSheet.prototype.deleteRule;i.CSSStyleSheet.prototype.deleteRule=function(d){const{id:h,styleId:p}=Ct(this,t,n.styleMirror);return(h&&h!==-1||p&&p!==-1)&&e({id:h,styleId:p,removes:[{index:d}]}),s.apply(this,[d])};let r;i.CSSStyleSheet.prototype.replace&&(r=i.CSSStyleSheet.prototype.replace,i.CSSStyleSheet.prototype.replace=function(d){const{id:h,styleId:p}=Ct(this,t,n.styleMirror);return(h&&h!==-1||p&&p!==-1)&&e({id:h,styleId:p,replace:d}),r.apply(this,[d])});let a;i.CSSStyleSheet.prototype.replaceSync&&(a=i.CSSStyleSheet.prototype.replaceSync,i.CSSStyleSheet.prototype.replaceSync=function(d){const{id:h,styleId:p}=Ct(this,t,n.styleMirror);return(h&&h!==-1||p&&p!==-1)&&e({id:h,styleId:p,replaceSync:d}),a.apply(this,[d])});const c={};Bm?c.CSSGroupingRule=i.CSSGroupingRule:(Hm&&(c.CSSMediaRule=i.CSSMediaRule),Wm&&(c.CSSConditionRule=i.CSSConditionRule),qm&&(c.CSSSupportsRule=i.CSSSupportsRule));const l={};return Object.entries(c).forEach(([d,h])=>{l[d]={insertRule:h.prototype.insertRule,deleteRule:h.prototype.deleteRule},h.prototype.insertRule=function(p,m){const{id:g,styleId:y}=Ct(this.parentStyleSheet,t,n.styleMirror);return(g&&g!==-1||y&&y!==-1)&&e({id:g,styleId:y,adds:[{rule:p,index:[...mo(this),m||0]}]}),l[d].insertRule.apply(this,[p,m])},h.prototype.deleteRule=function(p){const{id:m,styleId:g}=Ct(this.parentStyleSheet,t,n.styleMirror);return(m&&m!==-1||g&&g!==-1)&&e({id:m,styleId:g,removes:[{index:[...mo(this),p]}]}),l[d].deleteRule.apply(this,[p])}}),()=>{i.CSSStyleSheet.prototype.insertRule=o,i.CSSStyleSheet.prototype.deleteRule=s,r&&(i.CSSStyleSheet.prototype.replace=r),a&&(i.CSSStyleSheet.prototype.replaceSync=a),Object.entries(c).forEach(([d,h])=>{h.prototype.insertRule=l[d].insertRule,h.prototype.deleteRule=l[d].deleteRule})}}function zm({mirror:e,stylesheetManager:t},n){var i,o,s;let r=null;n.nodeName==="#document"?r=e.getId(n):r=e.getId(n.host);const a=n.nodeName==="#document"?(i=n.defaultView)===null||i===void 0?void 0:i.Document:(s=(o=n.ownerDocument)===null||o===void 0?void 0:o.defaultView)===null||s===void 0?void 0:s.ShadowRoot,c=Object.getOwnPropertyDescriptor(a==null?void 0:a.prototype,"adoptedStyleSheets");return r===null||r===-1||!a||!c?()=>{}:(Object.defineProperty(n,"adoptedStyleSheets",{configurable:c.configurable,enumerable:c.enumerable,get(){var l;return(l=c.get)===null||l===void 0?void 0:l.call(this)},set(l){var d;const h=(d=c.set)===null||d===void 0?void 0:d.call(this,l);if(r!==null&&r!==-1)try{t.adoptStyleSheets(l,r)}catch{}return h}}),()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:c.configurable,enumerable:c.enumerable,get:c.get,set:c.set})})}function xL({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:i},{win:o}){const s=o.CSSStyleDeclaration.prototype.setProperty;o.CSSStyleDeclaration.prototype.setProperty=function(a,c,l){var d;if(n.has(a))return s.apply(this,[a,c,l]);const{id:h,styleId:p}=Ct((d=this.parentRule)===null||d===void 0?void 0:d.parentStyleSheet,t,i.styleMirror);return(h&&h!==-1||p&&p!==-1)&&e({id:h,styleId:p,set:{property:a,value:c,priority:l},index:mo(this.parentRule)}),s.apply(this,[a,c,l])};const r=o.CSSStyleDeclaration.prototype.removeProperty;return o.CSSStyleDeclaration.prototype.removeProperty=function(a){var c;if(n.has(a))return r.apply(this,[a]);const{id:l,styleId:d}=Ct((c=this.parentRule)===null||c===void 0?void 0:c.parentStyleSheet,t,i.styleMirror);return(l&&l!==-1||d&&d!==-1)&&e({id:l,styleId:d,remove:{property:a},index:mo(this.parentRule)}),r.apply(this,[a])},()=>{o.CSSStyleDeclaration.prototype.setProperty=s,o.CSSStyleDeclaration.prototype.removeProperty=r}}function NL({mediaInteractionCb:e,blockClass:t,blockSelector:n,mirror:i,sampling:o}){const s=a=>ci(c=>{const l=gi(c);if(!l||De(l,t,n,!0))return;const{currentTime:d,volume:h,muted:p,playbackRate:m}=l;e({type:a,id:i.getId(l),currentTime:d,volume:h,muted:p,playbackRate:m})},o.media||500),r=[Pe("play",s(0)),Pe("pause",s(1)),Pe("seeked",s(2)),Pe("volumechange",s(3)),Pe("ratechange",s(4))];return()=>{r.forEach(a=>a())}}function LL({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const i=[],o=new WeakMap,s=n.FontFace;n.FontFace=function(c,l,d){const h=new s(c,l,d);return o.set(h,{family:c,buffer:typeof l!="string",descriptors:d,fontSource:typeof l=="string"?l:JSON.stringify(Array.from(new Uint8Array(l)))}),h};const r=vn(t.fonts,"add",function(a){return function(c){return setTimeout(()=>{const l=o.get(c);l&&(e(l),o.delete(c))},0),a.apply(this,[c])}});return i.push(()=>{n.FontFace=s}),i.push(r),()=>{i.forEach(a=>a())}}function OL(e){const{doc:t,mirror:n,blockClass:i,blockSelector:o,selectionCb:s}=e;let r=!0;const a=()=>{const c=t.getSelection();if(!c||r&&(c!=null&&c.isCollapsed))return;r=c.isCollapsed||!1;const l=[],d=c.rangeCount||0;for(let h=0;h<d;h++){const p=c.getRangeAt(h),{startContainer:m,startOffset:g,endContainer:y,endOffset:E}=p;De(m,i,o,!0)||De(y,i,o,!0)||l.push({start:n.getId(m),startOffset:g,end:n.getId(y),endOffset:E})}s({ranges:l})};return a(),Pe("selectionchange",a)}function FL(e,t){const{mutationCb:n,mousemoveCb:i,mouseInteractionCb:o,scrollCb:s,viewportResizeCb:r,inputCb:a,mediaInteractionCb:c,styleSheetRuleCb:l,styleDeclarationCb:d,canvasMutationCb:h,fontCb:p,selectionCb:m}=e;e.mutationCb=(...g)=>{t.mutation&&t.mutation(...g),n(...g)},e.mousemoveCb=(...g)=>{t.mousemove&&t.mousemove(...g),i(...g)},e.mouseInteractionCb=(...g)=>{t.mouseInteraction&&t.mouseInteraction(...g),o(...g)},e.scrollCb=(...g)=>{t.scroll&&t.scroll(...g),s(...g)},e.viewportResizeCb=(...g)=>{t.viewportResize&&t.viewportResize(...g),r(...g)},e.inputCb=(...g)=>{t.input&&t.input(...g),a(...g)},e.mediaInteractionCb=(...g)=>{t.mediaInteaction&&t.mediaInteaction(...g),c(...g)},e.styleSheetRuleCb=(...g)=>{t.styleSheetRule&&t.styleSheetRule(...g),l(...g)},e.styleDeclarationCb=(...g)=>{t.styleDeclaration&&t.styleDeclaration(...g),d(...g)},e.canvasMutationCb=(...g)=>{t.canvasMutation&&t.canvasMutation(...g),h(...g)},e.fontCb=(...g)=>{t.font&&t.font(...g),p(...g)},e.selectionCb=(...g)=>{t.selection&&t.selection(...g),m(...g)}}function kL(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};FL(e,t);const i=$m(e,e.doc),o=RL(e),s=wL(e),r=Ym(e),a=ML(e),c=DL(e),l=NL(e),d=bL(e,{win:n}),h=zm(e,e.doc),p=xL(e,{win:n}),m=e.collectFonts?LL(e):()=>{},g=OL(e),y=[];for(const E of e.plugins)y.push(E.observer(E.callback,n,E.options));return()=>{Vt.forEach(E=>E.reset()),i.disconnect(),o(),s(),r(),a(),c(),l(),d(),h(),p(),m(),g(),y.forEach(E=>E())}}class qd{constructor(t){this.generateIdFn=t,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(t,n,i,o){const s=i||this.getIdToRemoteIdMap(t),r=o||this.getRemoteIdToIdMap(t);let a=s.get(n);return a||(a=this.generateIdFn(),s.set(n,a),r.set(a,n)),a}getIds(t,n){const i=this.getIdToRemoteIdMap(t),o=this.getRemoteIdToIdMap(t);return n.map(s=>this.getId(t,s,i,o))}getRemoteId(t,n,i){const o=i||this.getRemoteIdToIdMap(t);if(typeof n!="number")return n;const s=o.get(n);return s||-1}getRemoteIds(t,n){const i=this.getRemoteIdToIdMap(t);return n.map(o=>this.getRemoteId(t,o,i))}reset(t){if(!t){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(t),this.iframeRemoteIdToIdMap.delete(t)}getIdToRemoteIdMap(t){let n=this.iframeIdToRemoteIdMap.get(t);return n||(n=new Map,this.iframeIdToRemoteIdMap.set(t,n)),n}getRemoteIdToIdMap(t){let n=this.iframeRemoteIdToIdMap.get(t);return n||(n=new Map,this.iframeRemoteIdToIdMap.set(t,n)),n}}class VL{constructor(t){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new qd(Pm),this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new qd(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(t){this.iframes.set(t,!0),t.contentWindow&&this.crossOriginIframeMap.set(t.contentWindow,t)}addLoadListener(t){this.loadListener=t}attachIframe(t,n){var i;this.mutationCb({adds:[{parentId:this.mirror.getId(t),nextId:null,node:n}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),(i=this.loadListener)===null||i===void 0||i.call(this,t),t.contentDocument&&t.contentDocument.adoptedStyleSheets&&t.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(t.contentDocument.adoptedStyleSheets,this.mirror.getId(t.contentDocument))}handleMessage(t){if(t.data.type==="rrweb"){if(!t.source)return;const i=this.crossOriginIframeMap.get(t.source);if(!i)return;const o=this.transformCrossOriginEvent(i,t.data.event);o&&this.wrappedEmit(o,t.data.isCheckout)}}transformCrossOriginEvent(t,n){var i;switch(n.type){case ie.FullSnapshot:return this.crossOriginIframeMirror.reset(t),this.crossOriginIframeStyleMirror.reset(t),this.replaceIdOnNode(n.data.node,t),{timestamp:n.timestamp,type:ie.IncrementalSnapshot,data:{source:ne.Mutation,adds:[{parentId:this.mirror.getId(t),nextId:null,node:n.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}};case ie.Meta:case ie.Load:case ie.DomContentLoaded:return!1;case ie.Plugin:return n;case ie.Custom:return this.replaceIds(n.data.payload,t,["id","parentId","previousId","nextId"]),n;case ie.IncrementalSnapshot:switch(n.data.source){case ne.Mutation:return n.data.adds.forEach(o=>{this.replaceIds(o,t,["parentId","nextId","previousId"]),this.replaceIdOnNode(o.node,t)}),n.data.removes.forEach(o=>{this.replaceIds(o,t,["parentId","id"])}),n.data.attributes.forEach(o=>{this.replaceIds(o,t,["id"])}),n.data.texts.forEach(o=>{this.replaceIds(o,t,["id"])}),n;case ne.Drag:case ne.TouchMove:case ne.MouseMove:return n.data.positions.forEach(o=>{this.replaceIds(o,t,["id"])}),n;case ne.ViewportResize:return!1;case ne.MediaInteraction:case ne.MouseInteraction:case ne.Scroll:case ne.CanvasMutation:case ne.Input:return this.replaceIds(n.data,t,["id"]),n;case ne.StyleSheetRule:case ne.StyleDeclaration:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleId"]),n;case ne.Font:return n;case ne.Selection:return n.data.ranges.forEach(o=>{this.replaceIds(o,t,["start","end"])}),n;case ne.AdoptedStyleSheet:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleIds"]),(i=n.data.styles)===null||i===void 0||i.forEach(o=>{this.replaceStyleIds(o,t,["styleId"])}),n}}}replace(t,n,i,o){for(const s of o)!Array.isArray(n[s])&&typeof n[s]!="number"||(Array.isArray(n[s])?n[s]=t.getIds(i,n[s]):n[s]=t.getId(i,n[s]));return n}replaceIds(t,n,i){return this.replace(this.crossOriginIframeMirror,t,n,i)}replaceStyleIds(t,n,i){return this.replace(this.crossOriginIframeStyleMirror,t,n,i)}replaceIdOnNode(t,n){this.replaceIds(t,n,["id"]),"childNodes"in t&&t.childNodes.forEach(i=>{this.replaceIdOnNode(i,n)})}}class UL{constructor(t){this.shadowDoms=new WeakSet,this.restorePatches=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror;const n=this;this.restorePatches.push(vn(Element.prototype,"attachShadow",function(i){return function(o){const s=i.call(this,o);return this.shadowRoot&&n.addShadowRoot(this.shadowRoot,this.ownerDocument),s}}))}addShadowRoot(t,n){Qn(t)&&(this.shadowDoms.has(t)||(this.shadowDoms.add(t),$m(Object.assign(Object.assign({},this.bypassOptions),{doc:n,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),t),Ym(Object.assign(Object.assign({},this.bypassOptions),{scrollCb:this.scrollCb,doc:t,mirror:this.mirror})),setTimeout(()=>{t.adoptedStyleSheets&&t.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(t.adoptedStyleSheets,this.mirror.getId(t.host)),zm({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},t)},0)))}observeAttachShadow(t){if(t.contentWindow){const n=this;this.restorePatches.push(vn(t.contentWindow.HTMLElement.prototype,"attachShadow",function(i){return function(o){const s=i.call(this,o);return this.shadowRoot&&n.addShadowRoot(this.shadowRoot,t.contentDocument),s}}))}}reset(){this.restorePatches.forEach(t=>t()),this.shadowDoms=new WeakSet}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function GL(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]]);return n}function BL(e,t,n,i){function o(s){return s instanceof n?s:new n(function(r){r(s)})}return new(n||(n=Promise))(function(s,r){function a(d){try{l(i.next(d))}catch(h){r(h)}}function c(d){try{l(i.throw(d))}catch(h){r(h)}}function l(d){d.done?s(d.value):o(d.value).then(a,c)}l((i=i.apply(e,[])).next())})}var hn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",HL=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Fi=0;Fi<hn.length;Fi++)HL[hn.charCodeAt(Fi)]=Fi;var qL=function(e){var t=new Uint8Array(e),n,i=t.length,o="";for(n=0;n<i;n+=3)o+=hn[t[n]>>2],o+=hn[(t[n]&3)<<4|t[n+1]>>4],o+=hn[(t[n+1]&15)<<2|t[n+2]>>6],o+=hn[t[n+2]&63];return i%3===2?o=o.substring(0,o.length-1)+"=":i%3===1&&(o=o.substring(0,o.length-2)+"=="),o};const Wd=new Map;function WL(e,t){let n=Wd.get(e);return n||(n=new Map,Wd.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}const Jm=(e,t,n)=>{if(!e||!(Xm(e,t)||typeof e=="object"))return;const i=e.constructor.name,o=WL(n,i);let s=o.indexOf(e);return s===-1&&(s=o.length,o.push(e)),s};function zi(e,t,n){if(e instanceof Array)return e.map(i=>zi(i,t,n));if(e===null)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer){const i=e.constructor.name,o=qL(e);return{rr_type:i,base64:o}}else{if(e instanceof DataView)return{rr_type:e.constructor.name,args:[zi(e.buffer,t,n),e.byteOffset,e.byteLength]};if(e instanceof HTMLImageElement){const i=e.constructor.name,{src:o}=e;return{rr_type:i,src:o}}else if(e instanceof HTMLCanvasElement){const i="HTMLImageElement",o=e.toDataURL();return{rr_type:i,src:o}}else{if(e instanceof ImageData)return{rr_type:e.constructor.name,args:[zi(e.data,t,n),e.width,e.height]};if(Xm(e,t)||typeof e=="object"){const i=e.constructor.name,o=Jm(e,t,n);return{rr_type:i,index:o}}}}return e}const Km=(e,t,n)=>[...e].map(i=>zi(i,t,n)),Xm=(e,t)=>!!["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(o=>typeof t[o]=="function").find(o=>e instanceof t[o]);function $L(e,t,n,i){const o=[],s=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const r of s)try{if(typeof t.CanvasRenderingContext2D.prototype[r]!="function")continue;const a=vn(t.CanvasRenderingContext2D.prototype,r,function(c){return function(...l){return De(this.canvas,n,i,!0)||setTimeout(()=>{const d=Km([...l],t,this);e(this.canvas,{type:_n["2D"],property:r,args:d})},0),c.apply(this,l)}});o.push(a)}catch{const c=Uo(t.CanvasRenderingContext2D.prototype,r,{set(l){e(this.canvas,{type:_n["2D"],property:r,args:[l],setter:!0})}});o.push(c)}return()=>{o.forEach(r=>r())}}function $d(e,t,n){const i=[];try{const o=vn(e.HTMLCanvasElement.prototype,"getContext",function(s){return function(r,...a){return De(this,t,n,!0)||"__context"in this||(this.__context=r),s.apply(this,[r,...a])}});i.push(o)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{i.forEach(o=>o())}}function Yd(e,t,n,i,o,s,r){const a=[],c=Object.getOwnPropertyNames(e);for(const l of c)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(l))try{if(typeof e[l]!="function")continue;const d=vn(e,l,function(h){return function(...p){const m=h.apply(this,p);if(Jm(m,r,this),!De(this.canvas,i,o,!0)){const g=Km([...p],r,this),y={type:t,property:l,args:g};n(this.canvas,y)}return m}});a.push(d)}catch{const h=Uo(e,l,{set(p){n(this.canvas,{type:t,property:l,args:[p],setter:!0})}});a.push(h)}return a}function YL(e,t,n,i,o){const s=[];return s.push(...Yd(t.WebGLRenderingContext.prototype,_n.WebGL,e,n,i,o,t)),typeof t.WebGL2RenderingContext<"u"&&s.push(...Yd(t.WebGL2RenderingContext.prototype,_n.WebGL2,e,n,i,o,t)),()=>{s.forEach(r=>r())}}var Zm=null;try{var zL=typeof module<"u"&&typeof module.require=="function"&&module.require("worker_threads")||typeof __non_webpack_require__=="function"&&__non_webpack_require__("worker_threads")||typeof require=="function"&&require("worker_threads");Zm=zL.Worker}catch{}function JL(e,t){return Buffer.from(e,"base64").toString("utf8")}function KL(e,t,n){var i=JL(e),o=i.indexOf(`
`,10)+1,s=i.substring(o)+"";return function(a){return new Zm(s,Object.assign({},a,{eval:!0}))}}function XL(e,t){var n=atob(e);return n}function ZL(e,t,n){var i=XL(e),o=i.indexOf(`
`,10)+1,s=i.substring(o)+"",r=new Blob([s],{type:"application/javascript"});return URL.createObjectURL(r)}function QL(e,t,n){var i;return function(s){return i=i||ZL(e),new Worker(i,s)}}var jL=Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]";function eO(){return jL}function tO(e,t,n){return eO()?KL(e):QL(e)}var nO=tO("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICAgJ3VzZSBzdHJpY3QnOwoKICAgIC8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KICAgIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLg0KDQogICAgUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55DQogICAgcHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLg0KDQogICAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEgNCiAgICBSRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkNCiAgICBBTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsDQogICAgSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NDQogICAgTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1INCiAgICBPVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SDQogICAgUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS4NCiAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqLw0KDQogICAgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikgew0KICAgICAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH0NCiAgICAgICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7DQogICAgICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvclsidGhyb3ciXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfQ0KICAgICAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpOw0KICAgICAgICB9KTsNCiAgICB9CgogICAgLyoKICAgICAqIGJhc2U2NC1hcnJheWJ1ZmZlciAxLjAuMSA8aHR0cHM6Ly9naXRodWIuY29tL25pa2xhc3ZoL2Jhc2U2NC1hcnJheWJ1ZmZlcj4KICAgICAqIENvcHlyaWdodCAoYykgMjAyMSBOaWtsYXMgdm9uIEhlcnR6ZW4gPGh0dHBzOi8vaGVydHplbi5jb20+CiAgICAgKiBSZWxlYXNlZCB1bmRlciBNSVQgTGljZW5zZQogICAgICovCiAgICB2YXIgY2hhcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyc7CiAgICAvLyBVc2UgYSBsb29rdXAgdGFibGUgdG8gZmluZCB0aGUgaW5kZXguCiAgICB2YXIgbG9va3VwID0gdHlwZW9mIFVpbnQ4QXJyYXkgPT09ICd1bmRlZmluZWQnID8gW10gOiBuZXcgVWludDhBcnJheSgyNTYpOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGFycy5sZW5ndGg7IGkrKykgewogICAgICAgIGxvb2t1cFtjaGFycy5jaGFyQ29kZUF0KGkpXSA9IGk7CiAgICB9CiAgICB2YXIgZW5jb2RlID0gZnVuY3Rpb24gKGFycmF5YnVmZmVyKSB7CiAgICAgICAgdmFyIGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlidWZmZXIpLCBpLCBsZW4gPSBieXRlcy5sZW5ndGgsIGJhc2U2NCA9ICcnOwogICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkgKz0gMykgewogICAgICAgICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaV0gPj4gMl07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1soKGJ5dGVzW2ldICYgMykgPDwgNCkgfCAoYnl0ZXNbaSArIDFdID4+IDQpXTsKICAgICAgICAgICAgYmFzZTY0ICs9IGNoYXJzWygoYnl0ZXNbaSArIDFdICYgMTUpIDw8IDIpIHwgKGJ5dGVzW2kgKyAyXSA+PiA2KV07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1tieXRlc1tpICsgMl0gJiA2M107CiAgICAgICAgfQogICAgICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgJz0nOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgJz09JzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGJhc2U2NDsKICAgIH07CgogICAgY29uc3QgbGFzdEJsb2JNYXAgPSBuZXcgTWFwKCk7DQogICAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gbmV3IE1hcCgpOw0KICAgIGZ1bmN0aW9uIGdldFRyYW5zcGFyZW50QmxvYkZvcih3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucykgew0KICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkgew0KICAgICAgICAgICAgY29uc3QgaWQgPSBgJHt3aWR0aH0tJHtoZWlnaHR9YDsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgaWYgKHRyYW5zcGFyZW50QmxvYk1hcC5oYXMoaWQpKQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNwYXJlbnRCbG9iTWFwLmdldChpZCk7DQogICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsNCiAgICAgICAgICAgICAgICBvZmZzY3JlZW4uZ2V0Q29udGV4dCgnMmQnKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0geWllbGQgYmxvYi5hcnJheUJ1ZmZlcigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7DQogICAgICAgICAgICAgICAgdHJhbnNwYXJlbnRCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICByZXR1cm4gYmFzZTY0Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgcmV0dXJuICcnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICB9DQogICAgY29uc3Qgd29ya2VyID0gc2VsZjsNCiAgICB3b3JrZXIub25tZXNzYWdlID0gZnVuY3Rpb24gKGUpIHsNCiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgY29uc3QgeyBpZCwgYml0bWFwLCB3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucyB9ID0gZS5kYXRhOw0KICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zKTsNCiAgICAgICAgICAgICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IG9mZnNjcmVlbi5nZXRDb250ZXh0KCcyZCcpOw0KICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoYml0bWFwLCAwLCAwKTsNCiAgICAgICAgICAgICAgICBiaXRtYXAuY2xvc2UoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBibG9iLnR5cGU7DQogICAgICAgICAgICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSB5aWVsZCBibG9iLmFycmF5QnVmZmVyKCk7DQogICAgICAgICAgICAgICAgY29uc3QgYmFzZTY0ID0gZW5jb2RlKGFycmF5QnVmZmVyKTsNCiAgICAgICAgICAgICAgICBpZiAoIWxhc3RCbG9iTWFwLmhhcyhpZCkgJiYgKHlpZWxkIHRyYW5zcGFyZW50QmFzZTY0KSA9PT0gYmFzZTY0KSB7DQogICAgICAgICAgICAgICAgICAgIGxhc3RCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdvcmtlci5wb3N0TWVzc2FnZSh7IGlkIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7DQogICAgICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHsNCiAgICAgICAgICAgICAgICAgICAgaWQsDQogICAgICAgICAgICAgICAgICAgIHR5cGUsDQogICAgICAgICAgICAgICAgICAgIGJhc2U2NCwNCiAgICAgICAgICAgICAgICAgICAgd2lkdGgsDQogICAgICAgICAgICAgICAgICAgIGhlaWdodCwNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgfTsKCn0pKCk7Cgo=");class iO{constructor(t){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(c,l)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(c)||this.pendingCanvasMutations.set(c,[]),this.pendingCanvasMutations.get(c).push(l)};const{sampling:n="all",win:i,blockClass:o,blockSelector:s,recordCanvas:r,dataURLOptions:a}=t;this.mutationCb=t.mutationCb,this.mirror=t.mirror,r&&n==="all"&&this.initCanvasMutationObserver(i,o,s),r&&typeof n=="number"&&this.initCanvasFPSObserver(n,i,o,s,{dataURLOptions:a})}reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}initCanvasFPSObserver(t,n,i,o,s){const r=$d(n,i,o),a=new Map,c=new nO;c.onmessage=g=>{const{id:y}=g.data;if(a.set(y,!1),!("base64"in g.data))return;const{base64:E,type:v,width:T,height:I}=g.data;this.mutationCb({id:y,type:_n["2D"],commands:[{property:"clearRect",args:[0,0,T,I]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:E}],type:v}]},0,0]}]})};const l=1e3/t;let d=0,h;const p=()=>{const g=[];return n.document.querySelectorAll("canvas").forEach(y=>{De(y,i,o,!0)||g.push(y)}),g},m=g=>{if(d&&g-d<l){h=requestAnimationFrame(m);return}d=g,p().forEach(y=>BL(this,void 0,void 0,function*(){var E;const v=this.mirror.getId(y);if(a.get(v))return;if(a.set(v,!0),["webgl","webgl2"].includes(y.__context)){const I=y.getContext(y.__context);((E=I==null?void 0:I.getContextAttributes())===null||E===void 0?void 0:E.preserveDrawingBuffer)===!1&&(I==null||I.clear(I.COLOR_BUFFER_BIT))}const T=yield createImageBitmap(y);c.postMessage({id:v,bitmap:T,width:y.width,height:y.height,dataURLOptions:s.dataURLOptions},[T])})),h=requestAnimationFrame(m)};h=requestAnimationFrame(m),this.resetObservers=()=>{r(),cancelAnimationFrame(h)}}initCanvasMutationObserver(t,n,i){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const o=$d(t,n,i),s=$L(this.processMutation.bind(this),t,n,i),r=YL(this.processMutation.bind(this),t,n,i,this.mirror);this.resetObservers=()=>{o(),s(),r()}}startPendingCanvasMutationFlusher(){requestAnimationFrame(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){const t=n=>{this.rafStamps.latestId=n,requestAnimationFrame(t)};requestAnimationFrame(t)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((t,n)=>{const i=this.mirror.getId(n);this.flushPendingCanvasMutationFor(n,i)}),requestAnimationFrame(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(t,n){if(this.frozen||this.locked)return;const i=this.pendingCanvasMutations.get(t);if(!i||n===-1)return;const o=i.map(r=>GL(r,["type"])),{type:s}=i[0];this.mutationCb({id:n,type:s,commands:o}),this.pendingCanvasMutations.delete(t)}}class oO{constructor(t){this.trackedLinkElements=new WeakSet,this.styleMirror=new CL,this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}attachLinkElement(t,n){"_cssText"in n.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:n.id,attributes:n.attributes}]}),this.trackLinkElement(t)}trackLinkElement(t){this.trackedLinkElements.has(t)||(this.trackedLinkElements.add(t),this.trackStylesheetInLinkElement(t))}adoptStyleSheets(t,n){if(t.length===0)return;const i={id:n,styleIds:[]},o=[];for(const s of t){let r;if(this.styleMirror.has(s))r=this.styleMirror.getId(s);else{r=this.styleMirror.add(s);const a=Array.from(s.rules||CSSRule);o.push({styleId:r,rules:a.map((c,l)=>({rule:wm(c),index:l}))})}i.styleIds.push(r)}o.length>0&&(i.styles=o),this.adoptedStyleSheetCb(i)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(t){}}function Ee(e){return Object.assign(Object.assign({},e),{timestamp:Date.now()})}let ue,Ji,Ts,go=!1;const Ze=QN();function Go(e={}){const{emit:t,checkoutEveryNms:n,checkoutEveryNth:i,blockClass:o="rr-block",blockSelector:s=null,ignoreClass:r="rr-ignore",maskTextClass:a="rr-mask",maskTextSelector:c=null,inlineStylesheet:l=!0,maskAllInputs:d,maskInputOptions:h,slimDOMOptions:p,maskInputFn:m,maskTextFn:g,hooks:y,packFn:E,sampling:v={},dataURLOptions:T={},mousemoveWait:I,recordCanvas:S=!1,recordCrossOriginIframes:A=!1,userTriggeredOnInput:P=!1,collectFonts:D=!1,inlineImages:R=!1,plugins:C,keepIframeSrcFn:_=()=>!1,ignoreCSSAttributes:b=new Set([])}=e,N=A?window.parent===window:!0;let F=!1;if(!N)try{window.parent.document,F=!1}catch{F=!0}if(N&&!t)throw new Error("emit function is required");I!==void 0&&v.mousemove===void 0&&(v.mousemove=I),Ze.reset();const x=d===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:h!==void 0?h:{password:!0},k=p===!0||p==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:p==="all",headMetaDescKeywords:p==="all"}:p||{};_L();let w,M=0;const L=G=>{for(const W of C||[])W.eventProcessor&&(G=W.eventProcessor(G));return E&&(G=E(G)),G};ue=(G,W)=>{var Q;if(!((Q=Vt[0])===null||Q===void 0)&&Q.isFrozen()&&G.type!==ie.FullSnapshot&&!(G.type===ie.IncrementalSnapshot&&G.data.source===ne.Mutation)&&Vt.forEach(J=>J.unfreeze()),N)t==null||t(L(G),W);else if(F){const J={type:"rrweb",event:L(G),isCheckout:W};window.parent.postMessage(J,"*")}if(G.type===ie.FullSnapshot)w=G,M=0;else if(G.type===ie.IncrementalSnapshot){if(G.data.source===ne.Mutation&&G.data.isAttachIframe)return;M++;const J=i&&M>=i,j=n&&G.timestamp-w.timestamp>n;(J||j)&&Ji(!0)}};const O=G=>{ue(Ee({type:ie.IncrementalSnapshot,data:Object.assign({source:ne.Mutation},G)}))},U=G=>ue(Ee({type:ie.IncrementalSnapshot,data:Object.assign({source:ne.Scroll},G)})),B=G=>ue(Ee({type:ie.IncrementalSnapshot,data:Object.assign({source:ne.CanvasMutation},G)})),$=G=>ue(Ee({type:ie.IncrementalSnapshot,data:Object.assign({source:ne.AdoptedStyleSheet},G)})),X=new oO({mutationCb:O,adoptedStyleSheetCb:$}),Y=new VL({mirror:Ze,mutationCb:O,stylesheetManager:X,recordCrossOriginIframes:A,wrappedEmit:ue});for(const G of C||[])G.getMirror&&G.getMirror({nodeMirror:Ze,crossOriginIframeMirror:Y.crossOriginIframeMirror,crossOriginIframeStyleMirror:Y.crossOriginIframeStyleMirror});Ts=new iO({recordCanvas:S,mutationCb:B,win:window,blockClass:o,blockSelector:s,mirror:Ze,sampling:v.canvas,dataURLOptions:T});const te=new UL({mutationCb:O,scrollCb:U,bypassOptions:{blockClass:o,blockSelector:s,maskTextClass:a,maskTextSelector:c,inlineStylesheet:l,maskInputOptions:x,dataURLOptions:T,maskTextFn:g,maskInputFn:m,recordCanvas:S,inlineImages:R,sampling:v,slimDOMOptions:k,iframeManager:Y,stylesheetManager:X,canvasManager:Ts,keepIframeSrcFn:_},mirror:Ze});Ji=(G=!1)=>{var W,Q,J,j,ee,Oe;ue(Ee({type:ie.Meta,data:{href:window.location.href,width:Nm(),height:xm()}}),G),X.reset(),Vt.forEach(Re=>Re.lock());const Ln=IL(document,{mirror:Ze,blockClass:o,blockSelector:s,maskTextClass:a,maskTextSelector:c,inlineStylesheet:l,maskAllInputs:x,maskTextFn:g,slimDOM:k,dataURLOptions:T,recordCanvas:S,inlineImages:R,onSerialize:Re=>{Fm(Re,Ze)&&Y.addIframe(Re),km(Re,Ze)&&X.trackLinkElement(Re),Vm(Re)&&te.addShadowRoot(Re.shadowRoot,document)},onIframeLoad:(Re,Bo)=>{Y.attachIframe(Re,Bo),te.observeAttachShadow(Re)},onStylesheetLoad:(Re,Bo)=>{X.attachLinkElement(Re,Bo)},keepIframeSrcFn:_});if(!Ln)return console.warn("Failed to snapshot the document");ue(Ee({type:ie.FullSnapshot,data:{node:Ln,initialOffset:{left:window.pageXOffset!==void 0?window.pageXOffset:(document==null?void 0:document.documentElement.scrollLeft)||((Q=(W=document==null?void 0:document.body)===null||W===void 0?void 0:W.parentElement)===null||Q===void 0?void 0:Q.scrollLeft)||((J=document==null?void 0:document.body)===null||J===void 0?void 0:J.scrollLeft)||0,top:window.pageYOffset!==void 0?window.pageYOffset:(document==null?void 0:document.documentElement.scrollTop)||((ee=(j=document==null?void 0:document.body)===null||j===void 0?void 0:j.parentElement)===null||ee===void 0?void 0:ee.scrollTop)||((Oe=document==null?void 0:document.body)===null||Oe===void 0?void 0:Oe.scrollTop)||0}}})),Vt.forEach(Re=>Re.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&X.adoptStyleSheets(document.adoptedStyleSheets,Ze.getId(document))};try{const G=[];G.push(Pe("DOMContentLoaded",()=>{ue(Ee({type:ie.DomContentLoaded,data:{}}))}));const W=J=>{var j;return kL({mutationCb:O,mousemoveCb:(ee,Oe)=>ue(Ee({type:ie.IncrementalSnapshot,data:{source:Oe,positions:ee}})),mouseInteractionCb:ee=>ue(Ee({type:ie.IncrementalSnapshot,data:Object.assign({source:ne.MouseInteraction},ee)})),scrollCb:U,viewportResizeCb:ee=>ue(Ee({type:ie.IncrementalSnapshot,data:Object.assign({source:ne.ViewportResize},ee)})),inputCb:ee=>ue(Ee({type:ie.IncrementalSnapshot,data:Object.assign({source:ne.Input},ee)})),mediaInteractionCb:ee=>ue(Ee({type:ie.IncrementalSnapshot,data:Object.assign({source:ne.MediaInteraction},ee)})),styleSheetRuleCb:ee=>ue(Ee({type:ie.IncrementalSnapshot,data:Object.assign({source:ne.StyleSheetRule},ee)})),styleDeclarationCb:ee=>ue(Ee({type:ie.IncrementalSnapshot,data:Object.assign({source:ne.StyleDeclaration},ee)})),canvasMutationCb:B,fontCb:ee=>ue(Ee({type:ie.IncrementalSnapshot,data:Object.assign({source:ne.Font},ee)})),selectionCb:ee=>{ue(Ee({type:ie.IncrementalSnapshot,data:Object.assign({source:ne.Selection},ee)}))},blockClass:o,ignoreClass:r,maskTextClass:a,maskTextSelector:c,maskInputOptions:x,inlineStylesheet:l,sampling:v,recordCanvas:S,inlineImages:R,userTriggeredOnInput:P,collectFonts:D,doc:J,maskInputFn:m,maskTextFn:g,keepIframeSrcFn:_,blockSelector:s,slimDOMOptions:k,dataURLOptions:T,mirror:Ze,iframeManager:Y,stylesheetManager:X,shadowDomManager:te,canvasManager:Ts,ignoreCSSAttributes:b,plugins:((j=C==null?void 0:C.filter(ee=>ee.observer))===null||j===void 0?void 0:j.map(ee=>({observer:ee.observer,options:ee.options,callback:Oe=>ue(Ee({type:ie.Plugin,data:{plugin:ee.name,payload:Oe}}))})))||[]},y)};Y.addLoadListener(J=>{G.push(W(J.contentDocument))});const Q=()=>{Ji(),G.push(W(document)),go=!0};return document.readyState==="interactive"||document.readyState==="complete"?Q():G.push(Pe("load",()=>{ue(Ee({type:ie.Load,data:{}})),Q()},window)),()=>{G.forEach(J=>J()),go=!1}}catch(G){console.warn(G)}}Go.addCustomEvent=(e,t)=>{if(!go)throw new Error("please add custom event after start recording");ue(Ee({type:ie.Custom,data:{tag:e,payload:t}}))};Go.freezePage=()=>{Vt.forEach(e=>e.freeze())};Go.takeFullSnapshot=e=>{if(!go)throw new Error("please take full snapshot after start recording");Ji(e)};Go.mirror=Ze;export{hO as A,pO as G,aO as a,Gc as b,fs as c,RA as d,MA as e,xA as f,VR as g,dO as h,Go as i,Oh as j,e0 as k,fO as l,cO as m,SA as p,rO as r,Fc as s,uO as u};
